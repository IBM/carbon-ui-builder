{"version":3,"sources":["assets/component-icons/button.svg","assets/component-icons/checkbox.svg","assets/component-icons/grid.svg","assets/component-icons/text-area.svg","assets/component-icons/text-input.svg","assets/component-icons/text.svg","assets/dashboard-empty-state.svg","assets/chart-404.svg","components/header.tsx","components/header-menu-item-link.tsx","context/fragments-context.tsx","styles.ts","components/link-button.tsx","components/main.tsx","routes/edit/tools.ts","context/notification-context.tsx","context/modal-context.tsx","fragment-components/a-component.tsx","fragment-components/a-button.tsx","fragment-components/a-checkbox.tsx","fragment-components/a-column.tsx","fragment-components/a-grid.tsx","fragment-components/a-row.tsx","fragment-components/a-text.tsx","fragment-components/a-textarea.tsx","fragment-components/a-textinput.tsx","components/fragment.tsx","components/grid.tsx","components/notification.tsx","components/left-pane.tsx","routes/edit/share-options/share-options-modal.tsx","routes/edit/share-options/exports/create-fragment-sandbox.ts","routes/edit/share-options/exports/frameworks/react-fragment.ts","routes/edit/share-options/exports/frameworks/angular-fragment.ts","routes/edit/share-options/exports/frameworks/vanilla-fragment.ts","routes/edit/share-options/exports/frameworks/vue-fragment.ts","utils/file-tools.ts","routes/edit/share-options/exports/export-code-modal.tsx","components/selection-tile.tsx","utils/fragment-tools.ts","routes/edit/share-options/exports/export-image-modal.tsx","context/local-fragments-context.tsx","routes/edit/index.tsx","routes/edit/duplicate-fragment-modal.tsx","routes/edit/delete-fragment-modal.tsx","routes/edit/settings-fragment-modal.tsx","routes/edit/fragment-modal.tsx","routes/edit/edit-header.tsx","components/element-tile.tsx","routes/edit/elements-pane.tsx","routes/edit/style-pane.tsx","routes/edit/code-pane.tsx","routes/edit/export-pane.tsx","routes/edit/selected-component-breadcrumbs.tsx","routes/edit/style-context-pane.tsx","routes/edit/code-context-pane.tsx","routes/dashboard/dashboard-search.tsx","routes/dashboard/dashboard-header.tsx","routes/dashboard/fragment-wizard/create-fragment-modal.tsx","routes/dashboard/fragment-tile.tsx","routes/dashboard/fragment-tile-list.tsx","routes/dashboard/fragment-wizard/generate-new-fragment.ts","routes/dashboard/fragment-wizard/fragment-wizard.tsx","routes/dashboard/fragment-wizard/choose-fragment-modal.tsx","routes/dashboard/fragment-wizard/import-json-modal.tsx","routes/dashboard/index.tsx","routes/not-found.tsx","routes/error-boundary.tsx","components/ui-shell.tsx","app.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Header","isSideNavExpanded","setIsSideNavExpanded","history","useHistory","headerName","css","aria-label","role","tabIndex","isActive","onClick","prefix","title","className","push","onKeyDown","event","key","HeaderMenuItemLinkBase","this","props","to","rest","staticContext","Component","HeaderMenuItemLinkRouter","withRouter","HeaderMenuItemLink","forwardRef","ref","displayName","FragmentActionType","main","Button","cx","Main","drag","dragObj","stopPropagation","dataTransfer","setData","JSON","stringify","FragmentsContext","createContext","NotificationActionType","useFetchOne","id","dispatch","useEffect","type","FETCH_ONE","data","useFragment","context","useContext","console","info","_","state","pathSegments","location","pathname","split","currentId","length","fragments","find","fragment","UPDATE_ONE","loaded","fragmentsReducer","action","UPDATE_ALL","updatedFragments","filter","some","actionFragment","map","updatedFragment","assign","concat","every","updatedFragmentState","updateOne","REMOVE_FRAGMENT","TOGGLE_VISIBILITY","hidden","REMOVE_FRAGMENTS","remainingFragments","ids","ADD_ONE","duplicate","expandedFragments","FragmentsContextProvider","localFragments","children","initialState","parse","localStorage","getItem","Array","isArray","store","useReducer","filteredFragments","setItem","Provider","value","NotificationContext","ModalActionType","ModalType","notifications","notificationCounter","NotificationReducer","REMOVE_NOTIFICATION","notification","ADD_NOTIFICATION","NotificationContextProvider","headerStyle","iconStyle","AComponentCodeUI","selectedComponent","setComponent","dropStyle","dropStyleBefore","dropStyleAfter","AComponent","componentObj","select","selected","remove","headingCss","setFragment","useState","showDragOverIndicator","setShowDragOverIndicator","dragOverPosition","setDragOverPosition","holderRef","useRef","isDragOverBefore","current","offsetWidth","offsetHeight","draggable","onDragStart","component","onDragEnter","onDragLeave","onDragOver","rect","currentTarget","getBoundingClientRect","pageX","left","pageY","top","onDrop","preventDefault","getData","updatedState","getParentComponent","items","indexOf","AButtonStyleUI","kindItems","text","TextInput","labelText","onChange","Dropdown","label","titleText","initialSelectedItem","item","kind","itemToString","selectedItem","AButton","disabled","ACheckboxStyleUI","ACheckboxCodeUI","codeContext","name","ACheckbox","Checkbox","helpIconStyle","AColumnStyleUI","onNumInputchange","imaginaryTarget","Number","isAccordionOpen","setIsAccordionOpen","small","smallSpan","smallOffset","medium","mediumSpan","mediumOffset","large","largeSpan","largeOffset","xLarge","xLargeSpan","xLargeOffset","max","maxSpan","maxOffset","href","target","rel","Accordion","align","AccordionItem","open","NumberInput","min","addStyle","addStyleLeft","addStyleRight","AColumn","parentComponent","addCell","offset","Column","sm","span","undefined","md","lg","xlg","AGridStyleUI","checked","showOutline","condensed","fullWidth","narrow","showOutlineStyle","AGrid","Grid","ARowStyleUI","addStyleTop","addStyleBottom","ARow","addRow","ATextStyleUI","AText","ATextAreaStyleUI","helperText","placeholder","ATextAreaCodeUI","ATextArea","TextArea","ATextInputStyleUI","typeItems","inputType","defaultValue","ATextInputCodeUI","log","ATextInput","canvas","allowDrop","componentCounter","getSelectedComponent","getComponentById","i","selectedComponentId","stateWithoutComponent","componentId","componentIndex","findIndex","slice","componentsThatNeedNames","updatedList","list","dropInIndex","dropInId","initializeIds","includes","co","child","parent","Fragment","SkeletonPlaceholder","getHighestId","Math","drop","width","height","renderComponents","row","column","Row","styles","Col","cols","render","notificationStyle","minWidth","notificationAreaStyle","Notification","index","lowContrast","aria-live","subtitle","message","caption","onCloseButtonClick","onNotificationClose","style","actions","actionFunction","actionText","ModalContext","ShareOptionsModals","Exports","ShowModal","FragmentID","modalReducer","setDuplicationModal","DUPLICATION","setDeletionModal","DELETION","setShareModal","SHARING","setSettingsModal","SETTINGS","setExportModal","EXPORT","closeModal","ModalContextProvider","modal","createFragmentSandbox","fragmentTemplate","files","Object","keys","forEach","filePath","content","LZString","compressToBase64","replace","addIfNotExist","arr","getCellAttributeString","cell","sizeShort","sizeLong","spanString","offsetString","spanAndOffset","jsonToTemplate","json","getCellParamsString","join","generateTemplate","carbonImportsString","jsonToImports","imports","reduce","string","curr","template","fragmentTagMap","dataAndOptions","saveBlob","blob","fileName","url","URL","createObjectURL","anchor","document","createElement","download","click","saveFile","setTimeout","revokeObjectURL","warningNotificationProps","notificationType","exportCodeModalStyle","codeSnippetWrapper","titleWrapper","codeSnippet","ExportCode","displayedModal","setDisplayedModal","modalState","dispatchModal","jsonCode","vanillaCode","fragmentData","fragmentType","dependencies","d3","createVanillaApp","reactCode","formatOptions","plugins","parserBabel","trailingComma","useTabs","componentJs","format","react","emotion","createReactApp","angularCode","rxjs","createAngularApp","vueCode","vue","createVueApp","generateSandboxUrl","parameters","Modal","hasForm","CODE_EXPORTS","onRequestClose","primaryButtonText","secondaryButtonText","onRequestSubmit","onSecondarySubmit","SHARE_OPTIONS","modalHeading","Tabs","Tab","Blob","CodeSnippet","light","copyButtonDescription","tileFooter","SelectionTile","icon","tag","sleep","ms","Promise","resolve","getFragmentPreview","a","element","position","zIndex","minHeight","ReactDOM","React","body","appendChild","domtoimage","toBlob","imageBlob","exportSettingForm","exportSettingFormGroup","previewContainer","selectInputWH","selectInput","fragmentImage","updatePreviewUrl","handleResize","doInputChange","debounce","doUpdatePreviewSize","ExportImageModal","fragmentState","exportSettings","unit","ratioLock","fragmentName","curRatio","inputs","setInputs","preview","previewUrl","setPreviewUrl","isPerformingAction","setIsPerformingAction","previewContainerRef","imageContainerSize","setImageContainerSize","window","addEventListener","removeEventListener","getPreviewSize","fitRatio","previewSize","renderProps","reader","FileReader","readAsDataURL","onloadend","imageUrl","result","toString","onSubmit","mimeType","extension","then","IMAGE_EXPORTS","display","marginTop","handleChange","src","alt","Loading","active","ExportModalSettings","onDimensionChange","isNaN","toFixed","numInputOnchange","parseFloat","numInputOnClick","inputChange","Form","defaultChecked","Select","SelectItem","exportOptionTileWrapper","exportOptionsWrapper","LocalFragmentActionType","ShareOptionsModal","selectedExportOption","shareOptionsState","setShareOptionsState","handleExportSelection","CODE","IMAGE","primaryButtonDisabled","shareModalSwitcher","LocalFragmentsContext","SelectedLeftPane","REMOVE","ci","c","ADD","LocalFragmentsContextProvider","lc","DuplicateFragmentModal","dispatchNotification","updateLocalFragments","fragmentsState","useLocation","duplicateFragment","currentlyProcessing","fragmentCopy","nameRegEx","RegExp","String","raw","nameMatch","match","count","nameBase","parseInt","names","highestNumber","n","sort","b","shift","getUniqueName","random","size","DeleteFragmentModal","undoHideFragment","doDeleteFragment","danger","SettingsFragmentModal","setTitle","labels","isTemplate","setIsTemplate","updateFragmentSettings","TooltipDefinition","tooltipText","direction","FragmentModal","editHeader","toolBarAction","fragmentEditToolBar","EditHeader","lastModified","fill","elementTileStyle","ElementTile","searchStyle","elementTileListStyle","ElementsPane","filterString","setFilterString","shouldShow","matches","leftPane","Search","placeHolderText","buttonImg","checkboxImg","textImg","textAreaImg","textInputImg","gridImg","StylePane","CodePane","ExportPane","SelectedComponentBreadcrumbs","Breadcrumb","noTrailingSlash","ancestors","unshift","getAncestors","BreadcrumbItem","isCurrentPage","nativeEvent","selectComponent","StyleContextPane","showComponentStyleOptions","CodeContextPane","showComponentCodeOptions","editPageContent","sideRail","rightPanel","actionsStyle","SortDirection","Edit","params","NONE","selectedLeftPane","setSelectedLeftPane","onRailClick","clickedLeftPane","ELEMENTS","STYLE","SideNav","isRail","SideNavItems","SideNavLink","renderIcon","Development16","ColorPalette16","Code16","Export16","Copy32","TrashCan32","dashboardSearchWrapper","searchInput","sortButton","sortOverflowItem","FragmentGroupDisplayed","DashboardSearch","onSearchHandler","onSortHandler","displayWizard","setDisplayWizard","sortDirection","OverflowMenu","ariaLabel","OverflowMenuItem","itemText","Ascending","Descending","CreateOptions","dashboardHeaderWrapper","fragmentTitle","contentSwitcher","DashboardHeader","onDisplayedSwitchHandler","fragmentGroupDisplayed","ContentSwitcher","selectedIndex","Switch","AllFragments","Templates","tileWrapper","tileStyle","tileInnerWrapperBase","tileInnerWrapper","fragmentOverflow","fragmentInfo","FragmentTile","setModalFragment","handleModalState","modalAction","resetPreview","Tile","loading","iconDescription","isDelete","SkeletonFragmentTile","SkeletonText","heading","svgStyle","placeholderContainer","fragmentRowWrapper","FragmentTileList","v","textAlign","generateNewFragment","Date","toISOString","createFragmentTiles","createFragmentTile","FragmentWizardModals","CreateFragmentModal","selectedCreateOption","setSelectedCreateOption","shouldDisplay","shouldSubmitOnEnter","selectorPrimaryFocus","setShouldDisplay","setLastVisitedModal","CREATE_FRAGMENT_MODAL","IMPORT_JSON","IMPORT_JSON_MODAL","FROM_SCRATCH","CHOOSE_FRAGMENT_MODAL","generatedFragment","generateFragment","CHOOSE_TEMPLATE","fragmentOptions","ChooseFragmentModal","uploadedData","lastVisitedModal","wasDataModified","setUploadedData","originalData","lastId","uid","ImportJsonModal","setFiles","jsonString","_setJsonString","fragmentJson","setFragmentJson","jsonParseError","setJsonParseError","setJsonString","js","e","handleDrop","handleDragover","uploadFile","fileToUpload","filesize","updatedFile","status","invalid","errorSubject","errorBody","file","uuid","invalidFileType","readAsText","onload","onerror","evt","onAddFiles","useCallback","addedFiles","newFiles","multiple","handleFileUploaderItemClick","clickedUuid","FormItem","FileUploaderDropContainer","accept","FileUploaderItem","onDelete","color","marginBottom","FragmentWizard","modalSwitcher","headerRowSyles","searchRowStyles","Dashboard","LocalOnly","setFragmentGroupDisplayed","fragmentTitleFilter","setFragmentTitleFilter","setSortDirection","displayedFragments","filterFragments","toLowerCase","fragmentSort","modalFragment","marginLeft","NotFound","goBack","errorHandler","ErrorBoundary","error","UIShell","HeaderContainer","app","Boolean","hostname","path","exact","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b2fd371d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/button.f75955a0.svg\";","module.exports = __webpack_public_path__ + \"static/media/checkbox.d3c186e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/grid.d052e9f8.svg\";","module.exports = __webpack_public_path__ + \"static/media/text-area.947a0503.svg\";","module.exports = __webpack_public_path__ + \"static/media/text-input.e389934c.svg\";","module.exports = __webpack_public_path__ + \"static/media/text.e9252250.svg\";","module.exports = __webpack_public_path__ + \"static/media/dashboard-empty-state.5e050054.svg\";","module.exports = __webpack_public_path__ + \"static/media/chart-404.9bc8debd.svg\";","import React from 'react';\nimport {\n\tHeaderMenuButton,\n\tHeaderName,\n\tHeader as ShellHeader\n} from 'carbon-components-react/lib/components/UIShell';\nimport { css } from 'emotion';\nimport { useHistory } from 'react-router-dom';\n\nexport const Header = ({ isSideNavExpanded, setIsSideNavExpanded }: any) => {\n\tconst history = useHistory();\n\n\tconst headerName = css`\n\t\t&:hover {\n\t\t\tcursor: pointer;\n\t\t}\n\t`;\n\n\treturn (\n\t\t<ShellHeader aria-label=\"IBM Carbon Components Builder\" role='banner' tabIndex={0}>\n\t\t\t<HeaderMenuButton\n\t\t\t\taria-label={`${isSideNavExpanded ? 'Close menu' : 'Open menu'}`}\n\t\t\t\tisActive={isSideNavExpanded}\n\t\t\t\tonClick={() => setIsSideNavExpanded(!isSideNavExpanded)} />\n\t\t\t<HeaderName\n\t\t\t\tprefix=\"IBM\"\n\t\t\t\ttabIndex={0}\n\t\t\t\ttitle='Carbon Components Builder home'\n\t\t\t\tclassName={headerName}\n\t\t\t\tonClick={() => history.push('/')}\n\t\t\t\tonKeyDown={(event: any) => event.key === 'Enter' && history.push('/')}>\n\t\t\t\tCarbon Components Builder {process.env.NODE_ENV === 'development' ? 'Dev' : ''}\n\t\t\t</HeaderName>\n\t\t</ShellHeader>\n\t);\n};\n","import React, {\n\tComponent,\n\tComponentPropsWithRef,\n\tforwardRef\n} from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router-dom';\nimport { HeaderMenuItem } from 'carbon-components-react/lib/components/UIShell';\n\ninterface HeaderMenuItemLinkInterface extends RouteComponentProps, ComponentPropsWithRef<any> { }\n\nclass HeaderMenuItemLinkBase extends Component<HeaderMenuItemLinkInterface> {\n\trender() {\n\t\tconst {\n\t\t\thistory,\n\t\t\tto,\n\t\t\tstaticContext,\n\t\t\t...rest\n\t\t} = this.props as any;\n\t\treturn (\n\t\t\t<HeaderMenuItem\n\t\t\t\tonClick={() => history.push(to)}\n\t\t\t\tonKeyDown={(event: any) => {if (event.key === 'Enter') history.push(to);}}\n\t\t\t\t{...rest} />\n\t\t);\n\t}\n}\n\nexport const HeaderMenuItemLinkRouter = withRouter(HeaderMenuItemLinkBase);\n\nexport const HeaderMenuItemLink = forwardRef<HTMLElement, HeaderMenuItemLinkInterface>(\n\t(props, ref) => <HeaderMenuItemLinkRouter {...props} />\n);\n\n// explicitly set display name\nHeaderMenuItemLink.displayName = 'HeaderMenuItemLink';\n","import React, {\n\tcreateContext,\n\tuseReducer,\n\tuseEffect,\n\tuseContext\n} from 'react';\nimport { useHistory } from 'react-router';\nimport assign from 'lodash/assign';\n\nconst FragmentsContext: React.Context<any> = createContext(null);\nFragmentsContext.displayName = 'FragmentsContext';\n\nexport enum FragmentActionType {\n\tADD_ONE,\n\tFETCH_ONE,\n\tTOGGLE_VISIBILITY,\n\tREMOVE_FRAGMENT,\n\tREMOVE_FRAGMENTS,\n\tUPDATE_ALL,\n\tUPDATE_ONE\n}\n\nexport type FragmentAction =\n\tFragmentActionAddOne |\n\tFragmentActionFetchOne |\n\tFragmentActionRemoveFragment |\n\tFragmentActionToggleVisibility |\n\tFragmentActionRemoveFragments |\n\tFragmentActionUpdateAll |\n\tFragmentActionUpdateOne;\n\nexport interface BaseFragmentAction {\n\ttype: FragmentActionType\n\tloaded: boolean;\n}\n\nexport interface FragmentActionAddOne extends BaseFragmentAction {\n\ttype: FragmentActionType.ADD_ONE;\n\tdata: any;\n}\n\nexport interface FragmentActionFetchOne extends BaseFragmentAction {\n\ttype: FragmentActionType.FETCH_ONE;\n\tdata: any;\n}\n\nexport interface FragmentActionRemoveFragment extends BaseFragmentAction {\n\ttype: FragmentActionType.REMOVE_FRAGMENT;\n\tid: string;\n\tshouldRemove: boolean;\n}\n\nexport interface FragmentActionToggleVisibility extends BaseFragmentAction {\n\ttype: FragmentActionType.TOGGLE_VISIBILITY;\n\tid: string;\n\thidden: boolean;\n}\n\nexport interface FragmentActionRemoveFragments extends BaseFragmentAction {\n\ttype: FragmentActionType.REMOVE_FRAGMENTS;\n\tids: string[];\n}\n\nexport interface FragmentActionUpdateAll extends BaseFragmentAction {\n\ttype: FragmentActionType.UPDATE_ALL;\n\tdata: any;\n}\n\nexport interface FragmentActionUpdateOne extends BaseFragmentAction {\n\ttype: FragmentActionType.UPDATE_ONE;\n\tdata: any;\n}\n\nexport interface FragmentState {\n\tcurrentId: string | null,\n\tfragments: any[],\n\tloaded: boolean\n}\n\nexport const useFetchOne = (id: number, dispatch: any) => {\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.FETCH_ONE,\n\t\t\tdata: id\n\t\t});\n\t}, [dispatch, id]);\n};\n\nexport const useFragment = (id?: string) => {\n\tconst context = useContext(FragmentsContext);\n\tconst history = useHistory();\n\n\tif (!context) {\n\t\t// this happens when rendering, which is fine because it's used\n\t\t// in AComponent to update the state of the whole fragment due to\n\t\t// user interaction - functionality not needed for render only\n\t\tconsole.info(\"Rendering only, won't be able to update context\");\n\t\treturn [{}, (_: any) => {}];\n\t}\n\n\tconst [state, dispatch] = context;\n\n\tif (!id) {\n\t\tconst location = history.location.pathname;\n\t\tconst pathSegments = location.split('/');\n\t\tid = `${state.currentId || pathSegments[pathSegments.length - 1]}`\n\t}\n\n\tconst fragment = state.fragments.find((fragment: any) => fragment.id === id);\n\tconst setFragment = (fragment: any) => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.UPDATE_ONE,\n\t\t\tdata: fragment,\n\t\t\tloaded: true\n\t\t});\n\t};\n\treturn [fragment, setFragment];\n};\n\n\nconst updateOne = (\n\tstate: FragmentState,\n\taction: FragmentActionUpdateOne\n) => {\n\tif (!state.fragments.length) {\n\t\treturn {\n\t\t\tfragments: [action.data],\n\t\t\tloaded: action.loaded,\n\t\t\tcurrentId: action.data.id\n\t\t};\n\t}\n\tconst updatedFragmentState = state.fragments.map((fragment: any) => {\n\t\tif (fragment.id === action.data.id) {\n\t\t\t// Cannot use merge because removing datasets or labels will not\n\t\t\t// work since it keeps the values, while assign overwrites past values.\n\t\t\treturn assign({}, fragment, action.data);\n\t\t}\n\t\treturn fragment;\n\t});\n\n\treturn {\n\t\t...state,\n\t\tfragments: updatedFragmentState,\n\t\tloaded: action.loaded,\n\t\tcurrentId: action.data.id\n\t};\n};\n\nconst fragmentsReducer = (state: FragmentState, action: FragmentAction) => {\n\tswitch (action.type) {\n\t\tcase FragmentActionType.FETCH_ONE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentId: action.data,\n\t\t\t\tloaded: true\n\t\t\t};\n\t\tcase FragmentActionType.UPDATE_ALL: {\n\t\t\tif (!state.fragments || !state.fragments.length) {\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tfragments: action.data,\n\t\t\t\t\tloaded: action.loaded,\n\t\t\t\t\tcurrentId: null\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// Remove fragments which are in the original state but not in the payload.\n\t\t\tconst filteredFragments = state.fragments\n\t\t\t\t.filter((fragment: any) => action.data.some((actionFragment: any) => actionFragment.id === fragment.id));\n\t\t\t// If fragments already exist in the state, we need to merge any changes to the fragments with\n\t\t\t// the current matching fragments and add any new fragments (if any) to the state.\n\t\t\tconst mergedFragments = filteredFragments.map((fragment: any) => {\n\t\t\t// Find the fragment in the payload containing the same id as the current state's fragments\n\t\t\t// to merge updated changes with.\n\t\t\t\tconst updatedFragment = action.data.find((actionFragment: any) => fragment.id === actionFragment.id);\n\t\t\t\t// Can not use merge because removing datasets or labels will not\n\t\t\t\t// work since it keeps the values, while assign overwrites past values.\n\t\t\t\treturn assign({}, fragment, updatedFragment);\n\t\t\t});\n\t\t\t// Adds any fragments in the payload which do not match any id in the current state's fragments.\n\t\t\tconst updatedFragments = mergedFragments\n\t\t\t\t.concat(action.data.filter((actionFragment: any) => (\n\t\t\t\t\tstate.fragments.every((fragment: any) => fragment.id !== actionFragment.id)\n\t\t\t\t)));\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfragments: updatedFragments,\n\t\t\t\tloaded: action.loaded,\n\t\t\t\tcurrentId: null\n\t\t\t};\n\t\t}\n\t\tcase FragmentActionType.UPDATE_ONE:\n\t\t\treturn updateOne(state, action);\n\t\tcase FragmentActionType.REMOVE_FRAGMENT: {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfragments: state.fragments.filter((fragment: any) => fragment.id !== action.id),\n\t\t\t\tloaded: action.loaded,\n\t\t\t\tcurrentId: action.id\n\t\t\t};\n\t\t}\n\t\tcase FragmentActionType.TOGGLE_VISIBILITY: {\n\t\t\tconst fragmentToHide = state.fragments.find((fragment: any) => fragment.id === action.id);\n\t\t\tfragmentToHide.hidden = action.hidden;\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloaded: action.loaded,\n\t\t\t\tcurrentId: action.id\n\t\t\t};\n\t\t}\n\t\tcase FragmentActionType.REMOVE_FRAGMENTS: {\n\t\t\tconst remainingFragments = state.fragments.filter((fragment: any) => (\n\t\t\t\t!action.ids.some((actionFragment: any) => actionFragment.id === fragment.id)\n\t\t\t));\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfragments: remainingFragments,\n\t\t\t\tloaded: action.loaded,\n\t\t\t\tcurrentId: null\n\t\t\t};\n\t\t}\n\t\tcase FragmentActionType.ADD_ONE: {\n\t\t\tconst duplicate = assign({}, action.data);\n\t\t\tconst expandedFragments = state.fragments.concat(duplicate);\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfragments: expandedFragments,\n\t\t\t\tloaded: action.loaded,\n\t\t\t\tcurrentId: action.data.id\n\t\t\t};\n\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst validInitialFragments = (localFragments: any[] | undefined) => {\n\tif (!localFragments || !Array.isArray(localFragments)) {\n\t\treturn [];\n\t}\n\n\treturn localFragments.filter((fragment: any) => !!fragment.id && typeof fragment.id === 'string');\n};\n\nconst FragmentsContextProvider = ({ children }: any) => {\n\tconst initialState: any = {\n\t\tfragments: validInitialFragments(JSON.parse(localStorage.getItem('localFragments') as string)),\n\t\tloaded: false,\n\t\tcurrentId: null\n\t};\n\tconst store = useReducer(fragmentsReducer, initialState);\n\tconst [state, dispatch] = store;\n\n\tuseEffect(() => {\n\t\tconst localFragments = JSON.parse(localStorage.getItem('localFragments') as string || '[]');\n\t\t// clean up the hidden fragments (those marked for deletion but failed to be deleted)\n\t\tconst filteredFragments = localFragments.filter((fragment: any) => !fragment.hidden);\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.UPDATE_ALL,\n\t\t\tdata: filteredFragments,\n\t\t\tloaded: true\n\t\t});\n\t\tlocalStorage.setItem('localFragments', JSON.stringify(filteredFragments));\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// store only ids to local storage so we don't get into temptation of using other\n\t\t// props that should really be coming from db\n\t\tlocalStorage.setItem('localFragments', JSON.stringify(state.fragments));\n\t}, [state.fragments]);\n\n\treturn (\n\t\t<FragmentsContext.Provider value={store}>\n\t\t\t{children}\n\t\t</FragmentsContext.Provider>\n\t);\n};\n\nexport {\n\tFragmentsContext,\n\tFragmentsContextProvider\n};\n","import { css, cx } from 'emotion';\n\nexport const main = cx(\n\t'bx--content',\n\t'bx--grid',\n\tcss`\n\t\tpadding-top: 0;\n\t\tbackground: #f4f4f4;\n\t\tmin-height: 100vh;\n\t\tmax-width: unset;\n`);\n\nexport const marginTop = (margin = '1rem') => css`margin-top: ${margin};`;\n","import React from 'react';\nimport { Button } from 'carbon-components-react';\nimport { withRouter } from 'react-router-dom';\n\nexport const LinkButton = withRouter((props: any) => {\n\tconst {\n\t\thistory,\n\t\tto,\n\t\tstaticContext,\n\t\t...rest\n\t} = props;\n\treturn <Button onClick={() => history.push(to)} {...rest} />;\n});\n","import React from 'react';\nimport { main } from '../styles';\n\nexport const Main = ({ ...props }) => (\n\t<main className={main} {...props}/>\n);\n","export const drag = (event: any, dragObj: any) => {\n\tevent.stopPropagation();\n    event.dataTransfer.setData(\"drag-object\", JSON.stringify(dragObj));\n}\n","import React, { createContext, useReducer } from 'react';\n\nconst NotificationContext: React.Context<any> = createContext({});\n\nNotificationContext.displayName = 'NotificationContext';\n\nexport type NotificationData = {\n\tkind: string;\n\ttitle: string;\n\tmessage: string;\n\tid: number,\n\taction?: any;\n}\nexport interface BaseNotificationAction {\n\ttype: NotificationActionType,\n\tdata: NotificationData;\n\taction?: Action\n}\n\nexport type NotificationAction =\n\tNotificationActionAdd |\n\tNotificationActionRemove;\n\n\nexport enum NotificationActionType {\n\tADD_NOTIFICATION,\n\tREMOVE_NOTIFICATION\n}\n\nexport interface NotificationActionAdd extends BaseNotificationAction {\n\ttype: NotificationActionType.ADD_NOTIFICATION;\n}\n\nexport interface NotificationActionRemove extends BaseNotificationAction {\n\ttype: NotificationActionType.REMOVE_NOTIFICATION;\n}\n\ninterface Action {\n\tactionText: string,\n\tactionFunction: any,\n\tonNotificationClose: any\n}\n\n\nexport interface NotificationState {\n\tnotifications: NotificationData[]\n}\n\nconst initialState = { notifications: [] };\nlet notificationCounter = 0;\n\nconst NotificationReducer = (state: NotificationState, action: NotificationAction) => {\n\tswitch (action.type) {\n\t\tcase NotificationActionType.REMOVE_NOTIFICATION:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnotifications: state.notifications.filter(\n\t\t\t\t\t(notification: NotificationData) => notification.id !== action.data.id\n\t\t\t\t)\n\t\t\t};\n\t\tcase NotificationActionType.ADD_NOTIFICATION:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnotifications: [\n\t\t\t\t\t...state.notifications,\n\t\t\t\t\t{\n\t\t\t\t\t\t...action.data,\n\t\t\t\t\t\tid: notificationCounter++\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t};\n\t\tdefault: return state;\n\t}\n};\n\nconst NotificationContextProvider = ({ children }: any) => {\n\tconst notification = useReducer(NotificationReducer, initialState);\n\treturn (\n\t\t<NotificationContext.Provider value={notification}>\n\t\t\t{children}\n\t\t</NotificationContext.Provider>\n\t);\n};\n\nexport {\n\tNotificationContext,\n\tNotificationContextProvider\n};\n","import React, { createContext, useReducer } from 'react';\n\nconst ModalContext: React.Context<any> = createContext({});\n\nModalContext.displayName = 'ModalContext';\n\nexport enum ModalActionType {\n\tsetDuplicationModal,\n\tsetDeletionModal,\n\tsetShareModal,\n\tsetSettingsModal,\n\tsetExportModal,\n\tcloseModal\n}\n\nexport enum ModalType {\n\tDUPLICATION,\n\tDELETION,\n\tSHARING,\n\tSETTINGS,\n\tEXPORT\n}\n\nexport type ModalAction = BaseModalAction\n\nexport interface BaseModalAction {\n\ttype: ModalActionType,\n\tid: string\n}\n\nexport interface ModalState {\n\tShowModal: boolean,\n\tModalType: any,\n\tFragmentID: string\n}\n\nconst initialState = {\n\tShowModal: false,\n\tModalType: null,\n\tFragmentID: ''\n};\n\nconst modalReducer = (state: ModalState, action: BaseModalAction) => {\n\tswitch(action.type) {\n\t\tcase ModalActionType.setDuplicationModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: true,\n\t\t\t\tModalType: ModalType.DUPLICATION,\n\t\t\t\tFragmentID: action.id\n\t\t\t};\n\t\tcase ModalActionType.setDeletionModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: true,\n\t\t\t\tModalType: ModalType.DELETION,\n\t\t\t\tFragmentID: action.id\n\t\t\t};\n\t\tcase ModalActionType.setShareModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: true,\n\t\t\t\tModalType: ModalType.SHARING,\n\t\t\t\tFragmentID: action.id\n\t\t\t};\n\t\tcase ModalActionType.setSettingsModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: true,\n\t\t\t\tModalType: ModalType.SETTINGS,\n\t\t\t\tFragmentID: action.id\n\t\t\t};\n\t\tcase ModalActionType.setExportModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: true,\n\t\t\t\tModalType: ModalType.EXPORT,\n\t\t\t\tFragmentID: action.id\n\t\t\t};\n\t\tcase ModalActionType.closeModal:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tShowModal: false\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nconst ModalContextProvider = ({ children }: any) => {\n\tconst modal = useReducer(modalReducer, initialState);\n\n\treturn (\n\t\t<ModalContext.Provider value={modal}>\n\t\t\t{children}\n\t\t</ModalContext.Provider>\n\t);\n};\n\nexport {\n\tModalContext,\n\tModalContextProvider\n};\n","import { css, cx } from 'emotion';\nimport React, { useRef, useState } from 'react';\n\nimport { Draggable32, TrashCan32 } from '@carbon/icons-react';\nimport { drag } from '../routes/edit/tools';\nimport { useFragment } from '../context';\nimport { getParentComponent, updatedState } from '../components';\n\nconst headerStyle = css`\n\tposition: absolute;\n\tmargin-top: -26px;\n\tpadding-left: 6px;\n\tbackground: white;\n\tborder: 2px solid #d8d8d8;\n\tline-height: 21px;\n`;\n\nconst iconStyle = css`height: 1rem; width: 1rem; float: right`;\n\nexport const AComponentCodeUI = ({selectedComponent, setComponent}: any) => {\n\treturn <span className={css`overflow-wrap: anywhere`}>\n\t\t{JSON.stringify(selectedComponent)}\n\t</span>\n};\n\nconst dropBorderStyle = '2px solid #0f62fe';\n\nconst dropStyle = css`\n\tposition: absolute;\n\twidth: 15px;\n\theight: 15px;\n\tline-height: 21px;\n\tz-index: 2;\n`;\n\nconst dropStyleBefore = cx(dropStyle, css`\n\tmargin-left: -4px;\n\tmargin-top: -4px;\n\tborder-left: ${dropBorderStyle};\n\tborder-top: ${dropBorderStyle};\n`);\n\nconst dropStyleAfter = cx(dropStyle, css`\n\tmargin-left: calc(100% - 11px);\n\tborder-right: ${dropBorderStyle};\n\tborder-bottom: ${dropBorderStyle};\n\tbottom: -4px;\n`);\n\nexport const AComponent = ({\n\tchildren,\n\tcomponentObj,\n\tselect,\n\tselected,\n\tremove,\n\theadingCss,\n\tclassName\n}: any) => {\n\t// TODO use fragments context instead of passing in `remove`?\n\tconst [fragment, setFragment] = useFragment();\n\tconst [showDragOverIndicator, setShowDragOverIndicator] = useState(false);\n\tconst [dragOverPosition, setDragOverPosition] = useState([] as any[]);\n\tconst holderRef = useRef(null as any);\n\n\tconst isDragOverLeft = () => dragOverPosition[0] < holderRef.current.offsetWidth  / 2;\n\t// const isDragOverRight = () => !isDragOverLeft();\n\tconst isDragOverTop = () => dragOverPosition[1] < holderRef.current.offsetHeight  / 2;\n\t// const isDragOverBottom = () => !isDragOverTop();\n\tconst isDragOverBefore = () => isDragOverLeft() || isDragOverTop();\n\tconst isDragOverAfter = () => !isDragOverBefore();\n\n\tconst onDrop = (event: any) => {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tsetShowDragOverIndicator(false)\n\n\t\tconst dragObj = JSON.parse(event.dataTransfer.getData(\"drag-object\"));\n\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tdata: updatedState(\n\t\t\t\tfragment.data,\n\t\t\t\tdragObj,\n\t\t\t\tcomponentObj.id,\n\t\t\t\tgetParentComponent(fragment.data, componentObj).items.indexOf(componentObj) + (isDragOverBefore() ? 0 : 1)\n\t\t\t)\n\t\t});\n\t};\n\n\treturn (\n\t\t<span\n\t\tclassName={className}\n\t\tref={holderRef}\n\t\tonClick={(event) => {\n\t\t\tevent.stopPropagation();\n\t\t\tselect();\n\t\t}}\n\t\tdraggable='true' // TODO make Draggable32 the drag handle and this element as preview\n\t\tonDragStart={(event: any) => drag(event, {\n\t\t\tcomponent: componentObj,\n\t\t\ttype: 'move'\n\t\t})}\n\t\tonDragEnter={(event: any) => {\n\t\t\tevent.stopPropagation();\n\t\t\tsetShowDragOverIndicator(true);\n\t\t}}\n\t\tonDragLeave={(event: any) => {\n\t\t\tevent.stopPropagation();\n\t\t\tsetShowDragOverIndicator(false);\n\t\t}}\n\t\tonDragOver={(event) => {\n\t\t\tconst rect = event.currentTarget.getBoundingClientRect();\n\t\t\tsetDragOverPosition([event.pageX - rect.left, event.pageY - rect.top]);\n\t\t}}\n\t\tonDrop={onDrop}>\n\t\t\t<span className={cx(\n\t\t\t\tdropStyleBefore,\n\t\t\t\tshowDragOverIndicator && isDragOverBefore() ? css`` : css`display: none`\n\t\t\t)} />\n\t\t\t<span className={cx(\n\t\t\t\tdropStyleAfter,\n\t\t\t\tshowDragOverIndicator && isDragOverAfter() ? css`` : css`display: none`\n\t\t\t)} />\n\t\t\t<span className={cx(headerStyle, headingCss, selected ? css`` : css`display: none`)}>\n\t\t\t\t<span className={css`margin-right: 1rem`}>\n\t\t\t\t\t{componentObj && componentObj.type ? componentObj.type : 'Header'}\n\t\t\t\t</span>\n\t\t\t\t<Draggable32 className={iconStyle}/>\n\t\t\t\t<TrashCan32 onClick={(event: any) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tif (remove) {\n\t\t\t\t\t\tremove();\n\t\t\t\t\t}\n\t\t\t\t}} className={iconStyle}/>\n\t\t\t</span>\n\t\t\t{children}\n\t\t</span>\n\t);\n};\n","import React from 'react';\nimport {\n\tButton,\n\tDropdown,\n\tTextInput\n} from 'carbon-components-react';\nimport { AComponent } from './a-component';\nimport { css } from 'emotion';\n\nexport const AButtonStyleUI = ({selectedComponent, setComponent}: any) => {\n\tconst kindItems = [\n\t\t{id: 'primary', text: 'Primary'},\n\t\t{id: 'secondary', text: 'Secondary'},\n\t\t{id: 'tertiary', text: 'Tertiary'},\n\t\t{id: 'danger', text: 'Danger'},\n\t\t{id: 'danger--tertiary', text: 'Danger tertiary'},\n\t\t{id: 'danger--ghost', text: 'Danger ghost'},\n\t\t{id: 'ghost', text: 'Ghost'}\n\t];\n\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.text}\n\t\t\tlabelText='Text'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\ttext: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<Dropdown\n\t\t\tlabel='Kind'\n\t\t\ttitleText='Kind'\n\t\t\titems={kindItems}\n\t\t\tinitialSelectedItem={kindItems.find(item => item.id === selectedComponent.kind)}\n\t\t\titemToString={(item: any) => (item ? item.text : '')}\n\t\t\tonChange={(event: any) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tkind: event.selectedItem.id\n\t\t})}/>\n\t</>\n};\n\nexport const AButton = ({\n\tchildren,\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent\n\t\tcomponentObj={componentObj}\n\t\tclassName={css`position: relative; display: inline-flex`}\n\t\t{...rest}>\n\t\t\t<Button kind={componentObj.kind} disabled={componentObj.disabled}>{children}</Button>\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport { Checkbox, TextInput } from 'carbon-components-react';\nimport { AComponent } from './a-component';\nimport { css } from 'emotion';\n\nexport const ACheckboxStyleUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.label}\n\t\t\tlabelText='Label'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tlabel: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const ACheckboxCodeUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.codeContext?.name}\n\t\t\tlabelText='Input name'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tcodeContext: {\n\t\t\t\t\t\tname: event.currentTarget.value\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const ACheckbox = ({\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent\n\t\tcomponentObj={componentObj}\n\t\theadingCss={css`display: block;`}\n\t\t{...rest}>\n\t\t\t<Checkbox kind={componentObj.kind} disabled={componentObj.disabled} labelText={componentObj.label}/>\n\t\t</AComponent>\n\t);\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n\tAccordion,\n\tAccordionItem,\n\tColumn,\n\tNumberInput\n} from 'carbon-components-react';\nimport { Add32, Help32 } from '@carbon/icons-react';\nimport { css, cx } from 'emotion';\nimport { AComponent } from './a-component';\nimport { useFragment } from '../context';\nimport { getParentComponent, updatedState } from '../components';\n\nconst helpIconStyle = css`\n\tcolor: #525252;\n\tposition: absolute;\n\tright: 1rem;\n\tz-index: 1;\n\tbackground: white;\n\n\tsvg {\n\t\twidth: 1rem;\n\t\theight: 1rem;\n\t}\n`;\n\nexport const AColumnStyleUI = ({selectedComponent, setComponent}: any) => {\n\tconst onNumInputchange = (event: any) => {\n\t\tsetComponent({\n\t\t\t...selectedComponent,\n\t\t\t[event.imaginaryTarget.name]: Number(event.imaginaryTarget.value)\n\t\t});\n\t};\n\n\tconst [isAccordionOpen, setIsAccordionOpen] = useState({} as any);\n\n\tuseEffect(() => {\n\t\tsetIsAccordionOpen({\n\t\t\tsmall: selectedComponent.smallSpan || selectedComponent.smallOffset,\n\t\t\tmedium: selectedComponent.mediumSpan || selectedComponent.mediumOffset,\n\t\t\tlarge: selectedComponent.largeSpan || selectedComponent.largeOffset,\n\t\t\txLarge: selectedComponent.xLargeSpan || selectedComponent.xLargeOffset,\n\t\t\tmax: selectedComponent.maxSpan || selectedComponent.maxOffset,\n\t\t});\n\t}, [selectedComponent]);\n\n\treturn <>\n\t\t<a\n\t\thref='https://www.carbondesignsystem.com/guidelines/2x-grid/implementation/'\n\t\ttarget='_blank'\n\t\trel='noopener noreferrer'\n\t\tclassName={helpIconStyle}>\n\t\t\t<Help32 />\n\t\t</a>\n\t\t<Accordion align='start'>\n\t\t\t<AccordionItem title='Small' open={isAccordionOpen.small}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={4}\n\t\t\t\t\tlabel='Span'\n\t\t\t\t\tname='smallSpan'\n\t\t\t\t\tvalue={selectedComponent.smallSpan}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={3}\n\t\t\t\t\tlabel='Offset'\n\t\t\t\t\tname='smallOffset'\n\t\t\t\t\tvalue={selectedComponent.smallOffset}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t</AccordionItem>\n\n\t\t\t<AccordionItem title='Medium' open={isAccordionOpen.medium}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={8}\n\t\t\t\t\tlabel='Span'\n\t\t\t\t\tname='mediumSpan'\n\t\t\t\t\tvalue={selectedComponent.mediumSpan}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={7}\n\t\t\t\t\tlabel='Offset'\n\t\t\t\t\tname='mediumOffset'\n\t\t\t\t\tvalue={selectedComponent.mediumOffset}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t</AccordionItem>\n\n\t\t\t<AccordionItem title='Large' open={isAccordionOpen.large}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={16}\n\t\t\t\t\tlabel='Span'\n\t\t\t\t\tname='largeSpan'\n\t\t\t\t\tvalue={selectedComponent.largeSpan}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={15}\n\t\t\t\t\tlabel='Offset'\n\t\t\t\t\tname='largeOffset'\n\t\t\t\t\tvalue={selectedComponent.largeOffset}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t</AccordionItem>\n\n\t\t\t<AccordionItem title='Extra large' open={isAccordionOpen.xLarge}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={16}\n\t\t\t\t\tlabel='Span'\n\t\t\t\t\tname='xLargeSpan'\n\t\t\t\t\tvalue={selectedComponent.xLargeSpan}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={15}\n\t\t\t\t\tlabel='Offset'\n\t\t\t\t\tname='xLargeOffset'\n\t\t\t\t\tvalue={selectedComponent.xLargeOffset}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t</AccordionItem>\n\n\t\t\t<AccordionItem title='Max' open={isAccordionOpen.max}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={16}\n\t\t\t\t\tlabel='Span'\n\t\t\t\t\tname='maxSpan'\n\t\t\t\t\tvalue={selectedComponent.maxSpan}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tmin={0}\n\t\t\t\t\tmax={15}\n\t\t\t\t\tlabel='Offset'\n\t\t\t\t\tname='maxOffset'\n\t\t\t\t\tvalue={selectedComponent.maxOffset}\n\t\t\t\t\tonChange={onNumInputchange} />\n\t\t\t</AccordionItem>\n\t\t</Accordion>\n\t</>\n};\n\nconst addStyle = css`\n\tposition: absolute;\n\tmargin-top: -2px;\n\tbackground: white;\n\tborder: 2px solid #d8d8d8;\n\tline-height: 21px;\n\tz-index: 1;\n`;\n\nconst addStyleLeft = cx(addStyle, css`\n\tmargin-left: -30px;\n`);\n\nconst addStyleRight = cx(addStyle, css`\n\tmargin-left: calc(100% - 30px);\n`);\n\nconst iconStyle = css`\n\theight: 1rem;\n\twidth: 1rem;\n\tfloat: right;\n\tcursor: pointer`;\n\nexport const AColumn = ({\n\tchildren,\n\tcomponentObj,\n\tonDrop,\n\tselected,\n\t...rest\n}: any) => {\n\tconst [fragment, setFragment] = useFragment();\n\n\tconst parentComponent = getParentComponent(fragment.data, componentObj);\n\n\t/**\n\t * @param offset 0 - add left, 1 - add right\n\t */\n\tconst addCell = (offset = 0) => setFragment({\n\t\t...fragment,\n\t\tdata: updatedState(\n\t\t\tfragment.data,\n\t\t\t{\n\t\t\t\ttype: 'insert',\n\t\t\t\tcomponent: {\n\t\t\t\t\ttype: 'column',\n\t\t\t\t\titems: [{ type: 'text', text: 'New cell' }]\n\t\t\t\t}\n\t\t\t},\n\t\t\tparentComponent.id,\n\t\t\tparentComponent.items.indexOf(componentObj) + offset\n\t\t)\n\t});\n\n\treturn (\n\t\t// position: relative doesn't seem to affect the grid layout and it's needed atm\n\t\t// to position right add icon\n\t\t<Column\n\t\tonDrop={onDrop}\n\t\tclassName={css`position: relative`}\n\t\tsm={{\n\t\t\tspan: componentObj.smallSpan || undefined,\n\t\t\toffset: componentObj.smallOffset || undefined\n\t\t}}\n\t\tmd={{\n\t\t\tspan: componentObj.mediumSpan || undefined,\n\t\t\toffset: componentObj.mediumOffset || undefined\n\t\t}}\n\t\tlg={{\n\t\t\tspan: componentObj.largeSpan || undefined,\n\t\t\toffset: componentObj.largeOffset || undefined\n\t\t}}\n\t\txlg={{\n\t\t\tspan: componentObj.xLargeSpan || undefined,\n\t\t\toffset: componentObj.xLargeOffset || undefined\n\t\t}}\n\t\tmax={{\n\t\t\tspan: componentObj.maxSpan || undefined,\n\t\t\toffset: componentObj.maxOffset || undefined\n\t\t}}>\n\t\t\t<span className={cx(addStyleLeft, selected ? css`` : css`display: none`)}>\n\t\t\t\t<Add32 onClick={(event: any) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\taddCell();\n\t\t\t\t}} className={iconStyle}/>\n\t\t\t</span>\n\t\t\t<span className={cx(addStyleRight, selected ? css`` : css`display: none`)}>\n\t\t\t\t<Add32 onClick={(event: any) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\taddCell(1);\n\t\t\t\t}} className={iconStyle}/>\n\t\t\t</span>\n\t\t\t<AComponent\n\t\t\tcomponentObj={componentObj}\n\t\t\tclassName={css`display: block;`}\n\t\t\tselected={selected}\n\t\t\t{...rest}>\n\t\t\t\t{children}\n\t\t\t</AComponent>\n\t\t</Column>\n\t);\n};\n","import React from 'react';\nimport { Checkbox, Grid } from 'carbon-components-react';\nimport { AComponent } from './a-component';\nimport { css } from 'emotion';\n\nexport const AGridStyleUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<Checkbox\n\t\t\tlabelText='Show outline'\n\t\t\tid='grid-showOutline'\n\t\t\tchecked={selectedComponent.showOutline}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tshowOutline: checked\n\t\t\t})} />\n\t\t<Checkbox\n\t\t\tlabelText='Condensed'\n\t\t\tid='grid-condensed'\n\t\t\tchecked={selectedComponent.condensed}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tcondensed: checked\n\t\t\t})} />\n\t\t<Checkbox\n\t\t\tlabelText='Full width'\n\t\t\tid='grid-fullWidth'\n\t\t\tchecked={selectedComponent.fullWidth}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tfullWidth: checked\n\t\t\t})} />\n\t\t<Checkbox\n\t\t\tlabelText='Narrow'\n\t\t\tid='grid-narrow'\n\t\t\tchecked={selectedComponent.narrow}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tnarrow: checked\n\t\t\t})} />\n\t</>\n};\n\nconst showOutlineStyle = css`\n\t.bx--col {\n\t\toutline: 1px dashed #78a9ff;\n\t}\n`;\n\nexport const AGrid = ({\n\tchildren,\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent componentObj={componentObj} {...rest}>\n\t\t\t<Grid\n\t\t\tclassName={componentObj.showOutline ? showOutlineStyle : ''}\n\t\t\tcondensed={componentObj.condensed}\n\t\t\tfullWidth={componentObj.fullWidth}\n\t\t\tnarrow={componentObj.narrow}>\n\t\t\t\t{children}\n\t\t\t</Grid>\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport {\n\tRow,\n\tCheckbox\n} from 'carbon-components-react';\nimport { Add32 } from '@carbon/icons-react';\nimport { AComponent } from './a-component';\nimport { getParentComponent, updatedState } from '../components';\nimport { css, cx } from 'emotion';\nimport { useFragment } from '../context';\n\nexport const ARowStyleUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<Checkbox\n\t\t\tlabelText='Condensed'\n\t\t\tid='grid-condensed'\n\t\t\tchecked={selectedComponent.condensed}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tcondensed: checked\n\t\t\t})} />\n\t\t<Checkbox\n\t\t\tlabelText='Narrow'\n\t\t\tid='grid-narrow'\n\t\t\tchecked={selectedComponent.narrow}\n\t\t\tonChange={(checked: boolean) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tnarrow: checked\n\t\t\t})} />\n\t</>\n};\n\nconst addStyle = css`\n\tposition: absolute;\n\tmargin-left: calc(50% - 10px);\n\tbackground: white;\n\tborder: 2px solid #d8d8d8;\n\tline-height: 21px;\n`;\n\nconst addStyleTop = cx(addStyle, css`\n\ttop: -20px;\n`);\n\nconst addStyleBottom = cx(addStyle, css`\n\tbottom: -20px;\n\tz-index: 1;\n`);\n\nconst iconStyle = css`\n\theight: 1rem;\n\twidth: 1rem;\n\tfloat: right;\n\tcursor: pointer`;\n\nexport const ARow = ({\n\tchildren,\n\tcomponentObj,\n\tselected,\n\t...rest\n}: any) => {\n\tconst [fragment, setFragment] = useFragment();\n\n\tconst parentComponent = getParentComponent(fragment.data, componentObj);\n\n\t/**\n\t * @param offset 0 - add left, 1 - add right\n\t */\n\tconst addRow = (offset = 0) => setFragment({\n\t\t...fragment,\n\t\tdata: updatedState(\n\t\t\tfragment.data,\n\t\t\t{\n\t\t\t\ttype: 'insert',\n\t\t\t\tcomponent: {\n\t\t\t\t\ttype: 'row', items: [\n\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'Cell 1' }]},\n\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'Cell 2' }]}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t},\n\t\t\tparentComponent.id,\n\t\t\tparentComponent.items.indexOf(componentObj) + offset\n\t\t)\n\t});\n\n\treturn (\n\t\t// position: relative doesn't seem to affect the grid layout and it's needed atm\n\t\t// to position right add icon\n\t\t<AComponent componentObj={componentObj} selected={selected} {...rest}>\n\t\t\t<Row\n\t\t\tclassName={css`position: relative`}\n\t\t\tcondensed={componentObj.condensed}\n\t\t\tnarrow={componentObj.narrow}>\n\t\t\t\t<span className={cx(addStyleTop, selected ? css`` : css`display: none`)}>\n\t\t\t\t\t<Add32 onClick={(event: any) => {\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\taddRow();\n\t\t\t\t\t}} className={iconStyle}/>\n\t\t\t\t</span>\n\t\t\t\t<span className={cx(addStyleBottom, selected ? css`` : css`display: none`)}>\n\t\t\t\t\t<Add32 onClick={(event: any) => {\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\taddRow(1);\n\t\t\t\t\t}} className={iconStyle}/>\n\t\t\t\t</span>\n\t\t\t\t{children}\n\t\t\t</Row>\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport { TextInput } from 'carbon-components-react';\nimport { AComponent } from './a-component';\n\nexport const ATextStyleUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.text}\n\t\t\tlabelText='Text'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\ttext: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const AText = ({\n\tchildren,\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent componentObj={componentObj} {...rest}>\n\t\t\t{children}\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport { TextArea, TextInput } from 'carbon-components-react';\nimport { AComponent } from './a-component';\n\nexport const ATextAreaStyleUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.label}\n\t\t\tlabelText='Label'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tlabel: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.helperText}\n\t\t\tlabelText='Helper text'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\thelperText: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.placeholder}\n\t\t\tlabelText='Placeholder'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tplaceholder: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\n\nexport const ATextAreaCodeUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.codeContext?.name}\n\t\t\tlabelText='Input name'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tcodeContext: {\n\t\t\t\t\t\tname: event.currentTarget.value\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const ATextArea = ({\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent componentObj={componentObj} {...rest}>\n\t\t\t<TextArea\n\t\t\t\tkind={componentObj.kind}\n\t\t\t\tdisabled={componentObj.disabled}\n\t\t\t\tlabelText={componentObj.label}\n\t\t\t\tplaceholder={componentObj.placeholder}\n\t\t\t\thelperText={componentObj.helperText}/>\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport { TextInput, Dropdown } from 'carbon-components-react';\nimport { AComponent } from './a-component';\nimport { css } from 'emotion';\n\nexport const ATextInputStyleUI = ({selectedComponent, setComponent}: any) => {\n\tconst typeItems = [\n\t\t{id: 'text', text: 'Text'},\n\t\t{id: 'email', text: 'Email'},\n\t\t{id: 'password', text: 'Password'}\n\t];\n\n\treturn <>\n\t\t<Dropdown\n\t\t\tlabel='Type'\n\t\t\ttitleText='Type'\n\t\t\titems={typeItems}\n\t\t\tinitialSelectedItem={typeItems.find(item => item.id === selectedComponent.inputType)}\n\t\t\titemToString={(item: any) => (item ? item.text : '')}\n\t\t\tonChange={(event: any) => setComponent({\n\t\t\t\t...selectedComponent,\n\t\t\t\tinputType: event.selectedItem.id\n\t\t})}/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.label}\n\t\t\tlabelText='Label'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tlabel: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.helperText}\n\t\t\tlabelText='Helper text'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\thelperText: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.placeholder}\n\t\t\tlabelText='Placeholder'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tplaceholder: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.defaultValue}\n\t\t\tlabelText='Default value'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tdefaultValue: event.currentTarget.value\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const ATextInputCodeUI = ({selectedComponent, setComponent}: any) => {\n\treturn <>\n\t\t<TextInput\n\t\t\tvalue={selectedComponent.codeContext?.name}\n\t\t\tlabelText='Input name'\n\t\t\tonChange={(event: any) => {\n\t\t\t\tconsole.log(\"event\", event.currentTarget, \"selectedComponent\", selectedComponent)\n\t\t\t\tsetComponent({\n\t\t\t\t\t...selectedComponent,\n\t\t\t\t\tcodeContext: {\n\t\t\t\t\t\t...selectedComponent.codeContext,\n\t\t\t\t\t\tname: event.currentTarget.value\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}}\n\t\t/>\n\t</>\n};\n\nexport const ATextInput = ({\n\tcomponentObj,\n\t...rest\n}: any) => {\n\treturn (\n\t\t<AComponent\n\t\tcomponentObj={componentObj}\n\t\theadingCss={css`display: block;`}\n\t\tclassName={css`position: relative; display: flex`}\n\t\t{...rest}>\n\t\t\t<TextInput\n\t\t\t\ttype={componentObj.inputType}\n\t\t\t\tlabelText={componentObj.label}\n\t\t\t\t{...componentObj}\n\t\t\t\t{...rest} />\n\t\t</AComponent>\n\t);\n};\n","import React from 'react';\nimport { SkeletonPlaceholder } from 'carbon-components-react';\nimport './fragment-preview.scss';\nimport { css, cx } from 'emotion';\nimport {\n\tAButton,\n\tAGrid,\n\tACheckbox,\n\tATextArea,\n\tATextInput,\n\tAText,\n\tARow,\n\tAColumn\n} from '../fragment-components';\n\nconst canvas = css`\n\tborder: 2px solid #d8d8d8;\n\tbackground-color: white;\n\tposition: relative;\n`;\n\nconst allowDrop = (event: any) => {\n\tevent.preventDefault();\n}\n\nlet componentCounter = 2; // actually initialized (again) in Fragment\n\nexport const getComponentById = (componentObj: any, id: number) => {\n\tif (!componentObj || !id) {\n\t\treturn undefined;\n\t}\n\n\tif (componentObj.id === id) {\n\t\treturn componentObj;\n\t}\n\n\tif (componentObj.items) {\n\t\tfor (let i = 0; i < componentObj.items.length; i++) {\n\t\t\tconst component: any = getComponentById(componentObj.items[i], id);\n\t\t\tif (component) {\n\t\t\t\treturn component;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn undefined;\n};\n\nexport const getSelectedComponent = (fragment: any) => {\n\tif (!fragment) {\n\t\treturn undefined;\n\t}\n\n\treturn getComponentById(fragment.data, fragment.selectedComponentId)\n};\n\nexport const getHighestId = (componentObj: any) => {\n\tif (!componentObj) {\n\t\treturn 0;\n\t}\n\n\tif (!componentObj.items || !componentObj.items.length) {\n\t\treturn componentObj.id || 0;\n\t}\n\n\treturn Math.max(...componentObj.items.map((item: any) => getHighestId(item)), (componentObj.id || 0));\n};\n\nexport const stateWithoutComponent = (state: any, componentId: number) => {\n\tif (state.items) {\n\t\tconst componentIndex = state.items.findIndex((component: any) => component.id === componentId);\n\t\tif (componentIndex >= 0) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titems: [...state.items.slice(0, componentIndex), ...state.items.slice(componentIndex + 1)]\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\t...state,\n\t\t\titems: state.items.map((item: any) => stateWithoutComponent(item, componentId))\n\t\t}\n\t}\n\n\treturn { ...state };\n};\n\nconst componentsThatNeedNames = [\n\t'checkbox',\n\t'combobox',\n\t'datepicker',\n\t'dropdown',\n\t'fileinput',\n\t'radio',\n\t'search',\n\t'select',\n\t'textarea',\n\t'textinput',\n\t'timepicker'\n];\n\nexport const initializeIds = (componentObj: any) => {\n\tconst id = componentObj.id || componentCounter++;\n\tlet name = componentsThatNeedNames.includes(componentObj.type) ? `${componentObj.type}-${id}` : undefined;\n\tname = componentObj.codeContext?.name ? componentObj.codeContext?.name : name;\n\n\treturn {\n\t\t...componentObj,\n\t\tid,\n\t\titems: componentObj.items ? componentObj.items.map((co: any) => initializeIds(co)) : undefined,\n\t\tcodeContext: {\n\t\t\tname\n\t\t}\n\t};\n}\n\nconst updatedList = (list: any[], item: any, dropInIndex?: number) => {\n\tif (dropInIndex === undefined) {\n\t\treturn [...list, item];\n\t}\n\n\treturn [...list.slice(0, dropInIndex), item, ...list.slice(dropInIndex)];\n};\n\nexport const updatedState = (state: any, dragObj: any, dropInId?: number, dropInIndex?: number) => {\n\tif (!state) { // NOTE is this needed?\n\t\treturn;\n\t}\n\n\t// give unique ids to newly dropped components\n\tdragObj.component = initializeIds(dragObj.component);\n\n\t// only update\n\tif (dragObj.type === 'update') {\n\t\tif (state.id && state.id === dragObj.component.id) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\t...dragObj.component\n\t\t\t}\n\t\t}\n\t\tif (state.items) {\n\t\t\tstate.items = state.items.map((item: any) => updatedState(item, dragObj, dropInId, dropInIndex));\n\t\t}\n\n\t\treturn { ...state };\n\t}\n\n\tif (dragObj.type === 'move') {\n\t\tstate = stateWithoutComponent(state, dragObj.component.id);\n\t\tdragObj.type = 'insert'\n\t}\n\n\n\tif (state.items) {\n\t\tstate.items = state.items.map((item: any) => updatedState(item, dragObj, dropInId, dropInIndex));\n\t}\n\n\tif (!dropInId) {\n\t\treturn state.items && !state.type ? {\n\t\t\t...state,\n\t\t\titems: updatedList(state.items, dragObj.component, dropInIndex)\n\t\t} : { ...state };\n\t}\n///////////// TODO NOTE clean the container items with 1 item //////////////\n\tif (state.id && state.id === dropInId) {\n\t\t// add data into state\n\t\tif (state.items) {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\titems: updatedList(state.items, dragObj.component, dropInIndex),\n\t\t\t\tid: state.id\n\t\t\t}\n\t\t}\n\n\t\t// convert into a list of components, move current component into list\n\t\treturn {\n\t\t\t// TODO should this be a `type: container`?\n\t\t\tid: componentCounter++,\n\t\t\titems: updatedList([{...state}], dragObj.component, dropInIndex)\n\t\t}\n\t}\n\n\tif (dropInId) { // probably don't wanna add it here since it didn't match anything and it should somewhere\n\t\treturn { ...state };\n\t}\n\n\treturn state.items ? {\n\t\t...state,\n\t\titems: updatedList(state.items, dragObj.component, dropInIndex)\n\t} : { ...state };\n}\n\nexport const getParentComponent = (state: any, child: any) => {\n\tif (state && state.items) {\n\t\tif (state.items.includes(child)) {\n\t\t\treturn state;\n\t\t}\n\t\tfor (let i = 0; i < state.items.length; i++) {\n\t\t\tconst component = state.items[i];\n\t\t\tconst parent: any = getParentComponent(component, child);\n\t\t\tif (parent) {\n\t\t\t\treturn parent;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn null;\n};\n\nexport const Fragment = ({fragment, setFragment}: any) => {\n\tif (!fragment || !fragment.data) { return <SkeletonPlaceholder />; }\n\n\t// initialize component counter\n\tcomponentCounter = getHighestId(fragment.data) + 1;\n\n\tconst drop = (event: any, dropInId?: number) => {\n\t\tevent.preventDefault();\n\n\t\tconst dragObj = JSON.parse(event.dataTransfer.getData(\"drag-object\"));\n\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tdata: updatedState(fragment.data, dragObj, dropInId)\n\t\t});\n\t}\n\n\tconst select = (componentObj: any) => {\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tselectedComponentId: componentObj.id\n\t\t}, true);\n\t};\n\n\tconst remove = (componentObj: any) => {\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tdata: stateWithoutComponent(fragment.data, componentObj.id)\n\t\t});\n\t};\n\n\tconst renderComponents = (componentObj: any) => {\n\t\tif (typeof componentObj === \"string\" || !componentObj) {\n\t\t\treturn componentObj;\n\t\t}\n\n\t\tswitch (componentObj.type) {\n\t\t\tcase 'text':\n\t\t\t\treturn (\n\t\t\t\t\t<AText\n\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id}>\n\t\t\t\t\t\t{componentObj.text}\n\t\t\t\t\t</AText>\n\t\t\t\t);\n\n\t\t\tcase 'button':\n\t\t\t\treturn (\n\t\t\t\t\t<AButton\n\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id}>\n\t\t\t\t\t\t{componentObj.text}\n\t\t\t\t\t</AButton>\n\t\t\t\t);\n\n\t\t\tcase 'checkbox':\n\t\t\t\treturn (\n\t\t\t\t\t<ACheckbox\n\t\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id} />\n\t\t\t\t);\n\n\t\t\tcase 'textarea':\n\t\t\t\treturn (\n\t\t\t\t\t<ATextArea\n\t\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id} />\n\t\t\t\t);\n\n\t\t\tcase 'textinput':\n\t\t\t\treturn (\n\t\t\t\t\t<ATextInput\n\t\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id} />\n\t\t\t\t);\n\n\t\t\tcase 'grid':\n\t\t\t\treturn (\n\t\t\t\t\t<AGrid\n\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id}>\n\t\t\t\t\t\t{componentObj.items && componentObj.items.map((row: any) => renderComponents(row))}\n\t\t\t\t\t</AGrid>\n\t\t\t\t);\n\n\t\t\tcase 'row':\n\t\t\t\treturn (\n\t\t\t\t\t<ARow\n\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id}>\n\t\t\t\t\t\t{ componentObj.items.map((column: any) => renderComponents(column))}\n\t\t\t\t\t</ARow>\n\t\t\t\t);\n\n\t\t\tcase 'column':\n\t\t\t\treturn (\n\t\t\t\t\t<AColumn\n\t\t\t\t\tcomponentObj={componentObj}\n\t\t\t\t\tselect={() => select(componentObj)}\n\t\t\t\t\tremove={() => remove(componentObj)}\n\t\t\t\t\tselected={fragment.selectedComponentId === componentObj.id}\n\t\t\t\t\tonDragOver={allowDrop}\n\t\t\t\t\tonDrop={(event: any) => { event.stopPropagation(); drop(event, componentObj.id); }}>\n\t\t\t\t\t\t{ componentObj.items.map((column: any) => (\n\t\t\t\t\t\t\trenderComponents(column)\n\t\t\t\t\t\t))}\n\t\t\t\t\t</AColumn>\n\t\t\t\t);\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (componentObj.items) {\n\t\t\treturn componentObj.items.map((item: any) => renderComponents(item));\n\t\t}\n\n\t\treturn null;\n\t};\n\n\t// TODO add fragment.width and fragment.height to database\n\treturn (\n\t\t<div\n\t\tclassName={cx(canvas, css`width: ${fragment.width || '800px'}; height: ${fragment.height || '600px'}`)}\n\t\tonDragOver={allowDrop}\n\t\tonDrop={(event: any) => { drop(event, fragment.data.id) }}>\n\t\t\t{renderComponents(fragment.data)}\n\t\t</div>\n\t);\n};\n","// TODO: Delete this when the carbon grid components are actually available\nimport React, { PropsWithChildren } from 'react';\nimport { cx } from 'emotion';\n\nexport type RowProps = PropsWithChildren<{\n\tstyles?: any\n}>;\n\nexport const Row = ({ styles, children }: RowProps) => (\n\t<div className={cx('bx--row', styles)}>{children}</div>\n);\n\nexport interface ColDefinition {\n\tsm?: number;\n\tmd?: number;\n\tlg?: number;\n}\n\nexport type ColProps = PropsWithChildren<{\n\tcols?: ColDefinition,\n\trender?: (props: PropsWithChildren<any>) => JSX.Element\n}>;\n\nexport const Col = ({ cols, render, children }: ColProps) => {\n\tconst baseRender = render ?? ((props) => <div {...props} />);\n\tconst classes = cx({\n\t\t[`bx--col-sm-${cols?.sm}`]: !!cols?.sm ?? false,\n\t\t[`bx--col-md-${cols?.md}`]: !!cols?.md ?? false,\n\t\t[`bx--col-lg-${cols?.lg}`]: !!cols?.lg ?? false,\n\t\t'bx--col': !!cols\n\t});\n\treturn baseRender({\n\t\tclassName: classes,\n\t\tchildren\n\t});\n};\n","import React, { useContext } from 'react';\nimport { InlineNotification, NotificationActionButton } from 'carbon-components-react';\nimport {\n\tNotificationContext,\n\tNotificationActionType,\n\tNotificationData\n} from '../context/notification-context';\nimport { css } from 'emotion';\n\nconst notificationStyle = { minWidth: '30rem' };\n\nconst notificationAreaStyle = css`\n\tleft: 50%;\n\ttransform: translateX(-50%);\n\tposition: absolute;\n\tz-index: 2;\n\tmin-width: 30rem;\n\ttop: 2rem;\n`;\n\nexport const Notification = () => {\n\tconst [state, dispatch] = useContext(NotificationContext);\n\treturn (\n\t\t<div className={notificationAreaStyle} role=\"alert\">\n\t\t\t{state.notifications.map((notification: NotificationData, index: number) => (\n\t\t\t\t<InlineNotification\n\t\t\t\t\tlowContrast\n\t\t\t\t\taria-live=\"assertive\"\n\t\t\t\t\tkind={notification.kind}\n\t\t\t\t\ttitle={notification.title}\n\t\t\t\t\tsubtitle={notification.message}\n\t\t\t\t\tcaption={null}\n\t\t\t\t\tkey={notification.id}\n\t\t\t\t\tonCloseButtonClick={() => {\n\t\t\t\t\t\tif (notification.action) {\n\t\t\t\t\t\t\tnotification.action.onNotificationClose();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\ttype: NotificationActionType.REMOVE_NOTIFICATION,\n\t\t\t\t\t\t\tdata: notification\n\t\t\t\t\t\t});\n\t\t\t\t\t}}\n\t\t\t\t\tstyle={notificationStyle}\n\t\t\t\t\tactions={notification.action\n\t\t\t\t\t\t? <NotificationActionButton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tnotification.action.actionFunction();\n\t\t\t\t\t\t\t\tdispatch({\n\t\t\t\t\t\t\t\t\ttype: NotificationActionType.REMOVE_NOTIFICATION,\n\t\t\t\t\t\t\t\t\tdata: notification\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t{notification.action.actionText}\n\t\t\t\t\t\t</NotificationActionButton>\n\t\t\t\t\t\t: undefined}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</div>\n\t);\n};\n","import React, { useContext } from 'react';\nimport { css } from 'emotion';\nimport {\n\tHeaderSideNavItems,\n\tSideNav,\n\tSideNavItem,\n\tSideNavItems,\n\tSideNavMenu\n} from 'carbon-components-react';\nimport { FragmentsContext } from '../context/fragments-context';\nimport { useHistory } from 'react-router';\nimport { HeaderMenuItemLink } from './header-menu-item-link';\n\nconst sideNav = css`\n\tborder-right: 1px solid #D6D6D6;\n`;\n\n// Side nav is fixed when not in the edit screen\n// it won't automatically open at 66 rem.\nconst fixedSideNav = css`\n\t@media screen and (min-width: 66rem) {\n\t\ttransform: translateX(-16rem);\n\t}\n`;\n\nexport const LeftPane = ({ isSideNavExpanded }: any) => {\n\tconst [fragmentState] = useContext(FragmentsContext);\n\tconst history = useHistory();\n\tconst location = history.location.pathname;\n\n\tconst id = `${fragmentState.currentId}`;\n\tconst fragment = fragmentState.fragments.find((fragment: any) => fragment.id === id);\n\n\tconst inEdit = !!location.match(/\\/edit\\//) && fragment;\n\n\treturn (\n\t\t<SideNav\n\t\t\taria-label={inEdit && fragment && fragment.title\n\t\t\t\t? `Modify options for '${fragment.title}'`\n\t\t\t\t: 'Side navigation'\n\t\t\t}\n\t\t\ttabindex={0}\n\t\t\tisFixedNav={!inEdit}\n\t\t\texpanded={isSideNavExpanded}\n\t\t\tclassName={`${sideNav} ${!inEdit ? fixedSideNav : ''}`}>\n\t\t\t<SideNavItems>\n\t\t\t\t<HeaderSideNavItems hasDivider>\n\t\t\t\t\t<HeaderMenuItemLink to=\"\" key=\"\">\n\t\t\t\t\t\tMore menus\n\t\t\t\t\t</HeaderMenuItemLink>\n\t\t\t\t</HeaderSideNavItems>\n\t\t\t\t{\n\t\t\t\t\tinEdit && <>\n\t\t\t\t\t\t<SideNavMenu title='General'>\n\t\t\t\t\t\t\t<SideNavItem>Chicken</SideNavItem>\n\t\t\t\t\t\t</SideNavMenu>\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t</SideNavItems>\n\t\t</SideNav>\n\t);\n};\n","import React, { useState, useContext } from 'react';\n\nimport { Modal } from 'carbon-components-react';\nimport { Image32, Code32 } from '@carbon/icons-react';\n\nimport { css } from 'emotion';\nimport {\n\tModalActionType,\n\tModalContext\n} from '../../../context/modal-context';\nimport { ExportCode } from './exports/export-code-modal';\nimport { SelectionTile } from '../../../components/selection-tile';\nimport { ExportImageModal } from './exports/export-image-modal';\n\n\nconst exportOptionTileWrapper = css`\n\twidth: 50%;\n\theight: 200px;\n\t.bx--tile {\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tp {\n\t\t\tposition: absolute;\n\t\t\tbottom: 15px;\n\t\t}\n\t}\n`;\n\nconst exportOptionsWrapper = css`\n\tdisplay: flex;\n\tdiv:first-child {\n\t\tmargin-right: 20px;\n\t}\n`;\n\nexport enum ShareOptionsModals {\n\tSHARE_OPTIONS,\n\tCODE_EXPORTS,\n\tIMAGE_EXPORTS\n}\n\nenum Exports {\n\tCODE,\n\tIMAGE\n}\n\ninterface ShareOptionsModalState {\n\tselectedExportOption: Exports | null\n}\n\nexport const ShareOptionsModal = ({ fragment }: any) => {\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst [displayedModal, setDisplayedModal]\n\t\t= useState<ShareOptionsModals | null>(ShareOptionsModals.SHARE_OPTIONS);\n\n\t// This contains all the states that control the share options modal.\n\tconst [shareOptionsState, setShareOptionsState] = useState<ShareOptionsModalState>({\n\t\tselectedExportOption: null\n\t});\n\n\tconst handleExportSelection = () => {\n\t\tif (shareOptionsState.selectedExportOption === Exports.CODE) {\n\t\t\tsetDisplayedModal(ShareOptionsModals.CODE_EXPORTS);\n\t\t} else if (shareOptionsState.selectedExportOption === Exports.IMAGE) {\n\t\t\tsetDisplayedModal(ShareOptionsModals.IMAGE_EXPORTS);\n\t\t}\n\t};\n\n\tconst shareModalSwitcher = () => {\n\t\tswitch (displayedModal) {\n\t\t\tcase ShareOptionsModals.SHARE_OPTIONS:\n\t\t\t\treturn (\n\t\t\t\t\t<Modal\n\t\t\t\t\t\thasForm\n\t\t\t\t\t\tonRequestSubmit={handleExportSelection}\n\t\t\t\t\t\topen={modalState.ShowModal && displayedModal === ShareOptionsModals.SHARE_OPTIONS}\n\t\t\t\t\t\tonRequestClose={() => dispatchModal({ type: ModalActionType.closeModal })}\n\t\t\t\t\t\tprimaryButtonText='Done'\n\t\t\t\t\t\tprimaryButtonDisabled={ shareOptionsState.selectedExportOption === null }\n\t\t\t\t\t\tsecondaryButtonText='Cancel'\n\t\t\t\t\t\tmodalHeading={`Share '${fragment.title}'`}>\n\t\t\t\t\t\t<div className={exportOptionsWrapper}>\n\t\t\t\t\t\t\t<SelectionTile\n\t\t\t\t\t\t\t\tstyles={exportOptionTileWrapper}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetShareOptionsState({\n\t\t\t\t\t\t\t\t\t\t...shareOptionsState,\n\t\t\t\t\t\t\t\t\t\tselectedExportOption: Exports.CODE\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon={<Code32 />}\n\t\t\t\t\t\t\t\tselected={shareOptionsState.selectedExportOption === Exports.CODE}\n\t\t\t\t\t\t\t\tlabel='Code' />\n\t\t\t\t\t\t\t<SelectionTile\n\t\t\t\t\t\t\t\tstyles={exportOptionTileWrapper}\n\t\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\t\tsetShareOptionsState({\n\t\t\t\t\t\t\t\t\t\t...shareOptionsState,\n\t\t\t\t\t\t\t\t\t\tselectedExportOption: Exports.IMAGE\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ticon={<Image32 />}\n\t\t\t\t\t\t\t\tselected={shareOptionsState.selectedExportOption === Exports.IMAGE}\n\t\t\t\t\t\t\t\tlabel='Image' />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal>\n\t\t\t\t);\n\t\t\tcase ShareOptionsModals.CODE_EXPORTS:\n\t\t\t\treturn (\n\t\t\t\t\t<ExportCode\n\t\t\t\t\t\tfragment={fragment}\n\t\t\t\t\t\tdisplayedModal={displayedModal}\n\t\t\t\t\t\tsetDisplayedModal={setDisplayedModal} />\n\t\t\t\t);\n\t\t\tcase ShareOptionsModals.IMAGE_EXPORTS:\n\t\t\tdefault:\n\t\t\t\treturn <ExportImageModal\n\t\t\t\t\tfragment={fragment}\n\t\t\t\t\tdisplayedModal={displayedModal}\n\t\t\t\t\tsetDisplayedModal={setDisplayedModal}/>;\n\t\t}\n\t};\n\n\treturn shareModalSwitcher();\n};\n","import LZString from 'lz-string';\n\nexport const createFragmentSandbox = (fragmentTemplate: any) => {\n\tconst files: Record<string, any> = {};\n\n\tObject.keys(fragmentTemplate)\n\t\t.forEach((filePath: string) => files[filePath] = { content: fragmentTemplate[filePath] });\n\n\treturn LZString.compressToBase64(JSON.stringify({ files }))\n\t\t.replace(/\\+/g, `-`) // '+' -> '-'\n\t\t.replace(/\\//g, `_`) // '/' -> '_'\n\t\t.replace(/=+$/, ``); // Remove ending '='\n};\n","import { format, Options } from 'prettier';\nimport parserBabel from 'prettier/parser-babel';\n\nconst addIfNotExist = (arr: any[], items: any[]) => {\n    items.forEach(item => {\n        if (!arr.includes(item)) {\n            arr.push(item);\n        }\n    });\n    return arr;\n}\n\nconst jsonToImports = (json: any) => {\n    const imports: any[] = [];\n\n    switch (json.type) {\n        case \"button\":\n            addIfNotExist(imports, ['Button']);\n            break;\n\n        case \"checkbox\":\n            addIfNotExist(imports, ['Checkbox']);\n            break;\n\n        case \"textarea\":\n            addIfNotExist(imports, ['TextArea']);\n            break;\n\n        case \"textinput\":\n            addIfNotExist(imports, ['TextInput']);\n            break;\n\n        case \"grid\":\n            addIfNotExist(imports, ['Grid', 'Row', 'Column']);\n\t}\n\n\tif (json.items) {\n        json.items.forEach((item: any) => {\n            addIfNotExist(imports, jsonToImports(item));\n        });\n\t}\n\n    return imports;\n};\n\nconst getCellAttributeString = (cell: any, sizeShort: string, sizeLong: string) => {\n\tconst span = cell[`${sizeLong}Span`];\n\tconst offset = cell[`${sizeLong}Offset`];\n\n\tif (!span && ! offset) {\n\t\treturn '';\n\t}\n\n\tconst spanString = `span: ${span}`;\n\tconst offsetString = `offset: ${offset}`;\n\n\tconst spanAndOffset = `{\n\t\t${span ? spanString : ''}${span && offset ? ',' : ''}\n\t\t${offset ? offsetString : ''}\n\t}`;\n\n\treturn `${sizeShort}={${!offset ? span : spanAndOffset}}`;\n};\n\nconst getCellParamsString = (cell: any) => {\n\treturn `\n\t\t${getCellAttributeString(cell, 'sm', 'small')}\n\t\t${getCellAttributeString(cell, 'md', 'medium')}\n\t\t${getCellAttributeString(cell, 'lg', 'large')}\n\t\t${getCellAttributeString(cell, 'xlg', 'xLarge')}\n\t\t${getCellAttributeString(cell, 'max', 'max')}\n\t`;\n};\n\nexport const jsonToTemplate = (json: any) => {\n    if (typeof json === \"string\" || !json) {\n        return json;\n    }\n\n    switch (json.type) {\n        case \"text\":\n            return json.text;\n\n        case \"button\":\n            return `<Button${json.kind && ` kind=\"${json.kind}\"`}>${json.text}</Button>`;\n\n        case \"checkbox\":\n\t\t\treturn `<Checkbox\n\t\t\t\tlabelText=\"${json.label}\"\n\t\t\t\tname=\"${json.codeContext?.name}\"\n\t\t\t\tid=\"${json.codeContext?.name}\"\n\t\t\t\tchecked={state[\"${json.codeContext?.name}\"]?.checked}\n\t\t\t\tonChange={(checked) => handleInputChange({\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tname: \"${json.codeContext?.name}\",\n\t\t\t\t\t\tvalue: checked\n\t\t\t\t\t}\n\t\t\t\t})} />`;\n\n\t\tcase \"textinput\":\n\t\t\treturn `<TextInput\n\t\t\t\tlabelText=\"${json.label}\"\n\t\t\t\tname=\"${json.codeContext?.name}\"\n\t\t\t\thelperText=\"${json.helperText}\"\n\t\t\t\tplaceholder=\"${json.placeholder}\"\n\t\t\t\tonChange={handleInputChange} />`;\n\n        case \"textarea\":\n\t\t\treturn `<TextArea\n\t\t\t\tlabelText=\"${json.label}\"\n\t\t\t\tname=\"${json.codeContext?.name}\"\n\t\t\t\thelperText=\"${json.helperText}\"\n\t\t\t\tplaceholder=\"${json.placeholder}\"\n\t\t\t\tonChange={handleInputChange} />`;\n\n        case \"grid\":\n            return `<Grid>\n    ${json.items.map((row: any) => `<Row>\n        ${row.items.map((cell: any) => `<Column ${getCellParamsString(cell)}>\n                ${jsonToTemplate(cell)}\n        </Column>`).join('\\n')}\n    </Row>`).join('\\n')}\n</Grid>`;\n\n        default:\n            break;\n\t}\n\n    if (json.items) {\n        return json.items.map((item: any) => jsonToTemplate(item)).join('\\n');\n    }\n};\n\n\nconst generateTemplate = (json: any) => {\n\tconst carbonImports = jsonToImports(json);\n\tconst carbonImportsString = carbonImports.reduce((string: string, curr: string) => (\n\t\tstring += `${curr}, `\n\t), '');\n\treturn {\n\t\timports: `import { ${carbonImportsString} } from 'carbon-components-react'`,\n\t\ttemplate: jsonToTemplate(json)\n\t};\n};\n\nexport const createReactApp = (fragment: any) => {\n\tconst fragmentTemplate = generateTemplate(fragment.data);\n\tconst formatOptions: Options = {\n\t\tplugins: [parserBabel],\n\t\ttrailingComma: 'none',\n\t\tuseTabs: true\n\t};\n\n\tconst indexHtml = `<div id='root'></div>\n`;\n\tconst componentJs\n\t\t= `import React from 'react';\n${fragmentTemplate.imports};\n\nexport const FragmentComponent = ({state, setState}) => {\n\tconst handleInputChange = (event) => {\n\t\tsetState({...state, [event.target.name]: event.target.value});\n\t};\n\n\treturn <>${fragmentTemplate.template}</>;\n};\n`;\n\tconst indexJs\n\t\t= `import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { FragmentComponent } from './component.js';\n\nimport 'carbon-components/css/carbon-components.css';\n\nconst App = () => {\n\tconst [state, setState] = useState({});\n\n\treturn (\n\t\t<div>\n\t\t\t<FragmentComponent state={state} setState={setState} />\n\t\t</div>\n\t);\n}\nReactDOM.render(<App />, document.getElementById('root'));\n`;\n\tconst packageJson = {\n\t\tdependencies: {\n\t\t\t'carbon-components': '10.15.0',\n\t\t\t'carbon-icons': '7.0.7',\n\t\t\t'@carbon/icons-react': '10.15.0',\n\t\t\t'carbon-components-react': '7.15.0',\n\t\t\treact: '16.12.0',\n\t\t\t'react-dom': '16.12.0',\n\t\t\t'react-scripts': '3.0.1',\n\t\t\temotion: '10.0.27'\n\t\t}\n\t};\n\treturn {\n\t\t'src/index.html': indexHtml,\n\t\t'src/index.js': format(indexJs, formatOptions),\n\t\t'src/component.js': format(componentJs, formatOptions),\n\t\t'package.json': packageJson\n\t};\n};\n","// Used to map fragment types to corresponding angular tag.\nconst fragmentTagMap: Record<string, string> = {\n};\n\nexport const createAngularApp = (fragment: any) => {\n\tconst fragmentData = JSON.stringify(fragment.data, null, '\\t');\n\tconst fragmentType = `${fragment.type}`;\n\n\tconst appComponentHtml\n= `<${fragmentTagMap[fragmentType]} [data]='data' [options]='options'></${fragmentTagMap[fragmentType]}>\n`;\n\tconst appComponentTs\n= `import { Component } from '@angular/core';\n@Component({\n\tselector: 'app-root',\n\ttemplateUrl: './app.component.html'\n})\nexport class AppComponent {\n\tdata = ${fragmentData};\n}\n`;\n\tconst appModule\n= `import { NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { FragmentsModule } from '@carbon/fragments-angular';\nimport { AppComponent } from './app.component';\n@NgModule({\n\timports: [BrowserModule, FragmentsModule],\n\tdeclarations: [AppComponent],\n\tbootstrap: [AppComponent]\n})\nexport class AppModule {}\n`;\n\n\tconst indexHtml\n= `<!DOCTYPE html>\n<html lang='en'>\n\t<head>\n\t\t<meta charset='utf-8' />\n\t\t<title>Angular</title>\n\t</head>\n\t<body>\n\t\t<app-root></app-root>\n\t</body>\n</html>\n`;\n\n\tconst mainTs\n= `import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\nimport { AppModule } from './app/app.module';\nplatformBrowserDynamic()\n\t.bootstrapModule(AppModule)\n\t.catch(err => console.log(err));\n`;\n\n\tconst angularCliJson\n= `{\n\t\"apps\": [\n\t\t{\n\t\t\t\"root\": \"src\",\n\t\t\t\"outDir\": \"dist\",\n\t\t\t\"assets\": [\"assets\", \"favicon.ico\"],\n\t\t\t\"index\": \"index.html\",\n\t\t\t\"main\": \"main.ts\",\n\t\t\t\"polyfills\": \"polyfills.ts\",\n\t\t\t\"prefix\": \"app\",\n\t\t\t\"styles\": [\"styles.css\"],\n\t\t\t\"scripts\": [],\n\t\t\t\"environmentSource\": \"environments/environment.ts\",\n\t\t\t\"environments\": {\n\t\t\t\t\"dev\": \"environments/environment.ts\",\n\t\t\t\t\"prod\": \"environments/environment.prod.ts\"\n\t\t\t}\n\t\t}\n\t]\n}\n`;\n\n\tconst packageJson = {\n\t\tdependencies: {\n\t\t\t'@angular/animations': '8.2.14',\n\t\t\t'@angular/common': '8.2.14',\n\t\t\t'@angular/compiler': '8.2.14',\n\t\t\t'@angular/core': '8.2.14',\n\t\t\t'@angular/forms': '8.2.14',\n\t\t\t'@angular/platform-browser': '8.2.14',\n\t\t\t'@angular/platform-browser-dynamic': '8.2.14',\n\t\t\t'@angular/router': '8.2.14',\n\t\t\t'@carbon/fragments': '0.38.8',\n\t\t\t'@carbon/fragments-angular': '0.38.8',\n\t\t\t'core-js': '3.6.0',\n\t\t\td3: '5.15.0',\n\t\t\trxjs: '6.5.3',\n\t\t\t'zone.js': '0.10.2'\n\t\t}\n\t};\n\n\treturn {\n\t\t'src/index.html': indexHtml,\n\t\t'src/main.ts': mainTs,\n\t\t'src/app/app.component.html': appComponentHtml,\n\t\t'src/app/app.component.ts': appComponentTs,\n\t\t'src/app/app.module.ts': appModule,\n\t\t'.angular-cli.json': angularCliJson,\n\t\t'package.json': packageJson\n\t};\n};\n","// Used to map fragment types to corresponding vanilla fragment tag.\nconst fragmentTagMap: Record<string, string> = {\n};\n\nexport const createVanillaApp = (fragment: any) => {\n\tconst fragmentData = JSON.stringify(fragment.data, null, '\\t');\n\tconst fragmentType = `${fragment.type}`;\n\n\tconst indexHtml\n= `<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>Vanilla</title>\n\t\t<meta charset='UTF-8' />\n\t</head>\n\t<body>\n\t\t<div style='height: 500px; min-width: 100%;'>\n\t\t\t<div id='my-fragment'></div>\n\t\t</div>\n\t\t<script src='src/index.js'>\n\t\t</script>\n\t</body>\n</html>\n`;\n\n\tconst indexJs\n= `import '@carbon/fragments/styles.css';\nimport { ${fragmentTagMap[fragmentType]} } from '@carbon/fragments';\n// grab fragment holder DOM element\nconst fragmentHolder = document.getElementById('my-fragment');\n// initialize the fragment\nnew ${fragmentTagMap[fragmentType]}(fragmentHolder, {\n\tdata: ${fragmentData},\n});\n`;\n\n\tconst packageJson = {\n\t\tdependencies: {\n\t\t\t'@carbon/fragments': '0.38.8',\n\t\t\t'carbon-components': '10.20.0',\n\t\t\t'@carbon/colors': '10.11.0',\n\t\t\td3: '5.15.0'\n\t\t}\n\t};\n\n\treturn {\n\t\t'index.html': indexHtml,\n\t\t'src/index.js': indexJs,\n\t\t'package.json': packageJson\n\t};\n};\n","// Used to map fragment types to corresponding vue fragment tag.\nconst fragmentTagMap: Record<string, string> = {\n\t'simple-bar-fragment': 'ccv-simple-bar-fragment',\n\t'grouped-bar-fragment': 'ccv-grouped-bar-fragment',\n\t'stacked-bar-fragment': 'ccv-stacked-bar-Fragment',\n\t'line-fragment': 'ccv-line-fragment',\n\t'scatter-fragment': 'ccv-scatter-fragment',\n\t'pie-fragment': 'ccv-pie-fragment',\n\t'donut-fragment': 'ccv-donut-fragment',\n\tdataAndOptions: ':data=\\'data\\' :options=\\'options\\''\n};\n\nexport const createVueApp = (fragment: any) => {\n\tconst fragmentData = JSON.stringify(fragment.data, null, '\\t');\n\tconst fragmentType = `${fragment.type}`;\n\n\tconst fragmentVue\n= `<script>\n\timport Vue from 'vue';\n\timport '@carbon/fragments/styles.css';\n\timport fragmentsVue from '@carbon/fragments-vue';\n\tVue.use(fragmentsVue);\n\texport default {\n\t\tname: 'Fragment',\n\t\tcomponents: {},\n\t\tdata() {\n\t\t\treturn {\n\t\t\tdata:\n\t\t\t${fragmentData}\n\t\t};\n\t},\n\ttemplate:\n\t\t\"<${fragmentTagMap[fragmentType]} :data='data' :options='options'></${fragmentTagMap[fragmentType]}>\"\n\t};\n</script>\n`;\n\n\tconst appVue\n= `<template>\n<div id='app' style='height: 500px; min-width: 100%;'>\n<Fragment/>\n</div>\n</template>\n<script>\n\timport Fragment from './components/fragment';\n\texport default {\n\t\tname: 'App',\n\t\tcomponents: {\n\t\t\tFragment\n\t\t}\n\t};\n</script>\n`;\n\tconst mainJs\n= `import Vue from 'vue';\nimport App from './App.vue';\nVue.config.productionTip = false;\nnew Vue({\n\trender: h => h(App)\n}).$mount('#app');\n`;\n\n\tconst packageJson = {\n\t\tdependencies: {\n\t\t\t'@carbon/fragments': '0.38.8',\n\t\t\t'@carbon/fragments-vue': '0.38.8',\n\t\t\t'@vue/cli-plugin-babel': '4.1.1',\n\t\t\td3: '5.15.0',\n\t\t\tvue: '2.6.11'\n\t\t}\n\t};\n\n\treturn {\n\t\t'src/components/fragment.vue': fragmentVue,\n\t\t'src/App.vue': appVue,\n\t\t'src/main.js': mainJs,\n\t\t'package.json': packageJson\n\t};\n};\n","import { extension } from 'mime-types';\n\nexport const getFullFileName = (name: string, mimeType: string) => (\n\t`${name}.${extension(mimeType)}`\n);\n\nexport const saveFile = (url: string, fileName: string) => {\n\tconst anchor = document.createElement('a');\n\tanchor.href = url;\n\tanchor.download = fileName;\n\tanchor.click();\n};\n\nexport const saveBlob = (blob: any, fileName: string) => {\n\tconst url = URL.createObjectURL(blob);\n\tsaveFile(url, fileName);\n\n\t// Give it a second to download :)\n\tsetTimeout(() => {\n\t\tURL.revokeObjectURL(url);\n\t}, 1000);\n};\n\nexport const warningNotificationProps = {\n\tlowContrast: true,\n\trole: 'alert',\n\tnotificationType: 'inline',\n\tkind: 'warning',\n\ttitle: 'Uploaded data has been modified',\n\tsubtitle: 'data did not match expected format so we modified it so you can still use it'\n};\n\nexport const errorNotificationProps = {\n\tlowContrast: true,\n\trole: 'alert',\n\tnotificationType: 'inline',\n\tkind: 'error',\n\ttitle: 'Error',\n\tsubtitle: ''\n};\n","import React, { useContext } from 'react';\n\nimport { ShareOptionsModals } from '../share-options-modal';\n\nimport { createFragmentSandbox } from './create-fragment-sandbox';\nimport { createReactApp } from './frameworks/react-fragment';\nimport { createAngularApp } from './frameworks/angular-fragment';\nimport { createVanillaApp } from './frameworks/vanilla-fragment';\nimport { createVueApp } from './frameworks/vue-fragment';\n\nimport {\n\tButton,\n\tCodeSnippet,\n\tModal,\n\tTab,\n\tTabs\n} from 'carbon-components-react';\nimport { css } from 'emotion';\nimport { ModalContext, ModalActionType } from '../../../../context/modal-context';\nimport { saveBlob } from '../../../../utils/file-tools';\n\nconst exportCodeModalStyle = css`\n\t.bx--tabs__nav-item {\n\t\twidth: calc(20% - 1px);\n\t}\n`;\n\nconst codeSnippetWrapper = css`\n    margin-top: 20px;\n    p {\n        margin-bottom: 7px;\n    }\n`;\n\nconst titleWrapper = css`\n    display: flex;\n    margin-top: 30px;\n    a, button {\n        margin-left: auto;\n    }\n`;\n\nconst codeSnippet = css`\n    .bx--copy-btn {\n        background: white;\n    }\n`;\n\ninterface ExportCodeProps {\n    fragment: any,\n    displayedModal: ShareOptionsModals | null,\n    setDisplayedModal: (displayedModal: ShareOptionsModals | null) => void\n}\n\nexport const ExportCode = ({\n\tfragment,\n\tdisplayedModal,\n\tsetDisplayedModal\n}: ExportCodeProps) => {\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst jsonCode: any = JSON.stringify(fragment.data, null, 2);\n\tconst vanillaCode: any = createVanillaApp(fragment);\n\tconst reactCode: any = createReactApp(fragment);\n\tconst angularCode: any = createAngularApp(fragment);\n\tconst vueCode: any = createVueApp(fragment);\n\n\tconst generateSandboxUrl = (parameters: any) => (`https://codesandbox.io/api/v1/sandboxes/define?parameters=${parameters}`);\n\n\treturn (\n\t\t<Modal\n\t\t\thasForm\n\t\t\topen={modalState.ShowModal && displayedModal === ShareOptionsModals.CODE_EXPORTS}\n\t\t\tonRequestClose={() => dispatchModal({ type: ModalActionType.closeModal })}\n\t\t\tprimaryButtonText='Done'\n\t\t\tsecondaryButtonText='Back to export options'\n\t\t\tonRequestSubmit={() => dispatchModal({ type: ModalActionType.closeModal })}\n\t\t\tonSecondarySubmit={() => { setDisplayedModal(ShareOptionsModals.SHARE_OPTIONS); }}\n\t\t\tmodalHeading={`Export \"${fragment.title}\" code`}\n\t\t\tclassName={exportCodeModalStyle}>\n\t\t\t<Tabs selected={3}>\n\t\t\t\t<Tab\n\t\t\t\t\tid='json'\n\t\t\t\t\tlabel='JSON'\n\t\t\t\t\trole='presentation'\n\t\t\t\t\ttabIndex={0}>\n\t\t\t\t\t<div className={titleWrapper}>\n\t\t\t\t\t\t<h3>JSON</h3>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\tkind='ghost'\n\t\t\t\t\t\tonClick={() => saveBlob(new Blob([jsonCode]), `${fragment.title}.json`)}>\n\t\t\t\t\t\t\tDownload JSON\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<CodeSnippet\n\t\t\t\t\t\ttype='multi'\n\t\t\t\t\t\tlight\n\t\t\t\t\t\tclassName={codeSnippet}\n\t\t\t\t\t\tcopyButtonDescription={`Copy JSON to clipboard`}>\n\t\t\t\t\t\t{ jsonCode }\n\t\t\t\t\t</CodeSnippet>\n\t\t\t\t</Tab>\n\t\t\t\t<Tab\n\t\t\t\t\tid='vanilla'\n\t\t\t\t\tlabel='Vanilla JS'\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tdisabled\n\t\t\t\t\ttabIndex={0}>\n\t\t\t\t\t<div className={titleWrapper}>\n\t\t\t\t\t\t<h3>Vanilla JS Code</h3>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={generateSandboxUrl(createFragmentSandbox(vanillaCode))}\n\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\trel='noopener noreferrer'>\n\t\t\t\t\t\t\tEdit on CodeSandbox\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className={css`color: red`}>/Only React works atm/</p>\n\t\t\t\t\t{\n\t\t\t\t\t\tObject.keys(vanillaCode).map((fileName: string) => (\n\t\t\t\t\t\t\t<div className={codeSnippetWrapper} key={fileName}>\n\t\t\t\t\t\t\t\t<p>{fileName}</p>\n\t\t\t\t\t\t\t\t<CodeSnippet\n\t\t\t\t\t\t\t\t\ttype='multi'\n\t\t\t\t\t\t\t\t\tlight\n\t\t\t\t\t\t\t\t\tclassName={codeSnippet}\n\t\t\t\t\t\t\t\t\tcopyButtonDescription={`Copy ${fileName} to clipboard`}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfileName !== 'package.json'\n\t\t\t\t\t\t\t\t\t\t\t? vanillaCode[fileName]\n\t\t\t\t\t\t\t\t\t\t\t: JSON.stringify(vanillaCode[fileName], null, '\\t')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</CodeSnippet>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</Tab>\n\t\t\t\t<Tab\n\t\t\t\t\tid='Angular'\n\t\t\t\t\tlabel='Angular'\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tdisabled\n\t\t\t\t\ttabIndex={0}>\n\t\t\t\t\t<div className={titleWrapper}>\n\t\t\t\t\t\t<h3>Angular Code</h3>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={generateSandboxUrl(createFragmentSandbox(angularCode))}\n\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\trel='noopener noreferrer'>\n\t\t\t\t\t\t\tEdit on CodeSandbox\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className={css`color: red`}>/Only React works atm/</p>\n\t\t\t\t\t{\n\t\t\t\t\t\tObject.keys(angularCode).map((fileName: string) => (\n\t\t\t\t\t\t\t<div className={codeSnippetWrapper} key={fileName}>\n\t\t\t\t\t\t\t\t<p>{fileName}</p>\n\t\t\t\t\t\t\t\t<CodeSnippet\n\t\t\t\t\t\t\t\t\ttype='multi'\n\t\t\t\t\t\t\t\t\tlight\n\t\t\t\t\t\t\t\t\tclassName={codeSnippet}\n\t\t\t\t\t\t\t\t\tcopyButtonDescription={`Copy ${fileName} to clipboard`}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfileName !== 'package.json'\n\t\t\t\t\t\t\t\t\t\t\t? angularCode[fileName]\n\t\t\t\t\t\t\t\t\t\t\t: JSON.stringify(angularCode[fileName], null, '\\t')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</CodeSnippet>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</Tab>\n\t\t\t\t<Tab\n\t\t\t\t\tid='react'\n\t\t\t\t\tlabel='React'\n\t\t\t\t\trole='presentation'\n\t\t\t\t\ttabIndex={0}>\n\t\t\t\t\t<div className={titleWrapper}>\n\t\t\t\t\t\t<h3>React Code</h3>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={generateSandboxUrl(createFragmentSandbox(reactCode))}\n\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\trel='noopener noreferrer'>\n\t\t\t\t\t\t\tEdit on CodeSandbox\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t{\n\t\t\t\t\t\tObject.keys(reactCode).map((fileName: string) => (\n\t\t\t\t\t\t\t<div className={codeSnippetWrapper} key={fileName}>\n\t\t\t\t\t\t\t\t<p>{fileName}</p>\n\t\t\t\t\t\t\t\t<CodeSnippet\n\t\t\t\t\t\t\t\t\ttype='multi'\n\t\t\t\t\t\t\t\t\tlight\n\t\t\t\t\t\t\t\t\tclassName={codeSnippet}\n\t\t\t\t\t\t\t\t\tcopyButtonDescription={`Copy ${fileName} to clipboard`}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfileName !== 'package.json'\n\t\t\t\t\t\t\t\t\t\t\t? reactCode[fileName]\n\t\t\t\t\t\t\t\t\t\t\t: JSON.stringify(reactCode[fileName], null, '\\t')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</CodeSnippet>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</Tab>\n\t\t\t\t<Tab\n\t\t\t\t\tid='vue'\n\t\t\t\t\tlabel='Vue'\n\t\t\t\t\trole='presentation'\n\t\t\t\t\tdisabled\n\t\t\t\t\ttabIndex={0}>\n\t\t\t\t\t<div className={titleWrapper}>\n\t\t\t\t\t\t<h3>Vue Code</h3>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref={generateSandboxUrl(createFragmentSandbox(vueCode))}\n\t\t\t\t\t\t\ttarget='_blank'\n\t\t\t\t\t\t\trel='noopener noreferrer'>\n\t\t\t\t\t\t\tEdit on CodeSandbox\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className={css`color: red`}>/Only React works atm/</p>\n\t\t\t\t\t{\n\t\t\t\t\t\tObject.keys(vueCode).map((fileName: string) => (\n\t\t\t\t\t\t\t<div className={codeSnippetWrapper} key={fileName}>\n\t\t\t\t\t\t\t\t<p>{fileName}</p>\n\t\t\t\t\t\t\t\t<CodeSnippet\n\t\t\t\t\t\t\t\t\ttype='multi'\n\t\t\t\t\t\t\t\t\tlight\n\t\t\t\t\t\t\t\t\tclassName={codeSnippet}\n\t\t\t\t\t\t\t\t\tcopyButtonDescription={`Copy ${fileName} to clipboard`}>\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tfileName !== 'package.json'\n\t\t\t\t\t\t\t\t\t\t\t? vueCode[fileName]\n\t\t\t\t\t\t\t\t\t\t\t: JSON.stringify(vueCode[fileName], null, '\\t')\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</CodeSnippet>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t))\n\t\t\t\t\t}\n\t\t\t\t</Tab>\n\t\t\t</Tabs>\n\t\t</Modal>\n\t);\n};\n","import React from 'react';\nimport { css } from 'emotion';\n\nimport { SelectableTile } from 'carbon-components-react';\n\nconst tileFooter = css`\n\tposition: absolute;\n\tdisplay: flex;\n\twidth: 100%;\n\tjustify-content: space-between;\n\tbottom: 15px;\n\tp {\n\t\tfont-weight: bold;\n\t}\n\tspan {\n\t\tmargin-right: 30px;\n\t}\n`;\n\nexport interface SelectionTile {\n\tstyles?: any,\n\tonChange?: any,\n\ticon?: JSX.Element | null,\n\tlabel?: string,\n\tselected?: boolean,\n\ttag?: JSX.Element | null\n}\n\nexport const SelectionTile = (props: SelectionTile) => (\n\t<div className={props.styles}>\n\t\t<SelectableTile\n\t\t\tlight={true}\n\t\t\tonChange={() => {props.onChange();}}\n\t\t\tselected={props.selected}>\n\t\t\t{ props.icon }\n\t\t\t<div className={tileFooter}>\n\t\t\t\t<p>{ props.label }</p>\n\t\t\t\t{ props.tag }\n\t\t\t</div>\n\t\t</SelectableTile>\n\t</div>\n);\n","import React from 'react';\nimport domtoimage from 'dom-to-image';\nimport ReactDOM from 'react-dom';\nimport { Fragment } from '../components';\n\nconst sleep = (ms: number) => new Promise(resolve => setTimeout(resolve, ms));\n\nexport interface RenderProps {\n\tid: string,\n\tname: string,\n\twidth?: number,\n\theight?: number,\n\tformat?: string,\n\tpreview?: { // only sent for preview\n\t\tformat?: string, // optional\n\t\twidth: number,\n\t\theight: number\n\t}\n}\n\nexport const getFragmentPreview = async(fragment: any, props: RenderProps) => {\n\tconst element = document.createElement('div');\n\telement.className = 'render-preview';\n\n\t(element as HTMLElement).style.position = 'absolute';\n\t(element as HTMLElement).style.top = '0';\n\t(element as HTMLElement).style.left = '0';\n\t(element as HTMLElement).style.zIndex = '-1';\n\t(element as HTMLElement).style.width = `${props.width || 800}px`;\n\t(element as HTMLElement).style.height = `${props.height || 400}px`;\n\t(element as HTMLElement).style.minHeight = `${props.height || 400}px`;\n\tReactDOM.render(React.createElement(Fragment, {fragment}), element);\n\tdocument.body.appendChild(element);\n\n\tawait sleep(100); // wait for render to finish\n\n\tconst imageBlob = await domtoimage.toBlob(element as Node);\n\t(element as HTMLElement).remove();\n\treturn imageBlob;\n};\n","import React, {\n\tuseState,\n\tuseEffect,\n\tuseRef,\n\tuseContext\n} from 'react';\nimport {\n\tModal,\n\tTextInput,\n\tForm,\n\tSelect,\n\tSelectItem,\n\tCheckbox,\n\tNumberInput,\n\tLoading\n} from 'carbon-components-react';\nimport { css } from 'emotion';\nimport debounce from 'lodash/debounce';\nimport { saveBlob, getFullFileName } from '../../../../utils/file-tools';\nimport { ShareOptionsModals } from '../share-options-modal';\nimport { ModalContext, ModalActionType } from '../../../../context/modal-context';\nimport { getFragmentPreview, RenderProps } from '../../../../utils/fragment-tools';\nimport { FragmentsContext } from '../../../../context';\nimport { useHistory } from 'react-router';\n\nconst exportSettingForm = css`\n\twidth: 23rem;\n`;\nconst exportSettingFormGroup = css`\n\twidth: 320px;\n\tdisplay: flex;\n`;\nconst previewContainer = css`\n\tfloat: left;\n\tbackground-color: #e0e0e0;\n\twidth: 100%;\n\theight: 100%;\n\tmargin-top: 3rem;\n\tmargin-left: 1rem;\n\tdisplay: flex;\n\talign-items: center;\n`;\nconst selectInputWH = css`\n\tmargin-bottom: 1.5rem;\n\tfloat: left;\n\twidth: 150px;\n`;\nconst selectInput = css`\n\tmargin-bottom: 1.5rem;\n\twidth: 320px;\n`;\n\nconst fragmentImage = css`\n\tmax-height: 100%;\n\tmax-width: 100%;\n\tdisplay: block;\n\tmargin: 0;\n`;\n\nexport interface ExportImageProps {\n\tfragment: any,\n\tdisplayedModal: ShareOptionsModals | null,\n\tsetDisplayedModal: (displayedModal: ShareOptionsModals | null) => void\n}\n\nlet updatePreviewUrl = async() => console.log('updatePreviewUrl not initialized yet');\nlet handleResize = () => console.log('handleResize not initialized yet');\nconst doInputChange = debounce(() => updatePreviewUrl(), 400);\nconst doUpdatePreviewSize = debounce(() => handleResize(), 200);\n\nexport const ExportImageModal = (props: ExportImageProps) => {\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst [fragmentState] = useContext(FragmentsContext);\n\tconst history = useHistory();\n\tconst location = history.location.pathname;\n\tconst pathSegments = location.split('/');\n\n\tconst id = `${fragmentState.currentId || pathSegments[pathSegments.length - 1]}`;\n\tconst fragment = fragmentState.fragments.find((fragment: any) => fragment.id === id);\n\n\tconst exportSettings = {\n\t\twidth: 800,\n\t\theight: 400,\n\t\tunit: 'pixels',\n\t\tratioLock: false,\n\t\tfragmentName: props.fragment.title,\n\t\tformat: 'image/png',\n\t\tcurRatio: 0\n\t};\n\tconst [inputs, setInputs] = useState(exportSettings);\n\tconst [previewUrl, setPreviewUrl] = useState(props.fragment.preview);\n\tconst [isPerformingAction, setIsPerformingAction] = useState(false);\n\tconst previewContainerRef = useRef<HTMLDivElement>(null);\n\tconst [imageContainerSize, setImageContainerSize] = useState<any>();\n\n\thandleResize = () => {\n\t\tif (!previewContainerRef || !previewContainerRef.current) {\n\t\t\treturn;\n\t\t}\n\t\tsetImageContainerSize({\n\t\t\twidth: previewContainerRef.current.offsetWidth,\n\t\t\theight: previewContainerRef.current.offsetHeight\n\t\t});\n\t};\n\tuseEffect(() => {\n\t\twindow.addEventListener('resize', doUpdatePreviewSize);\n\t\tif(previewContainerRef) {\n\t\t\tdoUpdatePreviewSize();\n\t\t}\n\t\treturn () => {\n\t\t\twindow.removeEventListener('resize', doUpdatePreviewSize);\n\t\t};\n\t}, [previewContainerRef]);\n\n\tconst getPreviewSize = (width: number, height: number) => {\n\t\tlet fitRatio: number;\n\t\tif (width <= height) {\n\t\t\t// preview is square or tall rectangle (mobile)\n\t\t\tfitRatio = imageContainerSize.height / height;\n\t\t} else {\n\t\t\t// preview is long rectangle\n\t\t\tfitRatio = imageContainerSize.width / width;\n\t\t}\n\t\treturn {\n\t\t\twidth: width * fitRatio,\n\t\t\theight: height * fitRatio\n\t\t};\n\t};\n\n\tupdatePreviewUrl = async() => {\n\t\tconst previewSize = getPreviewSize(inputs.width, inputs.height);\n\t\tconst renderProps: RenderProps = {\n\t\t\tid: props.fragment.id,\n\t\t\tname: inputs.fragmentName,\n\t\t\twidth: inputs.width,\n\t\t\theight: inputs.height,\n\t\t\tpreview: {\n\t\t\t\tformat: inputs.format,\n\t\t\t\twidth: previewSize.width,\n\t\t\t\theight: previewSize.height\n\t\t\t}\n\t\t};\n\t\tconst imageBlob = await getFragmentPreview(fragment, renderProps);\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(imageBlob ? imageBlob : new Blob());\n\t\treader.onloadend = () => {\n\t\t\tconst imageUrl: string = reader.result ? reader.result.toString() : '';\n\t\t\tsetPreviewUrl(imageUrl);\n\t\t};\n\t};\n\n\tconst onSubmit = async() => {\n\t\tif (isPerformingAction) {\n\t\t\treturn;\n\t\t}\n\t\tsetIsPerformingAction(true);\n\t\tconst renderProps: RenderProps = {\n\t\t\tid: props.fragment.id,\n\t\t\tname: inputs.fragmentName,\n\t\t\twidth: inputs.width,\n\t\t\theight: inputs.height,\n\t\t\tformat: inputs.format\n\t\t};\n\t\tconst imageBlob = await getFragmentPreview(fragment, renderProps);\n\t\tconst fileName = getFullFileName(inputs.fragmentName, inputs.format);\n\t\tsaveBlob(imageBlob, fileName);\n\t\tsetIsPerformingAction(false);\n\t};\n\n\tconst handleChange = (id: any, value: any) => {\n\t\tsetInputs({\n\t\t\t...inputs,\n\t\t\t[id]: value\n\t\t});\n\t\tdoInputChange();\n\t};\n\n\tuseEffect(() => {\n\t\tdoInputChange();\n\t}, []);\n\n\treturn (\n\t\t<Modal\n\t\t\thasForm\n\t\t\tonRequestSubmit={() => {\n\t\t\t\t// TODO look into whether it's a better user experience to have the\n\t\t\t\t// processing in the background, perhaps with the saving indication\n\t\t\t\tonSubmit().then(dispatchModal({ type: ModalActionType.closeModal }));\n\t\t\t}}\n\t\t\tonSecondarySubmit={() => { props.setDisplayedModal(ShareOptionsModals.SHARE_OPTIONS); }}\n\t\t\topen={modalState.ShowModal && props.displayedModal === ShareOptionsModals.IMAGE_EXPORTS}\n\t\t\tonRequestClose={() => dispatchModal({ type: ModalActionType.closeModal })}\n\t\t\tprimaryButtonText='Export'\n\t\t\tsecondaryButtonText='Back to export options'\n\t\t\tmodalHeading={`Export '${props.fragment.title}' as image`}>\n\t\t\t<p>\n\t\t\t\tExport a static image of this fragment for use in presentation decks or designs.\n\t\t\t</p>\n\t\t\t<div style={{\n\t\t\t\tdisplay: 'flex',\n\t\t\t\tmarginTop: '3rem'\n\t\t\t}}>\n\t\t\t\t<ExportModalSettings inputs={inputs} handleChange={handleChange} />\n\t\t\t\t<div className={previewContainer} ref={previewContainerRef}>\n\t\t\t\t\t<img\n\t\t\t\t\t\tid=\"previewimg\"\n\t\t\t\t\t\tclassName={fragmentImage}\n\t\t\t\t\t\tsrc={previewUrl}\n\t\t\t\t\t\talt={`fragment preview: ${props.fragment.title}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Loading active={isPerformingAction} />\n\t\t</Modal>\n\t);\n};\n\nconst ExportModalSettings = ({ inputs, handleChange }: any) => {\n\t// We assume that a working ratio is never 0 (no 1D fragments)\n\tconst getRatio = () => (inputs.width / inputs.height).toFixed(2);\n\n\tconst onDimensionChange = (id: any, value: any) => {\n\t\tif (isNaN(value) || value === 0) {\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tvalue = 1;\n\t\t}\n\t\tif (!inputs.ratioLock) {\n\t\t\thandleChange(id, value);\n\t\t\treturn;\n\t\t}\n\t\tif (inputs.curRatio === 0) {\n\t\t\thandleChange('curRatio', getRatio());\n\t\t}\n\t\thandleChange(id, value);\n\t\tif (id === 'width') {\n\t\t\thandleChange('height', (value / inputs.curRatio).toFixed(0));\n\t\t} else {\n\t\t\thandleChange('width', (value * inputs.curRatio).toFixed(0));\n\t\t}\n\t};\n\tconst numInputOnchange = (event: any) => {\n\t\tonDimensionChange(event.target.id, parseFloat(event.target.value));\n\t};\n\tconst numInputOnClick = (event: any) => {\n\t\tif (event.imaginaryTarget && event.imaginaryTarget.value) {\n\t\t\tonDimensionChange(event.imaginaryTarget.id, parseFloat(event.imaginaryTarget.value));\n\t\t}\n\t};\n\tconst inputChange = (event: any) => {\n\t\thandleChange(event.target.id, event.target.value);\n\t};\n\n\treturn (\n\t\t<Form className={exportSettingForm}>\n\t\t\t<TextInput\n\t\t\t\tclassName={selectInput}\n\t\t\t\tid={'fragmentName'}\n\t\t\t\tlabelText={'Name'}\n\t\t\t\tplaceholder={'Fragment name'}\n\t\t\t\tonChange={inputChange}\n\t\t\t\ttype='text'\n\t\t\t\tdefaultValue={inputs.fragmentName} />\n\t\t\t<div className={exportSettingFormGroup}>\n\t\t\t\t<NumberInput\n\t\t\t\t\tclassName={selectInputWH}\n\t\t\t\t\tid='width'\n\t\t\t\t\tlabel='Width'\n\t\t\t\t\tvalue={inputs.width}\n\t\t\t\t\tonClick={numInputOnClick}\n\t\t\t\t\tonChange={numInputOnchange} />\n\t\t\t\t<NumberInput\n\t\t\t\t\tclassName={selectInputWH}\n\t\t\t\t\tid='height'\n\t\t\t\t\tlabel='Height'\n\t\t\t\t\tvalue={inputs.height}\n\t\t\t\t\tonClick={numInputOnClick}\n\t\t\t\t\tonChange={numInputOnchange} />\n\t\t\t</div>\n\t\t\t<Checkbox\n\t\t\t\tclassName={selectInput}\n\t\t\t\tid='ratioLock'\n\t\t\t\tlabelText='Preserve aspect ratio'\n\t\t\t\tdefaultChecked={inputs.ratioLock}\n\t\t\t\tonChange={(event: any) => handleChange('ratioLock', event)} />\n\t\t\t<Select\n\t\t\t\tclassName={selectInput}\n\t\t\t\tvalue={inputs.unit}\n\t\t\t\tid={'unit'}\n\t\t\t\tonChange={inputChange}\n\t\t\t\tlabelText='Units'>\n\t\t\t\t<SelectItem text='pixels' value='pixels' />\n\t\t\t</Select>\n\t\t\t<Select\n\t\t\t\tclassName={selectInput}\n\t\t\t\tvalue={inputs.format}\n\t\t\t\tid={'format'}\n\t\t\t\tonChange={inputChange}\n\t\t\t\tlabelText='Format'>\n\t\t\t\t<SelectItem text='png' value='image/png' />\n\t\t\t\t<SelectItem text='jpeg' value='image/jpeg' />\n\t\t\t\t<SelectItem text='bmp' value='image/bmp' />\n\t\t\t\t<SelectItem text='gif' value='image/gif' />\n\t\t\t</Select>\n\t\t</Form>\n\t);\n};\n","import React, { createContext, useReducer } from 'react';\n\nconst LocalFragmentsContext: React.Context<any> = createContext(null);\n\nLocalFragmentsContext.displayName = 'LocalFragmentsContext';\n\nexport enum LocalFragmentActionType {\n\tADD,\n\tREMOVE\n}\n\nexport interface LocalFragmentAction {\n\ttype: LocalFragmentActionType,\n\tdata: any\n}\n\nconst fragmentsReducer = (state: any[], action: any) => {\n\tswitch (action.type) {\n\t\tcase LocalFragmentActionType.REMOVE: {\n\t\t\tconst ci = state.findIndex((c: any) => c.id === action.data.id);\n\t\t\treturn [\n\t\t\t\t...state.slice(0, ci),\n\t\t\t\t...state.slice(ci + 1)\n\t\t\t];\n\t\t}\n\t\tdefault:\n\t\tcase LocalFragmentActionType.ADD:\n\t\t\treturn [...state, action.data];\n\t}\n};\n\nconst validInitialState = (localFragments: any[] | undefined) => {\n\tif (!localFragments || !Array.isArray(localFragments)) {\n\t\treturn [];\n\t}\n\n\t// sanitize localFragments in case they've been modified by third party\n\treturn localFragments\n\t\t.filter((fragment: any) => !!fragment.id && typeof fragment.id === 'string')\n\t\t.map((fragment: any) => ({ id: fragment.id }));\n};\n\nconst LocalFragmentsContextProvider = ({ children }: any) => {\n\tconst initialState: any[] = validInitialState(JSON.parse(localStorage.getItem('localFragments') as string));\n\tconst store = useReducer(fragmentsReducer, initialState);\n\tconst [fragments] = store;\n\n\tReact.useEffect(() => {\n\t\t// store only ids to local storage so we don't get into temptation of using other\n\t\t// props that should really be coming from db\n\t\tlocalStorage.setItem('localFragments', JSON.stringify(fragments.map((lc: any) => ({ id: lc.id }))));\n\t}, [fragments]);\n\n\treturn (\n\t\t<LocalFragmentsContext.Provider value={store}>\n\t\t\t{children}\n\t\t</LocalFragmentsContext.Provider>\n\t);\n};\n\nexport {\n\tLocalFragmentsContext,\n\tLocalFragmentsContextProvider\n};\n","import React, {\n\tuseContext,\n\tuseEffect,\n\tuseState\n} from 'react';\nimport { css, cx } from 'emotion';\nimport { Fragment } from '../../components';\nimport { EditHeader } from './edit-header';\nimport {\n\tFragmentsContext,\n\tuseFetchOne,\n\tFragmentActionType\n} from '../../context/fragments-context';\nimport {\n\tButton,\n\tSideNav,\n\tSideNavLink,\n\tSideNavItems,\n\tTabs,\n\tTab\n} from 'carbon-components-react';\nimport {\n\tCode16,\n\tColorPalette16,\n\tCopy32,\n\tDevelopment16,\n\tExport16,\n\tInformation16,\n\tTrashCan32\n} from '@carbon/icons-react';\n\nimport { ElementsPane } from './elements-pane';\nimport { StylePane } from './style-pane';\nimport { CodePane } from './code-pane';\nimport { ExportPane } from './export-pane';\n\nimport { StyleContextPane } from './style-context-pane';\nimport { CodeContextPane } from './code-context-pane';\n\nconst leftPaneWidth = '300px';\nconst rightPaneWidth = '302px';\n\nconst editPageContent = css`\n\tposition: absolute;\n\twidth: 100vw;\n\theight: calc(100% - 3rem);\n\ttop: 3rem;\n\tmax-width: 100%;\n\tbackground: #f4f4f4;\n\n\t.edit-content {\n\t\tpadding: 1rem 2rem 1rem 5rem;\n\t\twidth: calc(100% - ${rightPaneWidth});\n\t}\n`;\n\nconst sideRail = css`\n\ttransition: left 0.11s cubic-bezier(0.2, 0, 1, 0.9);\n\n\t&.bx--side-nav, &.bx--side-nav:hover {\n\t\t.bx--side-nav__item .bx--side-nav__link {\n\t\t\theight: 3rem;\n\t\t}\n\t}\n\n\t&.bx--side-nav--ux {\n\t\ttop: 7rem;\n\t\tbox-shadow: inset -1px 0px #d8d8d8;\n\t}\n\n\t&.is-active {\n\t\tleft: ${leftPaneWidth};\n\t}\n\n\t.bx--side-nav__items {\n\t\tpadding: 0;\n\t}\n`;\n\nexport const leftPane = css`\n\tposition: absolute;\n\tbackground: white;\n\ttransition: left 0.11s cubic-bezier(0.2, 0, 1, 0.9);\n\twidth: ${leftPaneWidth};\n\tleft: -${leftPaneWidth};\n\theight: calc(100% - 4rem);\n\tpadding: 15px;\n\tbox-shadow: inset -1px 0px #d8d8d8;\n\tz-index: 999;\n\n\t&.is-active {\n\t\tleft: 0;\n\t}\n`;\n\nconst rightPanel = css`\n\twidth: ${rightPaneWidth};\n\tposition: absolute;\n\tright: 0;\n\ttop: 4rem;\n\tbackground: white;\n\tmin-height: calc(100vh - 7rem);\n\tbox-shadow: inset 1px 0px #d8d8d8;\n\tz-index: 1;\n\n\t.bx--tabs__nav-item .bx--tabs__nav-link {\n\t\twidth: 100px;\n\t\ttext-align: center;\n\t}\n\n\t.context-pane-content {\n\t\toverflow: auto;\n\t\theight: calc(100vh - 17rem);\n\t}\n`;\n\nconst actionsStyle = css`\n\tposition: absolute;\n\tbottom: 0;\n\tmargin: 15px;\n`;\n\nenum SelectedLeftPane {\n\tNONE = 'none',\n\tELEMENTS = 'elements',\n\tSTYLE = 'style',\n\tCODE = 'code',\n\tEXPORT = 'export'\n};\n\nexport const Edit = ({ match }: any) => {\n\tconst [state, dispatch] = useContext(FragmentsContext);\n\tuseFetchOne(match.params.id, dispatch);\n\tconst fragment = state.fragments.find((fragment: any) => fragment.id === match.params.id);\n\tconst setFragment = (fragment: any) => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.UPDATE_ONE,\n\t\t\tdata: fragment,\n\t\t\tloaded: true\n\t\t});\n\t};\n\n\tconst [selectedLeftPane, setSelectedLeftPane] = useState(SelectedLeftPane.NONE);\n\n\tuseEffect(() => {\n\t\tif (fragment && fragment.title) {\n\t\t\tdocument.title = `Edit \"${fragment.title}\"`;\n\t\t} else {\n\t\t\tdocument.title = 'Edit fragment';\n\t\t}\n\t}, [fragment]);\n\n\tconst onRailClick = (clickedLeftPane: SelectedLeftPane) => {\n\t\tif (clickedLeftPane === selectedLeftPane) {\n\t\t\tsetSelectedLeftPane(SelectedLeftPane.NONE);\n\t\t} else {\n\t\t\tsetSelectedLeftPane(clickedLeftPane);\n\t\t}\n\t}\n\n\treturn (\n\t\t<div\n\t\t\tid='edit-wrapper'\n\t\t\tclassName={editPageContent}>\n\t\t\t{ fragment && <EditHeader fragment={fragment}/> }\n\t\t\t<ElementsPane isActive={selectedLeftPane === SelectedLeftPane.ELEMENTS} />\n\t\t\t<StylePane isActive={selectedLeftPane === SelectedLeftPane.STYLE} />\n\t\t\t<CodePane isActive={selectedLeftPane === SelectedLeftPane.CODE} />\n\t\t\t<ExportPane isActive={selectedLeftPane === SelectedLeftPane.EXPORT} />\n\t\t\t<SideNav\n\t\t\taria-label='Side navigation'\n\t\t\tclassName={cx(sideRail, selectedLeftPane !== SelectedLeftPane.NONE ? 'is-active' : '')}\n            isRail>\n\t\t\t\t<SideNavItems>\n\t\t\t\t\t<SideNavLink\n\t\t\t\t\trenderIcon={Development16}\n\t\t\t\t\tonClick={() => onRailClick(SelectedLeftPane.ELEMENTS)}\n\t\t\t\t\tisActive={selectedLeftPane === SelectedLeftPane.ELEMENTS}>\n\t\t\t\t\t\tElements\n\t\t\t\t\t</SideNavLink>\n\t\t\t\t\t<SideNavLink\n\t\t\t\t\trenderIcon={ColorPalette16}\n\t\t\t\t\tonClick={() => onRailClick(SelectedLeftPane.STYLE)}\n\t\t\t\t\tisActive={selectedLeftPane === SelectedLeftPane.STYLE}>\n\t\t\t\t\t\tStyle\n\t\t\t\t\t</SideNavLink>\n\t\t\t\t\t<SideNavLink\n\t\t\t\t\trenderIcon={Code16}\n\t\t\t\t\tonClick={() => onRailClick(SelectedLeftPane.CODE)}\n\t\t\t\t\tisActive={selectedLeftPane === SelectedLeftPane.CODE}>\n\t\t\t\t\t\tCode\n\t\t\t\t\t</SideNavLink>\n\t\t\t\t\t<SideNavLink\n\t\t\t\t\trenderIcon={Export16}\n\t\t\t\t\tonClick={() => onRailClick(SelectedLeftPane.EXPORT)}\n\t\t\t\t\tisActive={selectedLeftPane === SelectedLeftPane.EXPORT}>\n\t\t\t\t\t\tExport\n\t\t\t\t\t</SideNavLink>\n\t\t\t\t</SideNavItems>\n\t\t\t</SideNav>\n\t\t\t<div className='edit-content'>\n\t\t\t\t{\n\t\t\t\t\tfragment\n\t\t\t\t\t&& <>\n\t\t\t\t\t\t<Fragment fragment={fragment} setFragment={setFragment} />\n\t\t\t\t\t</>\n\t\t\t\t}\n\t\t\t</div>\n\t\t\t<div className={rightPanel}>\n\t\t\t\t<Tabs>\n\t\t\t\t\t<Tab\n\t\t\t\t\tid='properties-style'\n\t\t\t\t\tlabel={<ColorPalette16 />}>\n\t\t\t\t\t\t<StyleContextPane fragment={fragment} setFragment={setFragment} />\n\t\t\t\t\t</Tab>\n\t\t\t\t\t<Tab\n\t\t\t\t\tid='properties-code'\n\t\t\t\t\tlabel={<Code16 />}>\n\t\t\t\t\t\t<CodeContextPane fragment={fragment} setFragment={setFragment} />\n\t\t\t\t\t</Tab>\n\t\t\t\t\t<Tab\n\t\t\t\t\tid='properties-info'\n\t\t\t\t\tlabel={<Information16 />}>\n\t\t\t\t\t\tinfo\n\t\t\t\t\t</Tab>\n\t\t\t\t</Tabs>\n\t\t\t\t<div className={actionsStyle}>\n\t\t\t\t\t<Button\n\t\t\t\t\tdisabled\n\t\t\t\t\tkind='secondary'\n\t\t\t\t\trenderIcon={Copy32}\n\t\t\t\t\tclassName={css`margin-right: 18px`}>\n\t\t\t\t\t\tDuplicate\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\tdisabled\n\t\t\t\t\tkind='danger'\n\t\t\t\t\trenderIcon={TrashCan32}>\n\t\t\t\t\t\tDelete\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React, { useContext } from 'react';\nimport { NotificationActionType, NotificationContext } from '../../context/notification-context';\nimport { Modal } from 'carbon-components-react';\nimport { ModalActionType, ModalContext } from '../../context/modal-context';\nimport {\n\tFragmentActionType,\n\tFragmentsContext,\n\tuseFetchOne\n} from '../../context/fragments-context';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { LocalFragmentsContext, LocalFragmentActionType } from '../../context/local-fragments-context';\n\nconst getUniqueName = (fragments: Array<any>, name: string) => {\n\tconst nameRegEx = new RegExp(String.raw`(.*)\\s+(copy)*(\\s+(\\d+))?$`);\n\tconst nameMatch = name.match(nameRegEx);\n\tlet count = 0;\n\n\tlet nameBase = name;\n\t// If match, increment the count and update name base and new name\n\tif (nameMatch) {\n\t\tnameBase = name.replace(nameRegEx, '$1');\n\t\tcount = Number.parseInt(name.replace(nameRegEx, '$4'), 10);\n\t\tif (!count) {\n\t\t\tcount = 0;\n\t\t}\n\t}\n\n\t// Get a list containing names of all duplicates of original fragment\n\t// e.g. [ \"Fragment copy\", \"Fragment copy 1\", \"Fragment copy 7\", ...]\n\tconst names: string[] = [];\n\tfragments.forEach((fragment) => {\n\t\tif (fragment.title.includes(nameBase)) {\n\t\t\tnames.push(fragment.title);\n\t\t}\n\t});\n\n\tif (names.length <= 1) {\n\t\t// because the fragment we're copying is already in there\n\t\treturn `${nameBase} copy`;\n\t}\n\n\tconst highestNumber = names\n\t\t.map((n) => Number.parseInt(n.replace(nameRegEx, '$4'), 10))\n\t\t.filter((n) => !isNaN(n)).sort((a, b) => b - a)\n\t\t.shift();\n\n\treturn `${nameBase} copy ${highestNumber && count < highestNumber ? highestNumber + 1 : count + 1}`;\n};\n\n// In the case that fragment modal is used in the dashboard the full fragment containing options and data\n// can't be passed in, so fragment id is passed in and `useFragment` is used within this component.\nexport const DuplicateFragmentModal = ({ id }: any) => {\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst [, dispatchNotification] = useContext(NotificationContext);\n\tconst [, updateLocalFragments] = useContext(LocalFragmentsContext);\n\tconst [fragmentsState, dispatch] = useContext(FragmentsContext);\n\tuseFetchOne(id, dispatch);\n\tconst history = useHistory();\n\tconst location = useLocation();\n\n\tconst fragment = fragmentsState.fragments.find((fragment: any) => fragment.id === id);\n\n\tconst duplicateFragment = () => {\n\t\tif (fragmentsState.currentlyProcessing) {\n\t\t\treturn;\n\t\t}\n\t\t// copy current fragment and change fragment title\n\t\tconst fragmentCopy = JSON.parse(JSON.stringify(fragment));\n\t\tfragmentCopy.title = getUniqueName(fragmentsState.fragments, fragmentCopy.title);\n\t\tfragmentCopy.id = `${Math.random().toString().slice(2)}${Math.random().toString().slice(2)}`;\n\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.ADD_ONE,\n\t\t\tdata: fragmentCopy,\n\t\t\tloaded: true\n\t\t});\n\t\tupdateLocalFragments({\n\t\t\ttype: LocalFragmentActionType.ADD,\n\t\t\tdata: { id: fragmentCopy.id }\n\t\t});\n\t\tif (location.pathname !== '/') {\n\t\t\thistory.push(`/edit/${fragmentCopy.id}`);\n\t\t}\n\t\tdispatchNotification({\n\t\t\ttype: NotificationActionType.ADD_NOTIFICATION,\n\t\t\tdata: {\n\t\t\t\tkind: 'success',\n\t\t\t\ttitle: 'Duplication success',\n\t\t\t\tmessage: `'${fragmentCopy.title}  has been duplicated from '${fragment.title}'.`\n\t\t\t}\n\t\t});\n\t\tdispatchModal({ type: ModalActionType.closeModal });\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\tsize='sm'\n\t\t\topen={modalState.ShowModal}\n\t\t\tonRequestClose={() => dispatchModal({ type: ModalActionType.closeModal })}\n\t\t\tsecondaryButtonText='Cancel'\n\t\t\tmodalHeading='Duplicate fragment?'\n\t\t\tprimaryButtonText='Duplicate'\n\t\t\tprimaryButtonDisabled={!!fragmentsState.currentlyProcessing}\n\t\t\tonRequestSubmit={() => duplicateFragment()}>\n\t\t\t<p>\n\t\t\t\tClick <strong>Duplicate</strong> to begin to edit a copy of the current fragment\n\t\t\t\tor <strong>Cancel</strong> to continue on this fragment.\n\t\t\t</p>\n\t\t</Modal>\n\t);\n};\n","import React, { useContext } from 'react';\n\nimport { Modal } from 'carbon-components-react';\nimport { ModalActionType, ModalContext } from '../../context/modal-context';\nimport {\n\tFragmentActionType,\n\tFragmentsContext,\n\tuseFetchOne\n} from '../../context/fragments-context';\nimport { useHistory } from 'react-router-dom';\nimport { NotificationActionType, NotificationContext } from '../../context/notification-context';\n\nexport const DeleteFragmentModal = ({ id }: any) => {\n\tconst [fragmentsState, dispatch] = useContext(FragmentsContext);\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst history = useHistory();\n\tconst [, dispatchNotification] = useContext(NotificationContext);\n\tconst fragment = fragmentsState.fragments.find((fragment: any) => fragment.id === id);\n\tuseFetchOne(id, dispatch);\n\n\n\tconst deleteFragment = () => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.TOGGLE_VISIBILITY,\n\t\t\tid,\n\t\t\thidden: true,\n\t\t\tloaded: true\n\t\t});\n\t\thistory.push('/');\n\t\tdispatchNotification({\n\t\t\ttype: NotificationActionType.ADD_NOTIFICATION,\n\t\t\tdata: {\n\t\t\t\tkind: 'error',\n\t\t\t\ttitle: 'Fragment deleted!',\n\t\t\t\tmessage: `Fragment '${fragment.title}' has been permanently deleted.`,\n\t\t\t\taction: {\n\t\t\t\t\tactionText: 'Undo',\n\t\t\t\t\tactionFunction: undoHideFragment,\n\t\t\t\t\tonNotificationClose: doDeleteFragment\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tdispatchModal({ type: ModalActionType.closeModal });\n\t};\n\n\tconst undoHideFragment = () => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.TOGGLE_VISIBILITY,\n\t\t\tid,\n\t\t\thidden: false,\n\t\t\tloaded: true\n\t\t});\n\t};\n\n\tconst doDeleteFragment = () => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.REMOVE_FRAGMENT,\n\t\t\tid\n\t\t});\n\t};\n\n\n\treturn (\n\t\t<Modal\n\t\t\tsize='sm'\n\t\t\topen={modalState.ShowModal}\n\t\t\tonRequestClose={() => { dispatchModal({ type: ModalActionType.closeModal }); }}\n\t\t\tsecondaryButtonText='Cancel'\n\t\t\tmodalHeading='Delete this fragment?'\n\t\t\tdanger\n\t\t\tprimaryButtonText='Delete'\n\t\t\tonRequestSubmit={() => deleteFragment()}>\n\t\t\t<p>\n\t\t\t\tClick <strong>Cancel</strong> to go back to editing your fragment\n\t\t\t\tor <strong>Delete</strong> to remove it permanently.\n\t\t\t</p>\n\t\t</Modal>\n\t);\n};\n","import React, { useState, useContext } from 'react';\nimport {\n\tModal,\n\tTextInput,\n\tCheckbox,\n\tTooltipDefinition\n} from 'carbon-components-react';\nimport { ModalActionType, ModalContext } from '../../context/modal-context';\nimport { FragmentActionType, FragmentsContext } from '../../context/fragments-context';\nimport './fragment-modal.scss';\n\nexport const SettingsFragmentModal = ({ fragment }: any) => {\n\tconst [modalState, dispatchModal] = useContext(ModalContext);\n\tconst [, dispatch] = useContext(FragmentsContext);\n\n\tconst props = {\n\t\tsize: 'sm',\n\t\topen: modalState.ShowModal,\n\t\tonRequestClose: () => dispatchModal({ type: ModalActionType.closeModal }),\n\t\tsecondaryButtonText: 'Cancel'\n\t};\n\n\tconst [title, setTitle] = useState(fragment.title);\n\tconst [isTemplate, setIsTemplate] = useState(fragment.labels && fragment.labels.includes('template'));\n\n\tconst updateFragmentSettings = () => {\n\t\tlet labels = fragment.labels || [];\n\n\t\t// Add or remove 'template' label for the fragment if set template is checked\n\t\tif (isTemplate) {\n\t\t\tif(!labels.includes('template')) {\n\t\t\t\tlabels = [...labels, 'template'];\n\t\t\t}\n\t\t} else {\n\t\t\t// if the set template is unchecked, remove the 'template' label\n\t\t\tlabels = labels.filter((label: string) => label !== 'template');\n\t\t}\n\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.UPDATE_ONE,\n\t\t\tdata: {\n\t\t\t\t...fragment,\n\t\t\t\ttitle,\n\t\t\t\tlabels\n\t\t\t},\n\t\t\tloaded: true\n\t\t});\n\n\t\tdispatchModal({ type: ModalActionType.closeModal });\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\t{...props}\n\t\t\thasForm\n\t\t\tmodalHeading='Edit fragment settings'\n\t\t\tprimaryButtonText='Save'\n\t\t\tonRequestSubmit={() => updateFragmentSettings()} >\n\t\t\t<TextInput\n\t\t\t\tid='fragmentName'\n\t\t\t\tlabelText='Fragment name'\n\t\t\t\tdefaultValue={title}\n\t\t\t\tonChange={(event: any) => setTitle(event.target.value)}/>\n\t\t\t<Checkbox\n\t\t\t\tid='setFragmentAsTemplate'\n\t\t\t\tchecked={isTemplate}\n\t\t\t\tlabelText='Make this fragment a &nbsp;'\n\t\t\t\tonChange={(event: any) => setIsTemplate(event)}/>\n\t\t\t<TooltipDefinition\n\t\t\t\ttooltipText='Setting a fragment as a template makes it an easy starting point\n\t\t\t\tfor future fragments.'\n\t\t\t\tdirection='bottom'>\n\t\t\t\ttemplate\n\t\t\t</TooltipDefinition>\n\t\t</Modal>\n\t);\n};\n","import { ModalType, ModalContext } from '../../context/modal-context';\nimport { ShareOptionsModal } from './share-options/share-options-modal';\nimport { DuplicateFragmentModal } from './duplicate-fragment-modal';\nimport { DeleteFragmentModal } from './delete-fragment-modal';\nimport { SettingsFragmentModal } from './settings-fragment-modal';\nimport React, { useContext } from 'react';\nimport { FragmentsContext, useFetchOne } from '../../context/fragments-context';\n\n// eslint-disable-next-line react/prop-types\nexport const FragmentModal = ({ fragment }: any) => {\n\tconst [, dispatch] = useContext(FragmentsContext);\n\t// eslint-disable-next-line react/prop-types\n\tuseFetchOne(fragment.id, dispatch);\n\tconst [modalState] = useContext(ModalContext);\n\n\tswitch (modalState.ModalType) {\n\t\tcase ModalType.DUPLICATION:\n\t\t\treturn (\n\t\t\t// In the case that fragment modal is used in the dashboard the full fragment containing options and\n\t\t\t// data can't be passed in, so we use fragment id and fetch it\n\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\t\t<DuplicateFragmentModal id={fragment.id}/>\n\t\t\t);\n\t\tcase ModalType.SHARING:\n\t\t\treturn (\n\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\t\t<ShareOptionsModal fragment={fragment} />\n\t\t\t);\n\t\tcase ModalType.DELETION:\n\t\t\treturn (\n\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\t\t<DeleteFragmentModal id={fragment.id} />\n\t\t\t);\n\t\tcase ModalType.SETTINGS:\n\t\t\treturn (\n\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\t\t<SettingsFragmentModal fragment={fragment} />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn null;\n\t}\n};\n","import React, { useContext } from 'react';\nimport { css } from 'emotion';\nimport { Button } from 'carbon-components-react';\nimport {\n\tCopy16,\n\tDelete16,\n\tSettings16,\n\tShare16\n} from '@carbon/icons-react';\nimport { ModalContext, ModalActionType } from '../../context/modal-context';\nimport { FragmentModal } from './fragment-modal';\n\nconst editHeader = css`\n\tleft: 16rem;\n\tbackground: #fff;\n\tbox-shadow: inset 0px -1px #d8d8d8;\n\n\t.edit-wrapper {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\t.title-wrap {\n\t\t\theight: 3rem;\n\t\t\tmargin-left: 3rem;\n\t\t\tdisplay: flex;\n\t\t\talign-self: center;\n\t\t\tflex-flow: column;\n\t\t}\n\t\t.title-subheading {\n\t\t\tdisplay: inline-flex;\n\t\t\t.bx--inline-loading {\n\t\t\t\twidth: auto;\n\t\t\t\tposition: relative;\n\t\t\t\tmargin-left: 10px;\n\t\t\t\ttop: -10px;\n\t\t\t}\n\t\t\t.date-wrap {\n\t\t\t\tfont-size: 12px;\n\t\t\t\tfont-style: italic;\n\t\t\t\tcolor: black;\n\t\t\t\tpadding-left: 12px;\n\t\t\t}\n\t\t}\n\t\t.fragment-title {\n\t\t\twhitespace: nowrap;\n\t\t\tfont-weight: bold;\n\t\t\tpadding-left: 12px;\n\t\t\tpadding-right: 16px;\n\t\t\tfloat: left;\n\t\t}\n\t\t.fragment-edit {\n\t\t\tmargin-top: 6px;\n\t\t\tcursor: pointer;\n\t\t}\n\t}\n\n\t// This is the viewport width that causes the loading and\n\t// store to local fragments checkbox to overlap.\n\t@media screen and (max-width: 67.0625rem) {\n\t\t.edit-wrapper {\n\t\t\t.title-subheading {\n\t\t\t\tflex-flow: column;\n\t\t\t\t.bx--inline-loading {\n\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// This is the viewport width that causes the store to local\n\t// fragments checkbox and last modified label to overlap.\n\t@media screen and (max-width: 58.125rem) {\n\t\t.edit-wrapper {\n\t\t\tflex-direction: column;\n\t\t\t.title-wrap {\n\t\t\t\tmargin-top: 10px;\n\t\t\t\talign-self: auto;\n\t\t\t}\n\t\t\t.title-subheading {\n\t\t\t\tflex-direction: row;\n\t\t\t\t.bx--inline-loading {\n\t\t\t\t\tmargin-top: 0px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// This is the viewport width that causes the loading and store\n\t// to local fragments to be disfigured.\n\t@media screen and (max-width: 42.6875rem) {\n\t\t.edit-wrapper {\n\t\t\t.title-subheading {\n\t\t\t\tflex-direction: column;\n\t\t\t\t.bx--inline-loading {\n\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n`;\n\nconst toolBarAction = css`\n\tbackground: #f4f4f4;\n\tmargin-right: 13px;\n`;\n\nconst fragmentEditToolBar = css`\n\tdisplay: flex;\n\tmargin-right: 2rem;\n\tmargin-top: 8px;\n\tmargin-bottom: 8px;\n\tbutton {\n\t\theight: 3rem;\n\t}\n\t.toolBarButtons {\n\t\tmin-width: 13.75rem\n\t}\n\t// This is the viewport width that causes the store to local\n\t// fragments checkbox and last modified label to overlap.\n\t@media screen and (max-width: 58.125rem) {\n\t\tmargin-left: 10px;\n\t\tflex-direction: row-reverse;\n\t\tplace-self: start;\n\t}\n\t// This is the viewport width that causes the loading and store\n\t// to local fragments to be disfigured.\n\t@media screen and (max-width: 42.6875rem) {\n\t\tmargin-left: 10px;\n\t\tmargin-top: 20px;\n\t\tflex-direction: column-reverse;\n\t\tplace-self: start;\n\t}\n`;\n\nexport const EditHeader = ({ fragment }: any) => {\n\tconst [, dispatchModal] = useContext(ModalContext);\n\n\treturn (\n\t\t<header\n\t\t\tclassName={editHeader}\n\t\t\taria-label={`Header for '${fragment.title}'`}\n\t\t\trole='banner'\n\t\t\ttabIndex={0}>\n\t\t\t<div className='edit-wrapper'>\n\t\t\t\t<div className='title-wrap'>\n\t\t\t\t\t<p className='fragment-title'>{fragment.title}</p>\n\n\t\t\t\t\t<div className='title-subheading'>\n\t\t\t\t\t\t<div className='date-wrap'>{`Last modified ${ fragment.lastModified}`}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className={fragmentEditToolBar}>\n\t\t\t\t\t<div className='toolBarButtons'>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkind='ghost'\n\t\t\t\t\t\t\taria-label='Duplicate fragment'\n\t\t\t\t\t\t\ttitle='Duplicate fragment'\n\t\t\t\t\t\t\tonClick={() => dispatchModal({\n\t\t\t\t\t\t\t\ttype: ModalActionType.setDuplicationModal,\n\t\t\t\t\t\t\t\tid: fragment.id\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={toolBarAction}>\n\t\t\t\t\t\t\t<Copy16 fill=\"black\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkind='ghost'\n\t\t\t\t\t\t\taria-label='Delete fragment'\n\t\t\t\t\t\t\ttitle='Delete fragment'\n\t\t\t\t\t\t\tonClick={() => dispatchModal({\n\t\t\t\t\t\t\t\ttype: ModalActionType.setDeletionModal,\n\t\t\t\t\t\t\t\tid: fragment.id\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={toolBarAction}>\n\t\t\t\t\t\t\t<Delete16 fill=\"black\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkind='ghost'\n\t\t\t\t\t\t\taria-label='Share fragment'\n\t\t\t\t\t\t\ttitle='Share fragment'\n\t\t\t\t\t\t\tonClick={() => dispatchModal({\n\t\t\t\t\t\t\t\ttype: ModalActionType.setShareModal,\n\t\t\t\t\t\t\t\tid: fragment.id\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={toolBarAction}>\n\t\t\t\t\t\t\t<Share16 fill=\"black\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tkind='ghost'\n\t\t\t\t\t\t\taria-label='Fragment settings'\n\t\t\t\t\t\t\ttitle='Fragment settings'\n\t\t\t\t\t\t\tonClick={() => dispatchModal({\n\t\t\t\t\t\t\t\ttype: ModalActionType.setSettingsModal,\n\t\t\t\t\t\t\t\tid: fragment.id\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tclassName={toolBarAction}>\n\t\t\t\t\t\t\t<Settings16 fill=\"black\" />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<FragmentModal fragment={fragment} />\n\t\t</header>\n\t);\n};\n","import React from 'react';\nimport { css } from 'emotion';\n\nimport { drag } from '../routes/edit/tools';\n\nconst elementTileStyle = css`\n\tborder: 1px solid #d8d8d8;\n\tmin-width: 127px;\n\theight: 127px;\n\tdisplay: inline-flex;\n\tmargin-bottom: 1rem;\n\tflex-direction: column;\n\n\timg {\n\t\tmargin: auto;\n\t}\n\n\t.title {\n\t\ttext-align: center;\n\t\twidth: 100%;\n\t\tmargin: 0 1rem auto auto;\n\t}\n`;\n\nexport const ElementTile = ({children, componentObj}: any) => {\n\treturn (<div\n\t\tclassName={elementTileStyle}\n\t\tdraggable='true'\n\t\tonDragStart={(event: any) => drag(event, {\n\t\t\tcomponent: componentObj\n\t\t})}>\n\t\t{children}\n\t</div>);\n};\n","import React, { useState } from 'react';\nimport { css, cx } from 'emotion';\nimport { Search } from 'carbon-components-react';\n\nimport { ElementTile } from '../../components/element-tile';\n\nimport buttonImg from './../../assets/component-icons/button.svg';\nimport checkboxImg from './../../assets/component-icons/checkbox.svg';\nimport gridImg from './../../assets/component-icons/grid.svg';\nimport textAreaImg from './../../assets/component-icons/text-area.svg';\nimport textInputImg from './../../assets/component-icons/text-input.svg';\nimport textImg from './../../assets/component-icons/text.svg';\n\nimport { leftPane } from '.';\n\nconst searchStyle = css`\n\tmargin-top: 15px;\n\tmargin-bottom: 30px;\n`;\n\nconst elementTileListStyle = css`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tflex-wrap: wrap;\n`;\n\nexport const ElementsPane = ({isActive}: any) => {\n\tconst [filterString, setFilterString] = useState('');\n\n\t/**\n\t * Returns true if element should show\n\t *\n\t * @param matches a list of strings that represent the component user might search for\n\t */\n\tconst shouldShow = (matches: string[]) => {\n\t\treturn !filterString || matches.some((match) => match.includes(filterString));\n\t};\n\n\treturn (\n\t\t<div className={cx(leftPane, isActive ? 'is-active' : '')}>\n\t\t\tElements\n\t\t\t<Search\n\t\t\t\tid='elements-search'\n\t\t\t\tclassName={searchStyle}\n\t\t\t\tlight\n\t\t\t\tlabelText='Filter elements'\n\t\t\t\tplaceHolderText='Filter elements'\n\t\t\t\tonChange={(event: any) => setFilterString(event.target.value)} />\n\t\t\t<div className={elementTileListStyle}>\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['button']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\tkind: 'primary',\n\t\t\t\t\t\ttext: 'Button'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={buttonImg} alt='button'/>\n\t\t\t\t\t\t<span className='title'>Button</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['checkbox', 'check box']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\tlabel: 'Checkbox'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={checkboxImg} alt='checkbox'/>\n\t\t\t\t\t\t<span className='title'>Checkbox</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['text']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\ttext: 'Text'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={textImg} alt='text'/>\n\t\t\t\t\t\t<span className='title'>Text</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['textarea', 'text area']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'textarea',\n\t\t\t\t\t\tlabel: 'Text area label',\n\t\t\t\t\t\tplaceholder: 'Text area placeholder',\n\t\t\t\t\t\thelperText: 'Helper text'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={textAreaImg} alt='text area'/>\n\t\t\t\t\t\t<span className='title'>Text area</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['textinput', 'text input']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'textinput',\n\t\t\t\t\t\tlabel: 'Text input label',\n\t\t\t\t\t\tplaceholder: 'Text input placeholder',\n\t\t\t\t\t\thelperText: 'Helper text',\n\t\t\t\t\t\tinputType: 'text'\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={textInputImg} alt='text input'/>\n\t\t\t\t\t\t<span className='title'>Text input</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tshouldShow(['grid', 'row', 'column']) && <ElementTile componentObj={{\n\t\t\t\t\t\ttype: 'grid',\n\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'row', items: [\n\t\t\t\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'A' }]},\n\t\t\t\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'B' }]}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: 'row', items: [\n\t\t\t\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'C' }]},\n\t\t\t\t\t\t\t\t\t{ type: 'column', items: [{ type: 'text', text: 'D' }]}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<img src={gridImg} alt='grid'/>\n\t\t\t\t\t\t<span className=\"title\">Grid</span>\n\t\t\t\t\t</ElementTile>\n\t\t\t\t}\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { cx } from 'emotion';\nimport { leftPane } from '.';\n\nexport const StylePane = ({isActive}: any) => {\n\treturn (\n\t\t<div className={cx(leftPane, isActive ? 'is-active' : '')}>\n\t\t\tStyle\n\t\t\t<br /><br /> <strong>Comming soon!</strong>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { cx } from 'emotion';\nimport { leftPane } from '.';\n\nexport const CodePane = ({isActive}: any) => {\n\treturn (\n\t\t<div className={cx(leftPane, isActive ? 'is-active' : '')}>\n\t\t\tCode\n\t\t\t<br /><br /> <strong>Comming soon!</strong>\n\t\t</div>\n\t);\n};\n","import React from 'react';\nimport { cx } from 'emotion';\nimport { leftPane } from '.';\n\nexport const ExportPane = ({isActive}: any) => {\n\treturn (\n\t\t<div className={cx(leftPane, isActive ? 'is-active' : '')}>\n\t\t\tExport\n\t\t\t<br /><br /> <strong>Comming soon!</strong>\n\t\t</div>\n\t);\n};\n","import React from 'react';\n\nimport { Breadcrumb, BreadcrumbItem } from 'carbon-components-react';\n\nimport { getParentComponent, getSelectedComponent } from '../../components/fragment';\nimport { useFragment } from '../../context';\n\nconst getAncestors = (state: any, component: any) => {\n\tconst ancestors: any[] = [];\n\n\t// there's probably a way to optimize this function\n\n\tif (state === component) {\n\t\treturn ancestors;\n\t}\n\n\tlet parent = component;\n\n\tdo {\n\t\tparent = getParentComponent(state, parent);\n\t\tancestors.unshift(parent)\n\t} while (parent !== state);\n\n\treturn ancestors;\n}\n\nexport const SelectedComponentBreadcrumbs = ({selectedComponent}: any) => {\n\tconst [fragment, setFragment] = useFragment();\n\n\tif (!selectedComponent) {\n\t\tselectedComponent = getSelectedComponent(fragment);\n\t}\n\n\tconst selectComponent = (component: any) => {\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tselectedComponentId: component.id\n\t\t}, true);\n\t};\n\n\treturn selectedComponent && <Breadcrumb noTrailingSlash>\n\t\t{getAncestors(fragment.data, selectedComponent).map(component =>\n\t\t\t<BreadcrumbItem\n\t\t\thref=\"#\"\n\t\t\tisCurrentPage={!component.type}\n\t\t\tonClick={(event: any) => {\n\t\t\t\tevent.nativeEvent.preventDefault();\n\t\t\t\tif (!component.type) {\n\t\t\t\t\t// happens when clicking root element\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tselectComponent(component)\n\t\t\t}}>\n\t\t\t\t{component.type || 'root'}\n\t\t\t</BreadcrumbItem>\n\t\t)}\n\t\t<BreadcrumbItem href=\"#\" onClick={(event: any) => event.nativeEvent.preventDefault()} isCurrentPage>\n\t\t\t{selectedComponent.type}\n\t\t</BreadcrumbItem>\n\t</Breadcrumb>;\n};\n","import React from 'react';\n\nimport { getSelectedComponent, updatedState } from '../../components/fragment';\n\nimport {\n\tAButtonStyleUI,\n\tACheckboxStyleUI,\n\tAGridStyleUI,\n\tATextStyleUI,\n\tATextAreaStyleUI,\n\tATextInputStyleUI,\n\tARowStyleUI,\n\tAColumnStyleUI\n} from '../../fragment-components';\n\nimport { SelectedComponentBreadcrumbs } from './selected-component-breadcrumbs';\n\nconst showComponentStyleOptions = (selectedComponent: any, setComponent: any) => {\n\tswitch (selectedComponent.type) {\n\t\tcase 'text':\n\t\t\treturn <ATextStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tcase 'button':\n\t\t\treturn <AButtonStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tcase 'checkbox':\n\t\t\treturn <ACheckboxStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tcase 'grid':\n\t\t\treturn <AGridStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tcase 'row':\n\t\t\treturn <ARowStyleUI selectedComponent={selectedComponent} setComponent={setComponent}/>\n\n\t\tcase 'column':\n\t\t\treturn <AColumnStyleUI selectedComponent={selectedComponent} setComponent={setComponent}/>\n\n\t\tcase 'textarea':\n\t\t\treturn <ATextAreaStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tcase 'textinput':\n\t\t\treturn <ATextInputStyleUI selectedComponent={selectedComponent} setComponent={setComponent} />\n\n\t\tdefault:\n\t\t\tbreak;\n\t}\n};\n\nexport const StyleContextPane = ({fragment, setFragment}: any) => {\n\tconst selectedComponent = getSelectedComponent(fragment);\n\n\tconst setComponent = (component: any) => {\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tdata: updatedState(fragment.data, {\n\t\t\t\ttype: 'update',\n\t\t\t\tcomponent\n\t\t\t})\n\t\t});\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\tselectedComponent && <>\n\t\t\t\t\t<SelectedComponentBreadcrumbs\n\t\t\t\t\t\tfragment={fragment}\n\t\t\t\t\t\tselectedComponent={selectedComponent}\n\t\t\t\t\t\tsetFragment={setFragment} />\n\t\t\t\t\t<hr />\n\t\t\t\t\t<div className='context-pane-content'>\n\t\t\t\t\t\t{showComponentStyleOptions(selectedComponent, setComponent)}\n\t\t\t\t\t</div>\n\t\t\t\t</>\n\t\t\t}\n\t\t</div>\n\t);\n};\n","import React from 'react';\n\nimport {\n\tAComponentCodeUI,\n\tATextInputCodeUI,\n\tATextAreaCodeUI,\n\tACheckboxCodeUI\n} from '../../fragment-components';\n\nimport { getSelectedComponent, updatedState } from '../../components/fragment';\n\nconst showComponentCodeOptions = (selectedComponent: any, setComponent: any) => {\n\tswitch (selectedComponent.type) {\n\t\tcase 'textinput':\n\t\t\treturn <ATextInputCodeUI selectedComponent={selectedComponent} setComponent={setComponent} />;\n\n\t\tcase 'textarea':\n\t\t\treturn <ATextAreaCodeUI selectedComponent={selectedComponent} setComponent={setComponent} />;\n\n\t\tcase 'checkbox':\n\t\t\treturn <ACheckboxCodeUI selectedComponent={selectedComponent} setComponent={setComponent} />;\n\n\t\tdefault:\n\t\t\treturn <AComponentCodeUI selectedComponent={selectedComponent} setComponent={setComponent} />;\n\t}\n};\n\nexport const CodeContextPane = ({fragment, setFragment}: any) => {\n\tconst selectedComponent = getSelectedComponent(fragment);\n\n\tconst setComponent = (component: any) => {\n\t\tsetFragment({\n\t\t\t...fragment,\n\t\t\tdata: updatedState(fragment.data, {\n\t\t\t\ttype: 'update',\n\t\t\t\tcomponent\n\t\t\t})\n\t\t});\n\t};\n\n\treturn (\n\t\t<div className='context-pane-content'>\n\t\t\t{selectedComponent && showComponentCodeOptions(selectedComponent, setComponent)}\n\t\t</div>\n\t);\n};\n","import React from 'react';\n\nimport {\n\tButton,\n\tOverflowMenu,\n\tOverflowMenuItem,\n\tSearch\n} from 'carbon-components-react';\n\nimport {\n\tAdd16,\n\tArrowsVertical16,\n\tCheckmarkFilled16\n\t//  Under construction, add in later \n\t// SettingsAdjust16\n} from '@carbon/icons-react';\n\nimport { css } from 'emotion';\n\nconst dashboardSearchWrapper = css`\n\tdisplay: flex;\n\twidth: 100%;\n\n\t// 520px is the point which the search bar becomes too small to display the full text, moves\n\t// the sort, share, and add button below the search bar at this point.\n\t@media screen and (max-width: 520px) {\n\t\tflex-wrap: wrap;\n\t}\n`;\n\nconst searchInput = css`\n\tinput {\n\t\tborder-bottom: none;\n\n\t\t@media screen and (max-width: 520px) {\n\t\t\tmargin-bottom: 15px;\n\t\t}\n\t}\n`;\n\nconst sortButton = css`\n\theight: 3rem;\n\twidth: 3rem;\n\tbackground-color: #f4f4f4;\n`;\n\nconst sortOverflowItem = css`\n\tsvg {\n\t\ttransform: translate(7px, 1.5px);\n\t}\n`;\n\n//  Under construction, add in later \n// const shareButton = css`\n// \theight: 3rem;\n// \twidth: 3rem;\n// \tbackground-color: #f4f4f4;\n// `;\n\nexport enum SortDirection {\n\tAscending,\n\tDescending\n}\n\nexport const DashboardSearch = ({\n\tonSearchHandler,\n\tonSortHandler,\n\tdisplayWizard,\n\tsetDisplayWizard,\n\tsortDirection\n}: any) => (\n\t<div className={dashboardSearchWrapper}>\n\t\t<Search\n\t\t\tlabelText='Fragment'\n\t\t\tplaceHolderText='Search fragments'\n\t\t\tclassName={searchInput}\n\t\t\tonChange={(event: any) => onSearchHandler(event.target.value)} />\n\t\t<OverflowMenu\n\t\t\tclassName={sortButton}\n\t\t\tariaLabel='Sort fragment'\n\t\t\trenderIcon = {() => <ArrowsVertical16 />}\n\t\t\tonClick={(event: { stopPropagation: () => void; }) => { event.stopPropagation(); }}>\n\t\t\t<OverflowMenuItem\n\t\t\t\titemText={(\n\t\t\t\t\t<div className={sortOverflowItem}>\n\t\t\t\t\t\tNewest to oldest\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsortDirection === SortDirection.Ascending\n\t\t\t\t\t\t\t\t? <CheckmarkFilled16 />\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tonClick={() => {onSortHandler(SortDirection.Ascending);}} />\n\t\t\t<OverflowMenuItem\n\t\t\t\titemText={(\n\t\t\t\t\t<div className={sortOverflowItem}>\n\t\t\t\t\t\tOldest to newest\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsortDirection === SortDirection.Descending\n\t\t\t\t\t\t\t\t? <CheckmarkFilled16 />\n\t\t\t\t\t\t\t\t: null\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\tonClick={() => {onSortHandler(SortDirection.Descending);}} />\n\t\t</OverflowMenu>\n\t\t{/*  Under construction, add in later  */}\n\t\t{/* <Button kind='ghost' className={shareButton}><SettingsAdjust16 /></Button> */}\n\t\t<Button\n\t\t\tonClick={() => { setDisplayWizard(!displayWizard); }}\n\t\t\ttitle='Add new fragment'\n\t\t\taria-label='Add new fragment'>\n\t\t\tNew fragment\n\t\t\t<Add16 className='bx--btn__icon'/>\n\t\t</Button>\n\t</div>\n);\n","import React from 'react';\nimport { css } from 'emotion';\nimport { ContentSwitcher, Switch } from 'carbon-components-react';\n\n// keep the enum order same as the switch order so context switcher\n// knows to select the correct one. Shout if you have a cleaner alternative.\nexport enum FragmentGroupDisplayed {\n\tAllFragments,\n\tTemplates,\n\tLocalOnly\n}\n\nconst dashboardHeaderWrapper = css`\n\tdisplay: flex;\n\tmargin: 2rem 0;\n\n\t// 676px is when the content switcher becomes too small to show full text, moves the\n\t// content switcher below the title at this point.\n\t@media screen and (max-width: 676px) {\n\t\tflex-wrap: wrap;\n\t}\n`;\n\nconst fragmentTitle = css`\n\twidth: 100%;\n`;\n\nconst contentSwitcher = css`\n\twidth: 450px;\n`;\n\nexport const DashboardHeader = ({ onDisplayedSwitchHandler, fragmentGroupDisplayed }: any) => (\n\t<div className={dashboardHeaderWrapper}>\n\t\t<h2 className={fragmentTitle}>Fragments</h2>\n\t\t<ContentSwitcher\n\t\t\tclassName={contentSwitcher}\n\t\t\tonChange={(event: any) => onDisplayedSwitchHandler(event.name)}\n\t\t\tselectedIndex={fragmentGroupDisplayed}>\n\t\t\t<Switch name={FragmentGroupDisplayed.AllFragments} text='All fragments' />\n\t\t\t<Switch name={FragmentGroupDisplayed.Templates} text='Templates only' />\n\t\t</ContentSwitcher>\n\t</div>\n);\n","import React, { useContext, useState } from 'react';\n\nimport { FragmentWizardModals } from './fragment-wizard';\n\nimport { Modal } from 'carbon-components-react';\nimport { css } from 'emotion';\nimport { SelectionTile } from '../../../components/selection-tile';\nimport { generateNewFragment } from './generate-new-fragment';\nimport { FragmentActionType, FragmentsContext } from '../../../context';\nimport { LocalFragmentActionType, LocalFragmentsContext } from '../../../context/local-fragments-context';\nimport { useHistory } from 'react-router-dom';\n\nconst createFragmentTiles = css`\n\tdisplay: flex;\n\tmargin-top: 30px;\n\tmargin-left: 15px;\n\tmargin-right: 15px;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n`;\n\nconst createFragmentTile = css`\n\twidth: 48%;\n\theight: 200px;\n\t.bx--tile {\n\t\theight: 100%;\n\t}\n`;\n\nexport enum CreateOptions {\n\tCHOOSE_TEMPLATE,\n\tFROM_SCRATCH,\n\tIMPORT_JSON\n}\n\nexport interface CreateFragmentModalProps {\n\tshouldDisplay: boolean,\n\tsetShouldDisplay: (shouldDisplay: boolean) => void,\n\tsetDisplayedModal: (displayedModal: FragmentWizardModals | null) => void,\n\tsetLastVisitedModal: (lastVisitedModal: FragmentWizardModals) => void\n}\n\nexport const CreateFragmentModal = (props: CreateFragmentModalProps) => {\n\tconst [selectedCreateOption, setSelectedCreateOption] = useState<CreateOptions | null>(null);\n\n\tconst [, updateLocalFragments] = useContext(LocalFragmentsContext);\n\tconst [, dispatch] = useContext(FragmentsContext);\n\n\tconst history = useHistory();\n\n\tconst generateFragment = () => {\n\t\tconst generatedFragment = generateNewFragment(\n\t\t\t{ items: [], id: 1 }\n\t\t);\n\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.ADD_ONE,\n\t\t\tdata: generatedFragment\n\t\t});\n\t\tupdateLocalFragments({\n\t\t\ttype: LocalFragmentActionType.ADD,\n\t\t\tdata: { id: generatedFragment.id }\n\t\t});\n\t\thistory.push(`/edit/${generatedFragment.id}`);\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\topen={props.shouldDisplay}\n\t\t\thasForm\n\t\t\tshouldSubmitOnEnter={false}\n\t\t\tselectorPrimaryFocus='.bx--tile--selectable'\n\t\t\tonSecondarySubmit={() => {\n\t\t\t\tprops.setShouldDisplay(false);\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\tonRequestSubmit={() => {\n\t\t\t\tif (selectedCreateOption === CreateOptions.IMPORT_JSON) {\n\t\t\t\t\t// open modal with file upload\n\t\t\t\t\tprops.setDisplayedModal(FragmentWizardModals.IMPORT_JSON_MODAL);\n\t\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (selectedCreateOption === CreateOptions.FROM_SCRATCH) {\n\t\t\t\t\tgenerateFragment();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tprops.setDisplayedModal(FragmentWizardModals.CHOOSE_FRAGMENT_MODAL);\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\tonRequestClose={() => {\n\t\t\t\tprops.setShouldDisplay(false);\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\tmodalHeading='Create new fragment'\n\t\t\tprimaryButtonText='Next'\n\t\t\tprimaryButtonDisabled={selectedCreateOption === null}\n\t\t\tsecondaryButtonText='Cancel'>\n\t\t\t<p>Start with a template or create a new fragment from scratch.</p>\n\t\t\t<div className={createFragmentTiles}>\n\t\t\t\t<SelectionTile\n\t\t\t\t\tstyles={createFragmentTile}\n\t\t\t\t\tonChange={() => { setSelectedCreateOption(CreateOptions.IMPORT_JSON); }}\n\t\t\t\t\tselected={selectedCreateOption === CreateOptions.IMPORT_JSON}\n\t\t\t\t\tlabel='Import JSON'/>\n\t\t\t\t<SelectionTile\n\t\t\t\t\tstyles={createFragmentTile}\n\t\t\t\t\tonChange={() => { setSelectedCreateOption(CreateOptions.CHOOSE_TEMPLATE); }}\n\t\t\t\t\tselected={selectedCreateOption === CreateOptions.CHOOSE_TEMPLATE}\n\t\t\t\t\tlabel='Pick a template'/>\n\t\t\t\t<SelectionTile\n\t\t\t\t\tstyles={createFragmentTile}\n\t\t\t\t\tonChange={() => { setSelectedCreateOption(CreateOptions.FROM_SCRATCH); }}\n\t\t\t\t\tselected={selectedCreateOption === CreateOptions.FROM_SCRATCH}\n\t\t\t\t\tlabel='Start from scratch'/>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n};\n","import React, { useContext, useEffect, useState } from 'react';\nimport { css } from 'emotion';\nimport { useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport {\n\tOverflowMenu,\n\tOverflowMenuItem,\n\tSkeletonText,\n\tTile\n} from 'carbon-components-react';\nimport { ModalContext, ModalActionType } from '../../context/modal-context';\nimport { getFragmentPreview, RenderProps } from '../../utils/fragment-tools';\n\nconst tileWrapper = css`\n\tmargin: 0.75rem;\n\tpadding: 0;\n\theight: 250px;\n\twidth: 350px;\n\tbox-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.3);\n\tbackground-color: #ffffff;\n\tfloat: left;\n`;\n\nconst tileStyle = css`\n\tpadding: 0;\n\tbackground-color: #ffffff;\n`;\n\nconst tileInnerWrapperBase = css`\n\talign-items: end;\n`;\n\nconst tileInnerWrapper = css`\n\t${tileInnerWrapperBase}\n\tmargin: 8px;\n\th3 {\n\t\tfont-size: 1rem;\n\t\tpadding: 5px;\n\t\tpadding-left: 16px;\n\t}\n\t.dashboard-link {\n\t\tcolor: black;\n\t\ttext-decoration: none;\n\t\ttransition: 0.3s;\n\t}\n\t.dashboard-link:hover {\n\t\topacity: 0.6;\n\t\tcolor: #6f6f6f;\n\t\tcursor: pointer;\n\t}\n\tspan {\n\t\tpadding-left: 16px;\n\t\tfont-style: italic;\n\t\tfont-size: 0.75rem;\n\t}\n`;\n\nconst fragmentImage = css`\n\twidth: auto;\n\theight: auto;\n\tmax-height: 173px;\n\tmax-width: 333px;\n\tdisplay: block;\n\tpadding-top: 8px;\n`;\nconst fragmentOverflow = css`\n\tright: 5px;\n\tposition: absolute;\n\tmargin-top: 1rem;\n\tpadding: 5px;\n`;\nconst fragmentInfo = css`\n\tdisplay: flex;\n`;\n\nexport const FragmentTile = ({\n\tfragment,\n\ttitle,\n\tto,\n\tlastModified,\n\tsetModalFragment\n}: any) => {\n\tconst history = useHistory();\n\tconst [, dispatchModal] = useContext(ModalContext);\n\tconst [previewUrl, setPreviewUrl] = useState('');\n\tconst handleModalState = (modalAction: ModalActionType) => {\n\t\tsetModalFragment(fragment);\n\t\tdispatchModal({\n\t\t\ttype: modalAction,\n\t\t\tid: fragment.id\n\t\t});\n\t};\n\n\tconst renderProps: RenderProps = {\n\t\tid: fragment.id,\n\t\tname: fragment.title,\n\t\twidth: 800,\n\t\theight: 400,\n\t\tpreview: {\n\t\t\tformat: 'png',\n\t\t\twidth: 330,\n\t\t\theight: 200\n\t\t}\n\t};\n\n\tconst resetPreview = async () => {\n\t\tconst imageBlob = await getFragmentPreview(fragment, renderProps);\n\t\tconst reader = new FileReader();\n\t\treader.readAsDataURL(imageBlob ? imageBlob : new Blob());\n\t\treader.onloadend = () => {\n\t\t\tconst imageUrl: string = reader.result ? reader.result.toString() : '';\n\t\t\tsetPreviewUrl(imageUrl);\n\t\t};\n\t}\n\n\tuseEffect(() => {\n\t\tresetPreview();\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [])\n\n\treturn (\n\t\t<div className={tileWrapper}>\n\t\t\t<Tile className={tileStyle} >\n\t\t\t\t<div className={tileInnerWrapper}>\n\t\t\t\t\t<Link to={to}>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tloading='lazy'\n\t\t\t\t\t\t\tsrc={previewUrl}\n\t\t\t\t\t\t\tclassName={fragmentImage}\n\t\t\t\t\t\t\talt={`fragment preview: ${title}`} />\n\t\t\t\t\t</Link>\n\t\t\t\t\t<div className={fragmentInfo}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Link to={to} className='dashboard-link'>\n\t\t\t\t\t\t\t\t<h3>{title}</h3>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<span>{lastModified ? lastModified : 'Last modified date unknown'}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<OverflowMenu\n\t\t\t\t\t\t\tclassName={fragmentOverflow}\n\t\t\t\t\t\t\tariaLabel='Fragment options'\n\t\t\t\t\t\t\ticonDescription=''\n\t\t\t\t\t\t\tonClick={\n\t\t\t\t\t\t\t\t(event: { stopPropagation: () => void; }) => { event.stopPropagation(); }\n\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t<OverflowMenuItem\n\t\t\t\t\t\t\t\titemText='Edit'\n\t\t\t\t\t\t\t\tonClick={() => { history.push(`/edit/${fragment.id}`); }}/>\n\t\t\t\t\t\t\t<OverflowMenuItem\n\t\t\t\t\t\t\t\titemText='Export'\n\t\t\t\t\t\t\t\tonClick={() => { handleModalState(ModalActionType.setShareModal); }}/>\n\t\t\t\t\t\t\t<OverflowMenuItem\n\t\t\t\t\t\t\t\titemText='Duplicate'\n\t\t\t\t\t\t\t\tonClick={() => { handleModalState(ModalActionType.setDuplicationModal); }}/>\n\t\t\t\t\t\t\t<OverflowMenuItem\n\t\t\t\t\t\t\t\titemText='Reset preview'\n\t\t\t\t\t\t\t\tonClick={resetPreview}/>\n\t\t\t\t\t\t\t<OverflowMenuItem\n\t\t\t\t\t\t\t\titemText='Remove'\n\t\t\t\t\t\t\t\tonClick={() => { handleModalState(ModalActionType.setDeletionModal); }}\n\t\t\t\t\t\t\t\tisDelete />\n\t\t\t\t\t\t</OverflowMenu>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Tile>\n\t\t</div>\n\t);\n};\n\nexport const SkeletonFragmentTile = () => (\n\t<div className={tileWrapper}>\n\t\t<Tile>\n\t\t\t<div className={tileInnerWrapperBase}>\n\t\t\t\t<SkeletonText heading width='150px' />\n\t\t\t</div>\n\t\t</Tile>\n\t</div>\n);\n","import React from 'react';\nimport { css } from 'emotion';\n\nimport { FragmentTile, SkeletonFragmentTile } from './fragment-tile';\n\n// import the img placeholder svg\nimport placeholder from './../../assets/dashboard-empty-state.svg';\n\n// styles for placeholder\nconst svgStyle = css`\n\twidth: 25vw;\n\theight: auto;\n\tmax-width: 400px;\n`;\n\nconst placeholderContainer = css`\n\tmargin-top: 48px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: calc(100vh - 48px);\n\tpadding: 24px;\n\tpadding-top: 150px;\n\talign-items: center;\n`;\n\nconst fragmentRowWrapper = css`\n\tmargin-top: 3rem;\n\tbackground: #f4f4f4;\n\tmin-width: 100%;\n\theight: 100%\n`;\n\nexport const FragmentTileList = ({ fragments, loaded, setModalFragment }: any) => {\n\tconst getTilesOrPlaceholder = () => {\n\t\tif ((!fragments || fragments.length === 0) && loaded) {\n\t\t\treturn (\n\t\t\t\t<div className={placeholderContainer}>\n\t\t\t\t\t<div style={{ textAlign: 'left' }}>\n\t\t\t\t\t\t<img alt=\"No fragments exist\" src={placeholder} className={svgStyle} />\n\t\t\t\t\t\t<h3>You have no fragments here.</h3>\n\t\t\t\t\t\t<p style={{ marginTop: '0.5em' }}>\n\t\t\t\t\t\t\tTo build a new fragment, click <strong>New Fragment</strong>.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\tif (!loaded) {\n\t\t\t// make a new array and fill it with 0 to 4\n\t\t\tconst count = (new Array(5)).fill(0).map((_, i) => i);\n\t\t\treturn count.map((i) => <SkeletonFragmentTile key={i}/>);\n\t\t}\n\n\t\treturn fragments.map((v: any) => (\n\t\t\t<FragmentTile\n\t\t\t\tkey={v.id}\n\t\t\t\t{...v}\n\t\t\t\tfragment={v}\n\t\t\t\tto={`/edit/${v.id}`}\n\t\t\t\t{...v.lastModified}\n\t\t\t\tsetModalFragment={setModalFragment}/>\n\t\t));\n\t};\n\n\treturn (\n\t\t<div className={fragmentRowWrapper}>\n\t\t\t{getTilesOrPlaceholder()}\n\t\t</div>\n\t);\n};\n","export const generateNewFragment = (\n\tfragment: any\n) => {\n\tconst fragmentID = `${Math.random().toString().slice(2)}${Math.random().toString().slice(2)}`;\n\tconst fragmentName = 'New fragment';\n\n\treturn {\n\t\tid: fragmentID,\n\t\tlastModified: new Date().toISOString(),\n\t\ttitle: fragmentName,\n\t\tdata: fragment\n\t};\n};\n","import React, { useState } from 'react';\n\nimport { CreateFragmentModal } from './create-fragment-modal';\nimport { ChooseFragmentModal } from './choose-fragment-modal';\nimport { ImportJsonModal } from './import-json-modal';\n\nexport enum FragmentWizardModals {\n\tCREATE_FRAGMENT_MODAL,\n\tCHOOSE_FRAGMENT_MODAL,\n\tIMPORT_JSON_MODAL\n}\n\nexport const FragmentWizard = ({ shouldDisplay, setShouldDisplay, dispatch }: any) => {\n\t// These are states which are shared amongst the three modals.\n\tconst [displayedModal, setDisplayedModal]\n\t\t= useState<FragmentWizardModals | null>(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\t// This is used to indicate which modal was last visited and is used to go go back to the\n\t// correct previous modal.\n\tconst [lastVisitedModal, setLastVisitedModal]\n\t\t= useState<FragmentWizardModals>(FragmentWizardModals.CREATE_FRAGMENT_MODAL);\n\tconst [uploadedData, setUploadedData] = useState<any>({});\n\n\tconst modalSwitcher = () => {\n\t\tif (!shouldDisplay) {\n\t\t\treturn null;\n\t\t}\n\t\tswitch(displayedModal) {\n\t\t\tcase FragmentWizardModals.IMPORT_JSON_MODAL:\n\t\t\t\treturn (\n\t\t\t\t\t<ImportJsonModal\n\t\t\t\t\t\tshouldDisplay={shouldDisplay}\n\t\t\t\t\t\tsetShouldDisplay={setShouldDisplay}\n\t\t\t\t\t\tsetDisplayedModal={setDisplayedModal}\n\t\t\t\t\t\tlastVisitedModal={lastVisitedModal}\n\t\t\t\t\t\tsetLastVisitedModal={setLastVisitedModal}\n\t\t\t\t\t\tuploadedData={uploadedData}\n\t\t\t\t\t\tsetUploadedData={setUploadedData}\n\t\t\t\t\t\tdispatch={dispatch} />\n\t\t\t\t);\n\t\t\tcase FragmentWizardModals.CREATE_FRAGMENT_MODAL:\n\t\t\t\treturn (\n\t\t\t\t\t<CreateFragmentModal\n\t\t\t\t\t\tshouldDisplay={shouldDisplay}\n\t\t\t\t\t\tsetShouldDisplay={setShouldDisplay}\n\t\t\t\t\t\tsetDisplayedModal={setDisplayedModal}\n\t\t\t\t\t\tsetLastVisitedModal={setLastVisitedModal} />\n\t\t\t\t);\n\t\t\tcase FragmentWizardModals.CHOOSE_FRAGMENT_MODAL:\n\t\t\t\treturn (\n\t\t\t\t\t<ChooseFragmentModal\n\t\t\t\t\t\tshouldDisplay={shouldDisplay}\n\t\t\t\t\t\tsetShouldDisplay={setShouldDisplay}\n\t\t\t\t\t\tsetDisplayedModal={setDisplayedModal}\n\t\t\t\t\t\tlastVisitedModal={lastVisitedModal}\n\t\t\t\t\t\tsetLastVisitedModal={setLastVisitedModal}\n\t\t\t\t\t\tuploadedData={uploadedData}\n\t\t\t\t\t\tsetUploadedData={setUploadedData}\n\t\t\t\t\t\tdispatch={dispatch} />\n\t\t\t\t);\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t};\n\n\treturn modalSwitcher();\n};\n","import React, { useContext } from 'react';\n\nimport { css } from 'emotion';\nimport {\n\tModal,\n\tInlineNotification,\n\tNotificationActionButton\n} from 'carbon-components-react';\nimport { FragmentWizardModals } from './fragment-wizard';\nimport { generateNewFragment } from './generate-new-fragment';\n\nimport {\n\tFragmentActionType,\n\tFragmentAction,\n\tFragmentState,\n\tFragmentsContext\n} from '../../../context';\nimport { useHistory } from 'react-router-dom';\nimport { LocalFragmentsContext, LocalFragmentActionType } from '../../../context/local-fragments-context';\nimport { warningNotificationProps } from '../../../utils/file-tools';\n\nconst fragmentOptions = css`\n\tmargin-left: 30px;\n\tmargin-right: 30px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\n\t// This is the viewport width that causes the selection tiles to overlap.\n\t@media screen and (max-width: 45rem) {\n\t\tflex-direction: column;\n\t}\n`;\n\nexport interface ChooseFragmentModalProps {\n\tshouldDisplay: boolean,\n\tsetShouldDisplay: (shouldDisplay: boolean) => void,\n\tsetDisplayedModal: (displayedModal: FragmentWizardModals | null) => void,\n\tsetLastVisitedModal: (lastVisitedModal: FragmentWizardModals) => void,\n\tlastVisitedModal: FragmentWizardModals,\n\tuploadedData: any,\n\tsetUploadedData: (uploadedData: any) => void,\n\tdispatch: (fragmentAction: FragmentAction) => FragmentState\n}\n\nexport const ChooseFragmentModal = (props: ChooseFragmentModalProps) => {\n\tconst [, updateLocalFragments] = useContext(LocalFragmentsContext);\n\tconst [, dispatch] = useContext(FragmentsContext);\n\n\tconst history = useHistory();\n\n\tconst generateFragment = () => {\n\t\tconst generatedFragment = generateNewFragment(\n\t\t\tprops.uploadedData.data\n\t\t);\n\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.ADD_ONE,\n\t\t\tdata: generatedFragment\n\t\t});\n\t\tupdateLocalFragments({\n\t\t\ttype: LocalFragmentActionType.ADD,\n\t\t\tdata: { id: generatedFragment.id }\n\t\t});\n\t\thistory.push(`/edit/${generatedFragment.id}`);\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\topen={props.shouldDisplay}\n\t\t\tshouldSubmitOnEnter={false}\n\t\t\tselectorPrimaryFocus='.bx--tile--selectable'\n\t\t\tonRequestSubmit={() => {\n\t\t\t\tgenerateFragment();\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CHOOSE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\tonRequestClose={() => { props.setShouldDisplay(false); }}\n\t\t\tonSecondarySubmit={() => {\n\t\t\t\tprops.setDisplayedModal(props.lastVisitedModal);\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CHOOSE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\thasForm\n\t\t\tmodalHeading='Create new fragment'\n\t\t\tprimaryButtonText='Done'\n\t\t\tsecondaryButtonText='Back'>\n\t\t\t{\n\t\t\t\tprops.uploadedData.wasDataModified\n\t\t\t\t\t? <InlineNotification\n\t\t\t\t\t\t{ ...warningNotificationProps }\n\t\t\t\t\t\tactions={\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<NotificationActionButton\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tprops.setUploadedData({\n\t\t\t\t\t\t\t\t\t\t\tdata: [],\n\t\t\t\t\t\t\t\t\t\t\twasDataModified: false\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\tUse demo data\n\t\t\t\t\t\t\t\t</NotificationActionButton>\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tprops.uploadedData && props.uploadedData.originalData\n\t\t\t\t\t\t\t\t\t&& <NotificationActionButton\n\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\tprops.setUploadedData({\n\t\t\t\t\t\t\t\t\t\t\t\tdata: props.uploadedData.originalData,\n\t\t\t\t\t\t\t\t\t\t\t\twasDataModified: false\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\tUse unmodified data\n\t\t\t\t\t\t\t\t\t</NotificationActionButton>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t} />\n\t\t\t\t\t: null\n\t\t\t}\n\t\t\t<p>Choose a type of fragment and click done to start editing your new fragment</p>\n\t\t\t<div className={fragmentOptions}>\n\t\t\t\tEmpty\n\t\t\t</div>\n\t\t</Modal>\n\t);\n};\n","import React, { useCallback, useContext, useEffect, useState } from 'react';\n\nimport { css } from 'emotion';\nimport {\n\tModal,\n\tFormItem,\n\tFileUploaderDropContainer,\n\tFileUploaderItem,\n\tTextArea\n} from 'carbon-components-react';\nimport { FragmentWizardModals } from './fragment-wizard';\nimport { generateNewFragment } from './generate-new-fragment';\n\nimport {\n\tFragmentActionType,\n\tFragmentAction,\n\tFragmentState,\n\tFragmentsContext\n} from '../../../context';\nimport { useHistory } from 'react-router-dom';\nimport { LocalFragmentsContext, LocalFragmentActionType } from '../../../context/local-fragments-context';\n\nconst fragmentOptions = css`\n\tmargin-left: 30px;\n\tmargin-right: 30px;\n\tdisplay: flex;\n\tflex-direction: row;\n\tflex-wrap: wrap;\n\tjustify-content: space-between;\n\n\t// This is the viewport width that causes the selection tiles to overlap.\n\t@media screen and (max-width: 45rem) {\n\t\tflex-direction: column;\n\t}\n`;\n\nexport interface ImportJsonModalProps {\n\tshouldDisplay: boolean,\n\tsetShouldDisplay: (shouldDisplay: boolean) => void,\n\tsetDisplayedModal: (displayedModal: FragmentWizardModals | null) => void,\n\tsetLastVisitedModal: (lastVisitedModal: FragmentWizardModals) => void,\n\tlastVisitedModal: FragmentWizardModals,\n\tuploadedData: any,\n\tsetUploadedData: (uploadedData: any) => void,\n\tmultiple?: boolean,\n\tdispatch: (fragmentAction: FragmentAction) => FragmentState\n}\n\nlet lastId = 0;\n\nconst uid = (prefix = 'id') => {\n\tlastId++;\n\treturn `${prefix}${lastId}`;\n}\n\nexport const ImportJsonModal = (props: ImportJsonModalProps) => {\n\tconst [, updateLocalFragments] = useContext(LocalFragmentsContext);\n\tconst [, dispatch] = useContext(FragmentsContext);\n\tconst [files, setFiles] = useState([] as any[]);\n\tconst [jsonString, _setJsonString] = useState('');\n\tconst [fragmentJson, setFragmentJson] = useState('');\n\tconst [jsonParseError, setJsonParseError] = useState('');\n\n\tconst setJsonString = (js: string) => {\n\t\t_setJsonString(js);\n\n\t\ttry {\n\t\t\tif (js) {\n\t\t\t\tsetFragmentJson(JSON.parse(js));\n\t\t\t}\n\t\t\tsetJsonParseError('');\n\t\t} catch (e) {\n\t\t\tsetJsonParseError((e as any).toString());\n\t\t}\n\t};\n\n\tconst handleDrop = (e: any) => {\n\t\te.preventDefault();\n\t};\n\n\tconst handleDragover = (e: any) => {\n\t\te.preventDefault();\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('drop', handleDrop);\n\t\tdocument.addEventListener('dragover', handleDragover);\n\t\treturn () => {\n\t\t\tdocument.removeEventListener('drop', handleDrop);\n\t\t\tdocument.removeEventListener('dragover', handleDragover);\n\t\t};\n\t}, []);\n\n\tconst history = useHistory();\n\tconst uploadFile = async (fileToUpload: any) => {\n\t\t// file size validation\n\t\tif (fileToUpload.filesize > 512000) {\n\t\t\tconst updatedFile = {\n\t\t\t\t...fileToUpload,\n\t\t\t\tstatus: 'edit',\n\t\t\t\ticonDescription: 'Delete file',\n\t\t\t\tinvalid: true,\n\t\t\t\terrorSubject: 'File size exceeds limit',\n\t\t\t\terrorBody: '500kb max file size. Select a new file and try again.',\n\t\t\t};\n\t\t\tsetFiles((files) =>\n\t\t\t\tfiles.map((file) =>\n\t\t\t\t\tfile.uuid === fileToUpload.uuid ? updatedFile : file\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// file type validation\n\t\tif (fileToUpload.invalidFileType) {\n\t\t\tconst updatedFile = {\n\t\t\t\t...fileToUpload,\n\t\t\t\tstatus: 'edit',\n\t\t\t\ticonDescription: 'Delete file',\n\t\t\t\tinvalid: true,\n\t\t\t\terrorSubject: 'Invalid file type',\n\t\t\t\terrorBody: `\"${fileToUpload.name}\" does not have a valid file type.`,\n\t\t\t};\n\t\t\tsetFiles((files) =>\n\t\t\t\tfiles.map((file) =>\n\t\t\t\t\tfile.uuid === fileToUpload.uuid ? updatedFile : file\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// reading\n\t\tvar reader = new FileReader();\n\t\treader.readAsText(fileToUpload.file, \"UTF-8\");\n\t\treader.onload = (event) => {\n\t\t\tsetJsonString(event.target?.result as string);\n\t\t}\n\t\treader.onerror = function (evt) {\n\t\t\tconsole.log(\"oops, fo\")\n\t\t}\n\n\t\tconst updatedFile = {\n\t\t\t...fileToUpload,\n\t\t\tstatus: 'complete',\n\t\t\ticonDescription: 'Upload complete',\n\t\t};\n\t\tsetFiles((files) =>\n\t\t\tfiles.map((file) =>\n\t\t\t\tfile.uuid === fileToUpload.uuid ? updatedFile : file\n\t\t\t)\n\t\t);\n\n\t\t// show x icon after 1 second\n\t\tsetTimeout(() => {\n\t\t\tconst updatedFile = {\n\t\t\t\t...fileToUpload,\n\t\t\t\tstatus: 'edit',\n\t\t\t\ticonDescription: 'Delete file',\n\t\t\t};\n\t\t\tsetFiles((files) =>\n\t\t\t\tfiles.map((file) =>\n\t\t\t\t\tfile.uuid === fileToUpload.uuid ? updatedFile : file\n\t\t\t\t)\n\t\t\t);\n\t\t}, 1000);\n\t};\n\n\tconst onAddFiles = useCallback(\n\t\t(evt, { addedFiles }) => {\n\t\t\tevt.stopPropagation();\n\t\t\tconst newFiles = addedFiles.map((file: any) => ({\n\t\t\t\tuuid: uid(),\n\t\t\t\tfile: file,\n\t\t\t\tname: file.name,\n\t\t\t\tfilesize: file.size,\n\t\t\t\tstatus: 'uploading',\n\t\t\t\ticonDescription: 'Uploading',\n\t\t\t\tinvalidFileType: file.invalidFileType,\n\t\t\t}));\n\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\tif (props.multiple) {\n\t\t\t\tsetFiles([...files, ...newFiles]);\n\t\t\t\tnewFiles.forEach(uploadFile);\n\t\t\t} else if (newFiles[0]) {\n\t\t\t\tsetFiles([newFiles[0]]);\n\t\t\t\tuploadFile(newFiles[0]);\n\t\t\t}\n\t\t},\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t\t[files, props.multiple]\n\t);\n\n\tconst handleFileUploaderItemClick = useCallback(\n\t\t(_, { uuid: clickedUuid }) =>\n\t\t\tsetFiles(files.filter(({ uuid }) => clickedUuid !== uuid)),\n\t\t[files]\n\t);\n\n\n\tconst generateFragment = () => {\n\t\tconst generatedFragment = generateNewFragment(fragmentJson);\n\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.ADD_ONE,\n\t\t\tdata: generatedFragment\n\t\t});\n\t\tupdateLocalFragments({\n\t\t\ttype: LocalFragmentActionType.ADD,\n\t\t\tdata: { id: generatedFragment.id }\n\t\t});\n\t\thistory.push(`/edit/${generatedFragment.id}`);\n\t};\n\n\treturn (\n\t\t<Modal\n\t\t\topen={props.shouldDisplay}\n\t\t\tshouldSubmitOnEnter={false}\n\t\t\tselectorPrimaryFocus='.bx--tile--selectable'\n\t\t\tonRequestSubmit={() => {\n\t\t\t\tgenerateFragment();\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CHOOSE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\tonRequestClose={() => { props.setShouldDisplay(false); }}\n\t\t\tonSecondarySubmit={() => {\n\t\t\t\tprops.setDisplayedModal(props.lastVisitedModal);\n\t\t\t\tprops.setLastVisitedModal(FragmentWizardModals.CHOOSE_FRAGMENT_MODAL);\n\t\t\t}}\n\t\t\thasForm\n\t\t\tmodalHeading='Import JSON'\n\t\t\tprimaryButtonText='Done'\n\t\t\tprimaryButtonDisabled={ !jsonString || jsonParseError }\n\t\t\tsecondaryButtonText='Back'>\n\t\t\t<div className={fragmentOptions}>\n\t\t\t\t<FormItem>\n\t\t\t\t\t<p className='bx--file--label'>Upload file</p>\n\t\t\t\t\t<p className='bx--label-description'>\n\t\t\t\t\t\tMax file size is 500kb. Supported file type is .json\n\t\t\t\t\t</p>\n\t\t\t\t\t<FileUploaderDropContainer accept={['.json']} onAddFiles={onAddFiles} />\n\t\t\t\t\t<div className={'bx--file-container'} style={{ width: '100%' }}>\n\t\t\t\t\t\t{files.map(\n\t\t\t\t\t\t\t({\n\t\t\t\t\t\t\t\tuuid,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tfilesize,\n\t\t\t\t\t\t\t\tstatus,\n\t\t\t\t\t\t\t\ticonDescription,\n\t\t\t\t\t\t\t\tinvalid,\n\t\t\t\t\t\t\t\t...rest\n\t\t\t\t\t\t\t}) => (\n\t\t\t\t\t\t\t\t<FileUploaderItem\n\t\t\t\t\t\t\t\t\tkey={uid()}\n\t\t\t\t\t\t\t\t\tuuid={uuid}\n\t\t\t\t\t\t\t\t\tname={name}\n\t\t\t\t\t\t\t\t\tfilesize={filesize}\n\t\t\t\t\t\t\t\t\t// eslint-disable-next-line react/prop-types\n\t\t\t\t\t\t\t\t\tsize={500}\n\t\t\t\t\t\t\t\t\tstatus={status}\n\t\t\t\t\t\t\t\t\ticonDescription={iconDescription}\n\t\t\t\t\t\t\t\t\tinvalid={invalid}\n\t\t\t\t\t\t\t\t\tonDelete={handleFileUploaderItemClick}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</FormItem>\n\t\t\t\t<code style={{ color: '#a00', marginBottom: '10pt', width: '100%' }}>\n\t\t\t\t\t<pre>{ jsonParseError }</pre>\n\t\t\t\t</code>\n\t\t\t\t<TextArea\n\t\t\t\t\tlabelText='JSON to load'\n\t\t\t\t\tplaceholder=\"{'your': 'json', 'goes': 'here'}\"\n\t\t\t\t\thelperText=''\n\t\t\t\t\tvalue={jsonString}\n\t\t\t\t\tonChange={(event: any) => setJsonString(event.target.value)}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n};\n","import React, {\n\tuseState,\n\tuseContext,\n\tuseEffect\n} from 'react';\nimport { css } from 'emotion';\nimport { DashboardSearch, SortDirection } from './dashboard-search';\nimport { FragmentGroupDisplayed, DashboardHeader } from './dashboard-header';\n\nimport {\n\tCol,\n\tMain,\n\tRow\n} from './../../components';\nimport { FragmentTileList } from './fragment-tile-list';\nimport { FragmentWizard } from './fragment-wizard/fragment-wizard';\nimport { LocalFragmentsContext } from '../../context/local-fragments-context';\nimport { FragmentModal } from '../edit/fragment-modal';\nimport { FragmentsContext, FragmentActionType } from '../../context';\n\nconst fragmentSort = (sortDirection: SortDirection) => function(a: any, b: any) {\n\tif (sortDirection === SortDirection.Descending) {\n\t\treturn Date.parse(a.lastModified) - Date.parse(b.lastModified);\n\t}\n\treturn Date.parse(b.lastModified) - Date.parse(a.lastModified);\n};\n\n// styles for the header (title and content switcher)\n// to override carbon styling for <main>\nconst headerRowSyles = css`\n\tbackground: white;\n\tpadding: 0 2rem;\n\tmargin: 0 -2rem;\n\tpadding-top: 2rem;\n\tmargin-top: -2rem;\n\t.bx--col {\n\t\tpadding: 0;\n\t}\n`;\n\n// additional styles for the search row\nconst searchRowStyles = css`\n\tpadding-right: 0;\n\tpadding-left: 1rem;\n\tmargin: 0 -2rem;\n\tborder-bottom: 1px solid #d6d6d6;\n\t.bx--col {\n\t\tpadding-right: 0;\n\t}\n`;\n\nexport const Dashboard = () => {\n\tconst [{ fragments, loaded }, dispatch] = useContext(FragmentsContext);\n\tconst [fragmentGroupDisplayed, setFragmentGroupDisplayed] = useState(FragmentGroupDisplayed.LocalOnly);\n\tconst [fragmentTitleFilter, setFragmentTitleFilter] = useState('');\n\tconst [sortDirection, setSortDirection] = useState(SortDirection.Ascending);\n\tconst [displayWizard, setDisplayWizard] = useState(false);\n\tconst [localFragments] = useContext(LocalFragmentsContext);\n\n\tuseEffect(() => {\n\t\tdispatch({\n\t\t\ttype: FragmentActionType.UPDATE_ALL,\n\t\t\tdata: fragments,\n\t\t\tloaded: true\n\t\t});\n\t// we don't want to run this effect when fragments change because it creates a loop\n\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [dispatch]);\n\n\tuseEffect(() => {\n\t\tdocument.title = 'Carbon Components Builder  UI Fragments Composer';\n\t}, []);\n\n\tconst getLocalFragments = () => {\n\t\tif (!fragments || fragments.length === 0) {\n\t\t\treturn [];\n\t\t}\n\t\t// when pagination works, change this to take that into account TODO\n\t\treturn fragments.filter((fragment: any) => localFragments.find((lc: any) => lc.id === fragment.id));\n\t};\n\n\tconst filterFragments = (fragments: any) => fragments.filter((fragment: any) => fragment?.title.toLowerCase()\n\t\t.includes(fragmentTitleFilter.toLowerCase()) && !fragment.hidden)\n\t\t.sort(fragmentSort(sortDirection));\n\n\tlet displayedFragments;\n\n\tswitch (fragmentGroupDisplayed) {\n\t\tcase FragmentGroupDisplayed.LocalOnly:\n\t\t\tdisplayedFragments = filterFragments(getLocalFragments());\n\t\t\tbreak;\n\t\tcase FragmentGroupDisplayed.Templates: {\n\t\t\tdisplayedFragments = filterFragments(\n\t\t\t\tfragments.filter((fragment: any) => fragment.labels && fragment.labels.includes('template'))\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t\tcase FragmentGroupDisplayed.AllFragments:\n\t\tdefault:\n\t\t\tdisplayedFragments = filterFragments(fragments);\n\t\t\tbreak;\n\t}\n\tconst [modalFragment, setModalFragment] = useState<any>(null);\n\n\treturn (\n\t\t<>\n\t\t\t<Main style={{ marginLeft: '0px' }}>\n\t\t\t\t<Row styles={headerRowSyles}>\n\t\t\t\t\t<Col cols={{\n\t\t\t\t\t\tsm: 12,\n\t\t\t\t\t\tmd: 12,\n\t\t\t\t\t\tlg: 12\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<DashboardHeader\n\t\t\t\t\t\t\tonDisplayedSwitchHandler={setFragmentGroupDisplayed}\n\t\t\t\t\t\t\tfragmentGroupDisplayed={fragmentGroupDisplayed} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row styles={searchRowStyles}>\n\t\t\t\t\t<Col cols={{\n\t\t\t\t\t\tsm: 12,\n\t\t\t\t\t\tmd: 12,\n\t\t\t\t\t\tlg: 12\n\t\t\t\t\t}}>\n\t\t\t\t\t\t<DashboardSearch\n\t\t\t\t\t\t\tonSearchHandler={setFragmentTitleFilter}\n\t\t\t\t\t\t\tonSortHandler={setSortDirection}\n\t\t\t\t\t\t\tsortDirection={sortDirection}\n\t\t\t\t\t\t\tdisplayWizard={displayWizard}\n\t\t\t\t\t\t\tsetDisplayWizard={setDisplayWizard} />\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t\t<Row>\n\t\t\t\t\t<Col cols={{\n\t\t\t\t\t\tsm: 12,\n\t\t\t\t\t\tmd: 12,\n\t\t\t\t\t\tlg: 12\n\t\t\t\t\t}}>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t!loaded\n\t\t\t\t\t\t\t\t? 'Loading...'\n\t\t\t\t\t\t\t\t: <FragmentTileList\n\t\t\t\t\t\t\t\t\tfragments={displayedFragments}\n\t\t\t\t\t\t\t\t\tlocalFragments={localFragments}\n\t\t\t\t\t\t\t\t\tloaded={loaded}\n\t\t\t\t\t\t\t\t\tsetModalFragment={setModalFragment} />\n\t\t\t\t\t\t}\n\t\t\t\t\t</Col>\n\t\t\t\t</Row>\n\t\t\t</Main>\n\t\t\t<FragmentWizard\n\t\t\t\tshouldDisplay={displayWizard}\n\t\t\t\tsetShouldDisplay={setDisplayWizard} />\n\t\t\t{modalFragment && <FragmentModal fragment={modalFragment} />}\n\t\t</>\n\t);\n};\n","import React from 'react';\nimport { css } from 'emotion';\nimport { Button } from 'carbon-components-react';\nimport { useHistory } from 'react-router-dom';\nimport { Header } from '../components/header';\n// import the img placeholder svg\nimport placeholder from '../assets/chart-404.svg';\n\n// styles for placeholder\nconst svgStyle = css`\n\twidth: 25vw;\n\theight: auto;\n\tmax-width: 400px;\n`;\n\nconst placeholderContainer = css`\n\tmargin-top: 48px;\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: calc(100vh - 48px);\n\tpadding: 24px;\n\tpadding-top: 64px;\n\talign-items: center;\n`;\n\nexport const NotFound = () => {\n\tconst history = useHistory();\n\treturn (\n\t\t<>\n\t\t\t<Header />\n\t\t\t<div className={placeholderContainer}>\n\t\t\t\t<img alt=\"Fragment not found\" src={placeholder} className={svgStyle} />\n\t\t\t\t<div style={{ textAlign: 'left' }}>\n\t\t\t\t\t<h3>404: Not found</h3>\n\t\t\t\t\t<p style={{ marginTop: '0.5em' }}>\n\t\t\t\t\t\tThis page does not exist, click  <strong>Go back</strong><br /> to return.\n\t\t\t\t\t</p>\n\t\t\t\t\t<Button style={{ marginTop: '1rem' }} onClick={() => history.goBack()}>Go back</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n","import React, { ErrorInfo } from 'react';\nimport { NotFound } from './not-found';\n\n/* Currently, there lacks react hooks with equivalent\neffect of getDerivedStateFromError and componentDidCatch,\ncurrent component based on: https://gist.github.com/andywer/800f3f25ce3698e8f8b5f1e79fed5c9c,\nthis should be written once the above hooks mentioned above are released.\n*/\n\ntype ErrorHandler = (error: Error, info: ErrorInfo) => void\ntype ErrorHandlingComponent<Props> = (props: Props, error?: Error) => React.ReactNode\n\ntype ErrorState = { error?: Error }\n\nfunction Catch<Props extends {}>(\n\tcomponent: ErrorHandlingComponent<Props>,\n\terrorHandler?: ErrorHandler\n): React.ComponentType<Props> {\n\treturn class Boundary extends React.Component<Props, ErrorState> {\n\t\tstate: ErrorState = { error: undefined }\n\n\t\tstatic getDerivedStateFromError(error: Error) {\n\t\t\treturn { error };\n\t\t}\n\n\t\tcomponentDidCatch(error: Error, info: React.ErrorInfo) {\n\t\t\tif (errorHandler) {\n\t\t\t\terrorHandler(error, info);\n\t\t\t}\n\t\t}\n\n\t\trender() {\n\t\t\treturn component(this.props, this.state.error);\n\t\t}\n\t};\n}\n\ntype Props = {\n\tchildren: React.ReactNode\n}\n\nexport const ErrorBoundary = Catch((props: Props, error?: Error) => {\n\tif (error) {\n\t\treturn <NotFound />;\n\t}\n\treturn <>{props.children}</>;\n});\n","import React, { useState } from 'react';\nimport { HeaderContainer } from 'carbon-components-react';\nimport { Header } from '../components/index';\n\nexport const UIShell = () => {\n\tconst [isSideNavExpanded, setIsSideNavExpanded] = useState(false);\n\n\treturn (\n\t\t<HeaderContainer\n\t\t\trender={() => (\n\t\t\t\t<>\n\t\t\t\t\t<Header\n\t\t\t\t\t\tisSideNavExpanded={isSideNavExpanded}\n\t\t\t\t\t\tsetIsSideNavExpanded={setIsSideNavExpanded} />\n\t\t\t\t</>\n\t\t\t)} />\n\t);\n};\n","import React from 'react';\nimport {\n\tRoute, BrowserRouter as Router, Switch\n} from 'react-router-dom';\nimport { Notification } from './components/index';\nimport {\n\tDashboard,\n\tEdit,\n\tErrorBoundary,\n\tNotFound\n} from './routes';\nimport { FragmentsContextProvider } from './context/fragments-context';\nimport { ModalContextProvider } from './context/modal-context';\nimport { NotificationContextProvider } from './context/notification-context';\nimport { LocalFragmentsContextProvider } from './context/local-fragments-context';\nimport { UIShell } from './components/ui-shell';\nimport { css } from 'emotion';\n\nconst app = css`\n\tnav.bx--side-nav--expanded + div#edit-content {\n\t\tpadding-left: calc(2.25rem + 16rem);\n\t}\n\t// This is the viewport width that causes the edit header items to overlap\n\t@media screen and (max-width: 38.75rem) {\n\t\tnav.bx--side-nav--expanded + div#edit-content {\n\t\t\tpadding-left: 36px;\n\t\t}\n\t}\n`;\n\nexport const App = () => (\n\t<Router>\n\t\t<div className={app}>\n\t\t\t<ErrorBoundary>\n\t\t\t\t<FragmentsContextProvider>\n\t\t\t\t\t<NotificationContextProvider>\n\t\t\t\t\t\t<LocalFragmentsContextProvider>\n\t\t\t\t\t\t\t<UIShell />\n\t\t\t\t\t\t\t<Notification />\n\t\t\t\t\t\t\t<ModalContextProvider>\n\t\t\t\t\t\t\t\t<Switch>\n\t\t\t\t\t\t\t\t\t<Route path='/' exact component={Dashboard} />\n\t\t\t\t\t\t\t\t\t<Route\n\t\t\t\t\t\t\t\t\t\tpath={['/edit', '/edit/:id']}\n\t\t\t\t\t\t\t\t\t\texact\n\t\t\t\t\t\t\t\t\t\tcomponent={Edit} />\n\t\t\t\t\t\t\t\t\t<Route path=\"*\" component={NotFound} />\n\t\t\t\t\t\t\t\t</Switch>\n\t\t\t\t\t\t\t</ModalContextProvider>\n\t\t\t\t\t\t</LocalFragmentsContextProvider>\n\t\t\t\t\t</NotificationContextProvider>\n\t\t\t\t</FragmentsContextProvider>\n\t\t\t</ErrorBoundary>\n\t\t</div>\n\t</Router>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\n// disable eslint beacuse reasons\n/* eslint-disable */\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost'\n    // [::1] is the IPv6 localhost address.\n    || window.location.hostname === '[::1]'\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    || window.location.hostname.match(\n    \t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(\n\t\t\t(process as { env: { [key: string]: string } }).env.UI_BASE_URL,\n\t\t\twindow.location.href\n\t\t);\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if UI_BASE_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.UI_BASE_URL}/service-worker.js`;\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config);\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service '\n              + 'worker. To learn more, visit http://bit.ly/CRA-PWA'\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing;\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all '\n                  + 'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.');\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error);\n\t\t});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl)\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type');\n\t\t\tif (\n\t\t\t\tresponse.status === 404\n        || (contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config);\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t);\n\t\t});\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\tregistration.unregister();\n\t\t});\n\t}\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport { App } from './app';\nimport * as serviceWorker from './serviceWorker';\n\n// eslint-disable-next-line\nconst render = (Component: any) => ReactDOM.render(<Component/>, document.getElementById('root'));\n\nrender(App);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\nif (module.hot) {\n\tmodule.hot.accept('./app', () => {\n\t\tconsole.info('App updated');\n\t\tconst Next = require('./app').App;\n\t\trender(Next);\n\t});\n}\n"],"sourceRoot":""}